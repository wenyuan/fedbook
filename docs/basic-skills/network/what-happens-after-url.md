# 输入 URL 到页面展示，中间发生了什么？

> 这个问题挺常问的，因为涉及到的内容很多，不同的角度会有不同的侧重点。
> 
> 这篇文章其实是：输入 URL 到页面展示，中间发生了什么？（网络版）—— 侧重网络模型的行为过程
> 
> 之前写过另一个：[输入 URL 到页面展示，中间发生了什么？（前端版）](/frontend-knowledge/browser/browser-macro-knowledge/#输入-url-到页面展示) —— 侧重客户端的行为过程

## 应用层数据：HTTP

浏览器做的第一步工作是解析 URL，从而生成发送给 Web 服务器的请求信息。

<div style="text-align: center;">
  <svg id="SvgjsSvg1006" width="777.25" height="292" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1007"></defs><g id="SvgjsG1008" transform="translate(25,25)"><path id="SvgjsPath1009" d="M 0 0L 727 0L 727 41L 0 41Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffcc99"></path><g id="SvgjsG1010"><text id="SvgjsText1011" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="707px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6.5" transform="rotate(0)"><tspan id="SvgjsTspan1012" dy="20" x="363.5"><tspan id="SvgjsTspan1013" style="text-decoration:;">http://www.server.com/dir1/file1.html</tspan></tspan></text></g></g><g id="SvgjsG1014" transform="translate(25,137)"><path id="SvgjsPath1015" d="M 0 0L 57.25 0L 57.25 41L 0 41Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ceeb8b"></path><g id="SvgjsG1016"><text id="SvgjsText1017" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="38px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6.5" transform="rotate(0)"><tspan id="SvgjsTspan1018" dy="20" x="29"><tspan id="SvgjsTspan1019" style="text-decoration:;">http:</tspan></tspan></text></g></g><g id="SvgjsG1020" transform="translate(372.25,79)"><path id="SvgjsPath1021" d="M 10.725 0L 21.775000000000002 0L 21.775000000000002 28.75L 32.5 28.75L 16.25 45L 0 28.75L 10.725 28.75L 10.725 0Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffcc99"></path><g id="SvgjsG1022"><text id="SvgjsText1023" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="46px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.625" transform="rotate(0)"></text></g></g><g id="SvgjsG1024" transform="translate(125,137)"><path id="SvgjsPath1025" d="M 0 0L 41 0L 41 41L 0 41Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ceeb8b"></path><g id="SvgjsG1026"><text id="SvgjsText1027" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="21px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6.5" transform="rotate(0)"><tspan id="SvgjsTspan1028" dy="20" x="20.5"><tspan id="SvgjsTspan1029" style="text-decoration:;">//</tspan></tspan></text></g></g><g id="SvgjsG1030" transform="translate(82.25,137)"><path id="SvgjsPath1031" d="M 0 0L 40.5 0L 40.5 41L 0 41Z" stroke="none" fill="none"></path><g id="SvgjsG1032"><text id="SvgjsText1033" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="41px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6.5" transform="rotate(0)"><tspan id="SvgjsTspan1034" dy="20" x="20.5"><tspan id="SvgjsTspan1035" style="text-decoration:;">+</tspan></tspan></text></g></g><g id="SvgjsG1036" transform="translate(168.25,137)"><path id="SvgjsPath1037" d="M 0 0L 40.5 0L 40.5 41L 0 41Z" stroke="none" fill="none"></path><g id="SvgjsG1038"><text id="SvgjsText1039" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="41px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6.5" transform="rotate(0)"><tspan id="SvgjsTspan1040" dy="20" x="20.5"><tspan id="SvgjsTspan1041" style="text-decoration:;">+</tspan></tspan></text></g></g><g id="SvgjsG1042" transform="translate(208.75,137)"><path id="SvgjsPath1043" d="M 0 0L 145.25 0L 145.25 41L 0 41Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ceeb8b"></path><g id="SvgjsG1044"><text id="SvgjsText1045" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="126px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6.5" transform="rotate(0)"><tspan id="SvgjsTspan1046" dy="20" x="73"><tspan id="SvgjsTspan1047" style="text-decoration:;">www.server.com</tspan></tspan></text></g></g><g id="SvgjsG1048" transform="translate(354.25,137)"><path id="SvgjsPath1049" d="M 0 0L 40.5 0L 40.5 41L 0 41Z" stroke="none" fill="none"></path><g id="SvgjsG1050"><text id="SvgjsText1051" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="41px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6.5" transform="rotate(0)"><tspan id="SvgjsTspan1052" dy="20" x="20.5"><tspan id="SvgjsTspan1053" style="text-decoration:;">+</tspan></tspan></text></g></g><g id="SvgjsG1054" transform="translate(395,137)"><path id="SvgjsPath1055" d="M 0 0L 41 0L 41 41L 0 41Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ceeb8b"></path><g id="SvgjsG1056"><text id="SvgjsText1057" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="21px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6.5" transform="rotate(0)"><tspan id="SvgjsTspan1058" dy="20" x="20.5"><tspan id="SvgjsTspan1059" style="text-decoration:;">/</tspan></tspan></text></g></g><g id="SvgjsG1060" transform="translate(436.25,137)"><path id="SvgjsPath1061" d="M 0 0L 40.5 0L 40.5 41L 0 41Z" stroke="none" fill="none"></path><g id="SvgjsG1062"><text id="SvgjsText1063" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="41px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6.5" transform="rotate(0)"><tspan id="SvgjsTspan1064" dy="20" x="20.5"><tspan id="SvgjsTspan1065" style="text-decoration:;">+</tspan></tspan></text></g></g><g id="SvgjsG1066" transform="translate(477,137)"><path id="SvgjsPath1067" d="M 0 0L 57.25 0L 57.25 41L 0 41Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ceeb8b"></path><g id="SvgjsG1068"><text id="SvgjsText1069" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="38px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6.5" transform="rotate(0)"><tspan id="SvgjsTspan1070" dy="20" x="29"><tspan id="SvgjsTspan1071" style="text-decoration:;">dir1</tspan></tspan></text></g></g><g id="SvgjsG1072" transform="translate(534.5,137)"><path id="SvgjsPath1073" d="M 0 0L 40.5 0L 40.5 41L 0 41Z" stroke="none" fill="none"></path><g id="SvgjsG1074"><text id="SvgjsText1075" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="41px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6.5" transform="rotate(0)"><tspan id="SvgjsTspan1076" dy="20" x="20.5"><tspan id="SvgjsTspan1077" style="text-decoration:;">+</tspan></tspan></text></g></g><g id="SvgjsG1078" transform="translate(575.25,137)"><path id="SvgjsPath1079" d="M 0 0L 41 0L 41 41L 0 41Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ceeb8b"></path><g id="SvgjsG1080"><text id="SvgjsText1081" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="21px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6.5" transform="rotate(0)"><tspan id="SvgjsTspan1082" dy="20" x="20.5"><tspan id="SvgjsTspan1083" style="text-decoration:;">/</tspan></tspan></text></g></g><g id="SvgjsG1084" transform="translate(616.5,137)"><path id="SvgjsPath1085" d="M 0 0L 40.5 0L 40.5 41L 0 41Z" stroke="none" fill="none"></path><g id="SvgjsG1086"><text id="SvgjsText1087" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="41px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6.5" transform="rotate(0)"><tspan id="SvgjsTspan1088" dy="20" x="20.5"><tspan id="SvgjsTspan1089" style="text-decoration:;">+</tspan></tspan></text></g></g><g id="SvgjsG1090" transform="translate(657.25,137)"><path id="SvgjsPath1091" d="M 0 0L 94.75 0L 94.75 41L 0 41Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ceeb8b"></path><g id="SvgjsG1092"><text id="SvgjsText1093" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="75px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6.5" transform="rotate(0)"><tspan id="SvgjsTspan1094" dy="20" x="47.5"><tspan id="SvgjsTspan1095" style="text-decoration:;">file1.html</tspan></tspan></text></g></g><g id="SvgjsG1096" transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,752,184)"><path id="SvgjsPath1097" d="M 0 355Q 8.3 355 8.3 346L 8.3 186.5Q 8.3 177.5 22 177.5Q 8.3 177.5 8.3 168.5L 8.3 9Q 8.3 0 0 0" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1098" d="M 0 0L 83 0L 83 355L 0 355Z" stroke="none" fill="none"></path><g id="SvgjsG1099"><text id="SvgjsText1100" font-family="微软雅黑" text-anchor="start" font-size="13px" width="56px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="166.875" transform="rotate(0)"></text></g></g><g id="SvgjsG1101" transform="translate(466,201)"><path id="SvgjsPath1102" d="M 0 0L 218 0L 218 45L 0 45Z" stroke="none" fill="none"></path><g id="SvgjsG1103"><text id="SvgjsText1104" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="218px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="8.5" transform="rotate(0)"><tspan id="SvgjsTspan1105" dy="20" x="109"><tspan id="SvgjsTspan1106" style="text-decoration:;">表示数据源（文件）的路径名</tspan></tspan></text></g></g></svg>
  <p style="text-align: center; color: #888;">（URL 示例解析）</p>
</div>

对 URL 进行解析之后，浏览器确定了 Web 服务器和文件名，接下来就是根据这些信息来生成 HTTP 请求消息了。

<div style="text-align: center;">
  <svg id="SvgjsSvg1107" width="834" height="398" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1108"></defs><g id="SvgjsG1109" transform="translate(129,82)"><path id="SvgjsPath1110" d="M 0 0L 67 0L 67 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffcc99"></path><g id="SvgjsG1111"><text id="SvgjsText1112" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="47px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1113" dy="16" x="33.5"><tspan id="SvgjsTspan1114" style="text-decoration:;">方法</tspan></tspan></text></g></g><g id="SvgjsG1115" transform="translate(195,82)"><path id="SvgjsPath1116" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1117"><text id="SvgjsText1118" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1119" dy="16" x="19"><tspan id="SvgjsTspan1120" style="text-decoration:;">sp</tspan></tspan></text></g></g><g id="SvgjsG1121" transform="translate(232,82)"><path id="SvgjsPath1122" d="M 0 0L 67 0L 67 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffcc99"></path><g id="SvgjsG1123"><text id="SvgjsText1124" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="47px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1125" dy="16" x="33.5"><tspan id="SvgjsTspan1126" style="text-decoration:;">URL</tspan></tspan></text></g></g><g id="SvgjsG1127" transform="translate(297,82)"><path id="SvgjsPath1128" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1129"><text id="SvgjsText1130" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1131" dy="16" x="19"><tspan id="SvgjsTspan1132" style="text-decoration:;">sp</tspan></tspan></text></g></g><g id="SvgjsG1133" transform="translate(335,82)"><path id="SvgjsPath1134" d="M 0 0L 67 0L 67 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffcc99"></path><g id="SvgjsG1135"><text id="SvgjsText1136" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="47px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1137" dy="16" x="33.5"><tspan id="SvgjsTspan1138" style="text-decoration:;">版本</tspan></tspan></text></g></g><g id="SvgjsG1139" transform="translate(399,82)"><path id="SvgjsPath1140" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1141"><text id="SvgjsText1142" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1143" dy="16" x="19"><tspan id="SvgjsTspan1144" style="text-decoration:;">cr</tspan></tspan></text></g></g><g id="SvgjsG1145" transform="translate(436,82)"><path id="SvgjsPath1146" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1147"><text id="SvgjsText1148" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1149" dy="16" x="19"><tspan id="SvgjsTspan1150" style="text-decoration:;">lf</tspan></tspan></text></g></g><g id="SvgjsG1151" transform="translate(177.5,25)"><path id="SvgjsPath1152" d="M 0 0L 73 0L 73 31L 0 31Z" stroke="none" fill="none"></path><g id="SvgjsG1153"><text id="SvgjsText1154" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="73px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.875" transform="rotate(0)"><tspan id="SvgjsTspan1155" dy="16" x="36.5"><tspan id="SvgjsTspan1156" style="text-decoration:;">表示空格</tspan></tspan></text></g></g><g id="SvgjsG1157"><path id="SvgjsPath1158" d="M214 81.5L214 69L214 69L214 57" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none"></path></g><g id="SvgjsG1159" transform="translate(402,25)"><path id="SvgjsPath1160" d="M 0 0L 73 0L 73 31L 0 31Z" stroke="none" fill="none"></path><g id="SvgjsG1161"><text id="SvgjsText1162" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="73px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.875" transform="rotate(0)"><tspan id="SvgjsTspan1163" dy="16" x="36.5"><tspan id="SvgjsTspan1164" style="text-decoration:;">表示换行符</tspan></tspan></text></g></g><g id="SvgjsG1165"><path id="SvgjsPath1166" d="M438.86788218175525 81.59576022144496L438.86788218175525 69.04788011072247L438.86788218175525 69.04788011072247L438.86788218175525 57" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none"></path></g><g id="SvgjsG1167" transform="translate(129,122)"><path id="SvgjsPath1168" d="M 0 0L 99 0L 99 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffcc99"></path><g id="SvgjsG1169"><text id="SvgjsText1170" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="79px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1171" dy="16" x="49.5"><tspan id="SvgjsTspan1172" style="text-decoration:;">首部字段名：</tspan></tspan></text></g></g><g id="SvgjsG1173" transform="translate(227.5,122)"><path id="SvgjsPath1174" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1175"><text id="SvgjsText1176" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1177" dy="16" x="19"><tspan id="SvgjsTspan1178" style="text-decoration:;">sp</tspan></tspan></text></g></g><g id="SvgjsG1179" transform="translate(264.5,122)"><path id="SvgjsPath1180" d="M 0 0L 80.5 0L 80.5 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffcc99"></path><g id="SvgjsG1181"><text id="SvgjsText1182" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="61px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1183" dy="16" x="40.5"><tspan id="SvgjsTspan1184" style="text-decoration:;">字段值</tspan></tspan></text></g></g><g id="SvgjsG1185" transform="translate(345,122)"><path id="SvgjsPath1186" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1187"><text id="SvgjsText1188" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1189" dy="16" x="19"><tspan id="SvgjsTspan1190" style="text-decoration:;">cr</tspan></tspan></text></g></g><g id="SvgjsG1191" transform="translate(382,122)"><path id="SvgjsPath1192" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1193"><text id="SvgjsText1194" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1195" dy="16" x="19"><tspan id="SvgjsTspan1196" style="text-decoration:;">lf</tspan></tspan></text></g></g><g id="SvgjsG1197" transform="translate(129,194)"><path id="SvgjsPath1198" d="M 0 0L 99 0L 99 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffcc99"></path><g id="SvgjsG1199"><text id="SvgjsText1200" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="79px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1201" dy="16" x="49.5"><tspan id="SvgjsTspan1202" style="text-decoration:;">首部字段名：</tspan></tspan></text></g></g><g id="SvgjsG1203" transform="translate(227.5,194)"><path id="SvgjsPath1204" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1205"><text id="SvgjsText1206" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1207" dy="16" x="19"><tspan id="SvgjsTspan1208" style="text-decoration:;">sp</tspan></tspan></text></g></g><g id="SvgjsG1209" transform="translate(264.5,194)"><path id="SvgjsPath1210" d="M 0 0L 80.5 0L 80.5 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffcc99"></path><g id="SvgjsG1211"><text id="SvgjsText1212" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="61px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1213" dy="16" x="40.5"><tspan id="SvgjsTspan1214" style="text-decoration:;">字段值</tspan></tspan></text></g></g><g id="SvgjsG1215" transform="translate(345,194)"><path id="SvgjsPath1216" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1217"><text id="SvgjsText1218" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1219" dy="16" x="19"><tspan id="SvgjsTspan1220" style="text-decoration:;">cr</tspan></tspan></text></g></g><g id="SvgjsG1221" transform="translate(382,194)"><path id="SvgjsPath1222" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1223"><text id="SvgjsText1224" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1225" dy="16" x="19"><tspan id="SvgjsTspan1226" style="text-decoration:;">lf</tspan></tspan></text></g></g><g id="SvgjsG1227"><path id="SvgjsPath1228" d="M129.26785478522208 160.78107663889006L129.26785478522208 194.7943057454042" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none"></path></g><g id="SvgjsG1229"><path id="SvgjsPath1230" d="M419.5857864376269 161.0857864376269L419.5857864376269 193.9226182617407" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none"></path></g><g id="SvgjsG1231" transform="translate(129,234)"><path id="SvgjsPath1232" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1233"><text id="SvgjsText1234" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1235" dy="16" x="19"><tspan id="SvgjsTspan1236" style="text-decoration:;">cr</tspan></tspan></text></g></g><g id="SvgjsG1237" transform="translate(166,234)"><path id="SvgjsPath1238" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1239"><text id="SvgjsText1240" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1241" dy="16" x="19"><tspan id="SvgjsTspan1242" style="text-decoration:;">lf</tspan></tspan></text></g></g><g id="SvgjsG1243" transform="translate(129,273)"><path id="SvgjsPath1244" d="M 0 0L 345 0L 345 100L 0 100Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffcc99"></path><g id="SvgjsG1245"><text id="SvgjsText1246" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="325px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="39.375" transform="rotate(0)"><tspan id="SvgjsTspan1247" dy="16" x="172.5"><tspan id="SvgjsTspan1248" style="text-decoration:;">数据</tspan></tspan></text></g></g><g id="SvgjsG1249" transform="translate(25,82)"><path id="SvgjsPath1250" d="M 100 0Q 91 0 91 4L 91 16Q 91 20 78 20Q 91 20 91 24L 91 36Q 91 40 100 40" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1251" d="M 0 0L 100 0L 100 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1252"><text id="SvgjsText1253" font-family="微软雅黑" text-anchor="end" font-size="13px" width="73px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1254" dy="16" x="73"><tspan id="SvgjsTspan1255" style="text-decoration:;">请求行</tspan></tspan></text></g></g><g id="SvgjsG1256" transform="translate(25,122)"><path id="SvgjsPath1257" d="M 100 0Q 91 0 91 9L 91 47Q 91 56 78 56Q 91 56 91 65L 91 103Q 91 112 100 112" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1258" d="M 0 0L 100 0L 100 112L 0 112Z" stroke="none" fill="none"></path><g id="SvgjsG1259"><text id="SvgjsText1260" font-family="微软雅黑" text-anchor="end" font-size="13px" width="73px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="45.375" transform="rotate(0)"><tspan id="SvgjsTspan1261" dy="16" x="73"><tspan id="SvgjsTspan1262" style="text-decoration:;">消息头</tspan></tspan></text></g></g><g id="SvgjsG1263" transform="translate(25,274)"><path id="SvgjsPath1264" d="M 100 0Q 91 0 91 9L 91 40Q 91 49 78 49Q 91 49 91 58L 91 89Q 91 98 100 98" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1265" d="M 0 0L 100 0L 100 98L 0 98Z" stroke="none" fill="none"></path><g id="SvgjsG1266"><text id="SvgjsText1267" font-family="微软雅黑" text-anchor="end" font-size="13px" width="73px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="38.375" transform="rotate(0)"><tspan id="SvgjsTspan1268" dy="16" x="73"><tspan id="SvgjsTspan1269" style="text-decoration:;">消息体</tspan></tspan></text></g></g><g id="SvgjsG1270" transform="translate(495,194)"><path id="SvgjsPath1271" d="M 0 13.200000000000001L 67 13.200000000000001L 67 0L 87 20L 67 40L 67 26.8L 0 26.8L 0 13.200000000000001Z" stroke-dasharray="3,4" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#cce5ff"></path><g id="SvgjsG1272"><text id="SvgjsText1273" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="87px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375000000000002" transform="rotate(0)"></text></g></g><g id="SvgjsG1274" transform="translate(603,25)"><path id="SvgjsPath1275" d="M 0 0L 206 0L 206 347L 0 347Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1276"><text id="SvgjsText1277" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="186px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="162.875" transform="rotate(0)"></text></g></g><g id="SvgjsG1278" transform="translate(646,46)"><path id="SvgjsPath1279" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1280"><text id="SvgjsText1281" font-family="微软雅黑" text-anchor="start" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="150%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-3.75" transform="rotate(0)"><tspan id="SvgjsTspan1282" dy="19" x="0"><tspan id="SvgjsTspan1283" style="text-decoration:;">GET 请求报文，</tspan></tspan><tspan id="SvgjsTspan1284" dy="19" x="0"><tspan id="SvgjsTspan1285" style="text-decoration:;">消息体数据为空</tspan></tspan></text></g></g><g id="SvgjsG1286" transform="translate(624.5,92)"><path id="SvgjsPath1287" d="M 0 0L 163 0L 163 57L 0 57Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#cce5ff"></path><g id="SvgjsG1288"><text id="SvgjsText1289" font-family="微软雅黑" text-anchor="start" font-size="13px" width="143px" fill="#323232" font-weight="400" align="middle" lineHeight="150%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.75" transform="rotate(0)"><tspan id="SvgjsTspan1290" dy="19" x="10"><tspan id="SvgjsTspan1291" style="text-decoration:;">GET / HTTP/1.1</tspan></tspan><tspan id="SvgjsTspan1292" dy="19" x="10"><tspan id="SvgjsTspan1293" style="text-decoration:;">Accept: */*</tspan></tspan></text></g></g><g id="SvgjsG1294" transform="translate(651,177)"><path id="SvgjsPath1295" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1296"><text id="SvgjsText1297" font-family="微软雅黑" text-anchor="start" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="150%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="5.75" transform="rotate(0)"><tspan id="SvgjsTspan1298" dy="19" x="0"><tspan id="SvgjsTspan1299" style="text-decoration:;">POST 请求报文</tspan></tspan></text></g></g><g id="SvgjsG1300" transform="translate(624.5,214)"><path id="SvgjsPath1301" d="M 0 0L 163 0L 163 134L 0 134Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#cce5ff"></path><g id="SvgjsG1302"><text id="SvgjsText1303" font-family="微软雅黑" text-anchor="start" font-size="13px" width="143px" fill="#323232" font-weight="400" align="middle" lineHeight="150%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.25" transform="rotate(0)"><tspan id="SvgjsTspan1304" dy="19" x="10"><tspan id="SvgjsTspan1305" style="text-decoration:;">POST /login HTTP/1.1</tspan></tspan><tspan id="SvgjsTspan1306" dy="19" x="10"><tspan id="SvgjsTspan1307" style="text-decoration:;">Accept: */*</tspan></tspan><tspan id="SvgjsTspan1308" dy="19" x="10"><tspan id="SvgjsTspan1309" style="text-decoration:;">{</tspan></tspan><tspan id="SvgjsTspan1310" dy="19" x="10"><tspan id="SvgjsTspan1311" style="text-decoration:;">    "name": "admin",</tspan></tspan><tspan id="SvgjsTspan1312" dy="19" x="10"><tspan id="SvgjsTspan1313" style="text-decoration:;">    "password": "******"</tspan></tspan><tspan id="SvgjsTspan1314" dy="19" x="10"><tspan id="SvgjsTspan1315" style="text-decoration:;">}</tspan></tspan></text></g></g></svg>
  <p style="text-align: center; color: #888;">（请求报文）</p>
</div>

<div style="text-align: center;">
  <svg id="SvgjsSvg1316" width="833.5" height="398" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1317"></defs><g id="SvgjsG1318" transform="translate(129,82)"><path id="SvgjsPath1319" d="M 0 0L 67 0L 67 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffcc99"></path><g id="SvgjsG1320"><text id="SvgjsText1321" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="47px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1322" dy="16" x="33.5"><tspan id="SvgjsTspan1323" style="text-decoration:;">版本</tspan></tspan></text></g></g><g id="SvgjsG1324" transform="translate(195,82)"><path id="SvgjsPath1325" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1326"><text id="SvgjsText1327" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1328" dy="16" x="19"><tspan id="SvgjsTspan1329" style="text-decoration:;">sp</tspan></tspan></text></g></g><g id="SvgjsG1330" transform="translate(232,82)"><path id="SvgjsPath1331" d="M 0 0L 67 0L 67 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffcc99"></path><g id="SvgjsG1332"><text id="SvgjsText1333" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="47px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1334" dy="16" x="33.5"><tspan id="SvgjsTspan1335" style="text-decoration:;">状态码</tspan></tspan></text></g></g><g id="SvgjsG1336" transform="translate(297,82)"><path id="SvgjsPath1337" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1338"><text id="SvgjsText1339" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1340" dy="16" x="19"><tspan id="SvgjsTspan1341" style="text-decoration:;">sp</tspan></tspan></text></g></g><g id="SvgjsG1342" transform="translate(335,82)"><path id="SvgjsPath1343" d="M 0 0L 67 0L 67 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffcc99"></path><g id="SvgjsG1344"><text id="SvgjsText1345" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="47px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1346" dy="16" x="33.5"><tspan id="SvgjsTspan1347" style="text-decoration:;">短语</tspan></tspan></text></g></g><g id="SvgjsG1348" transform="translate(399,82)"><path id="SvgjsPath1349" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1350"><text id="SvgjsText1351" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1352" dy="16" x="19"><tspan id="SvgjsTspan1353" style="text-decoration:;">cr</tspan></tspan></text></g></g><g id="SvgjsG1354" transform="translate(436,82)"><path id="SvgjsPath1355" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1356"><text id="SvgjsText1357" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1358" dy="16" x="19"><tspan id="SvgjsTspan1359" style="text-decoration:;">lf</tspan></tspan></text></g></g><g id="SvgjsG1360" transform="translate(177.5,25)"><path id="SvgjsPath1361" d="M 0 0L 73 0L 73 31L 0 31Z" stroke="none" fill="none"></path><g id="SvgjsG1362"><text id="SvgjsText1363" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="73px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.875" transform="rotate(0)"><tspan id="SvgjsTspan1364" dy="16" x="36.5"><tspan id="SvgjsTspan1365" style="text-decoration:;">表示空格</tspan></tspan></text></g></g><g id="SvgjsG1366"><path id="SvgjsPath1367" d="M214 81.5L214 69L214 69L214 57" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none"></path></g><g id="SvgjsG1368" transform="translate(402,25)"><path id="SvgjsPath1369" d="M 0 0L 73 0L 73 31L 0 31Z" stroke="none" fill="none"></path><g id="SvgjsG1370"><text id="SvgjsText1371" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="73px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.875" transform="rotate(0)"><tspan id="SvgjsTspan1372" dy="16" x="36.5"><tspan id="SvgjsTspan1373" style="text-decoration:;">表示换行符</tspan></tspan></text></g></g><g id="SvgjsG1374"><path id="SvgjsPath1375" d="M438.86788218175525 81.59576022144496L438.86788218175525 69.04788011072247L438.86788218175525 69.04788011072247L438.86788218175525 57" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none"></path></g><g id="SvgjsG1376" transform="translate(129,122)"><path id="SvgjsPath1377" d="M 0 0L 99 0L 99 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffcc99"></path><g id="SvgjsG1378"><text id="SvgjsText1379" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="79px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1380" dy="16" x="49.5"><tspan id="SvgjsTspan1381" style="text-decoration:;">首部字段名：</tspan></tspan></text></g></g><g id="SvgjsG1382" transform="translate(227.5,122)"><path id="SvgjsPath1383" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1384"><text id="SvgjsText1385" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1386" dy="16" x="19"><tspan id="SvgjsTspan1387" style="text-decoration:;">sp</tspan></tspan></text></g></g><g id="SvgjsG1388" transform="translate(264.5,122)"><path id="SvgjsPath1389" d="M 0 0L 80.5 0L 80.5 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffcc99"></path><g id="SvgjsG1390"><text id="SvgjsText1391" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="61px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1392" dy="16" x="40.5"><tspan id="SvgjsTspan1393" style="text-decoration:;">字段值</tspan></tspan></text></g></g><g id="SvgjsG1394" transform="translate(345,122)"><path id="SvgjsPath1395" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1396"><text id="SvgjsText1397" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1398" dy="16" x="19"><tspan id="SvgjsTspan1399" style="text-decoration:;">cr</tspan></tspan></text></g></g><g id="SvgjsG1400" transform="translate(382,122)"><path id="SvgjsPath1401" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1402"><text id="SvgjsText1403" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1404" dy="16" x="19"><tspan id="SvgjsTspan1405" style="text-decoration:;">lf</tspan></tspan></text></g></g><g id="SvgjsG1406" transform="translate(129,194)"><path id="SvgjsPath1407" d="M 0 0L 99 0L 99 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffcc99"></path><g id="SvgjsG1408"><text id="SvgjsText1409" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="79px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1410" dy="16" x="49.5"><tspan id="SvgjsTspan1411" style="text-decoration:;">首部字段名：</tspan></tspan></text></g></g><g id="SvgjsG1412" transform="translate(227.5,194)"><path id="SvgjsPath1413" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1414"><text id="SvgjsText1415" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1416" dy="16" x="19"><tspan id="SvgjsTspan1417" style="text-decoration:;">sp</tspan></tspan></text></g></g><g id="SvgjsG1418" transform="translate(264.5,194)"><path id="SvgjsPath1419" d="M 0 0L 80.5 0L 80.5 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffcc99"></path><g id="SvgjsG1420"><text id="SvgjsText1421" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="61px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1422" dy="16" x="40.5"><tspan id="SvgjsTspan1423" style="text-decoration:;">字段值</tspan></tspan></text></g></g><g id="SvgjsG1424" transform="translate(345,194)"><path id="SvgjsPath1425" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1426"><text id="SvgjsText1427" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1428" dy="16" x="19"><tspan id="SvgjsTspan1429" style="text-decoration:;">cr</tspan></tspan></text></g></g><g id="SvgjsG1430" transform="translate(382,194)"><path id="SvgjsPath1431" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1432"><text id="SvgjsText1433" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1434" dy="16" x="19"><tspan id="SvgjsTspan1435" style="text-decoration:;">lf</tspan></tspan></text></g></g><g id="SvgjsG1436"><path id="SvgjsPath1437" d="M129.26785478522208 160.78107663889006L129.26785478522208 194.7943057454042" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none"></path></g><g id="SvgjsG1438"><path id="SvgjsPath1439" d="M419.5857864376269 161.0857864376269L419.5857864376269 193.9226182617407" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none"></path></g><g id="SvgjsG1440" transform="translate(129,234)"><path id="SvgjsPath1441" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1442"><text id="SvgjsText1443" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1444" dy="16" x="19"><tspan id="SvgjsTspan1445" style="text-decoration:;">cr</tspan></tspan></text></g></g><g id="SvgjsG1446" transform="translate(166,234)"><path id="SvgjsPath1447" d="M 0 0L 38 0L 38 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1448"><text id="SvgjsText1449" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1450" dy="16" x="19"><tspan id="SvgjsTspan1451" style="text-decoration:;">lf</tspan></tspan></text></g></g><g id="SvgjsG1452" transform="translate(129,273)"><path id="SvgjsPath1453" d="M 0 0L 345 0L 345 100L 0 100Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#ffcc99"></path><g id="SvgjsG1454"><text id="SvgjsText1455" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="325px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="39.375" transform="rotate(0)"><tspan id="SvgjsTspan1456" dy="16" x="172.5"><tspan id="SvgjsTspan1457" style="text-decoration:;">数据</tspan></tspan></text></g></g><g id="SvgjsG1458" transform="translate(25,82)"><path id="SvgjsPath1459" d="M 100 0Q 91 0 91 4L 91 16Q 91 20 78 20Q 91 20 91 24L 91 36Q 91 40 100 40" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1460" d="M 0 0L 100 0L 100 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1461"><text id="SvgjsText1462" font-family="微软雅黑" text-anchor="end" font-size="13px" width="73px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1463" dy="16" x="73"><tspan id="SvgjsTspan1464" style="text-decoration:;">状态行</tspan></tspan></text></g></g><g id="SvgjsG1465" transform="translate(25,122)"><path id="SvgjsPath1466" d="M 100 0Q 91 0 91 9L 91 47Q 91 56 78 56Q 91 56 91 65L 91 103Q 91 112 100 112" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1467" d="M 0 0L 100 0L 100 112L 0 112Z" stroke="none" fill="none"></path><g id="SvgjsG1468"><text id="SvgjsText1469" font-family="微软雅黑" text-anchor="end" font-size="13px" width="73px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="45.375" transform="rotate(0)"><tspan id="SvgjsTspan1470" dy="16" x="73"><tspan id="SvgjsTspan1471" style="text-decoration:;">消息头</tspan></tspan></text></g></g><g id="SvgjsG1472" transform="translate(25,274)"><path id="SvgjsPath1473" d="M 100 0Q 91 0 91 9L 91 40Q 91 49 78 49Q 91 49 91 58L 91 89Q 91 98 100 98" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1474" d="M 0 0L 100 0L 100 98L 0 98Z" stroke="none" fill="none"></path><g id="SvgjsG1475"><text id="SvgjsText1476" font-family="微软雅黑" text-anchor="end" font-size="13px" width="73px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="38.375" transform="rotate(0)"><tspan id="SvgjsTspan1477" dy="16" x="73"><tspan id="SvgjsTspan1478" style="text-decoration:;">消息体</tspan></tspan></text></g></g><g id="SvgjsG1479" transform="translate(495,194)"><path id="SvgjsPath1480" d="M 0 13.200000000000001L 67 13.200000000000001L 67 0L 87 20L 67 40L 67 26.8L 0 26.8L 0 13.200000000000001Z" stroke-dasharray="3,4" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#cce5ff"></path><g id="SvgjsG1481"><text id="SvgjsText1482" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="87px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375000000000002" transform="rotate(0)"></text></g></g><g id="SvgjsG1483" transform="translate(616.5,117.5)"><path id="SvgjsPath1484" d="M 0 0L 191.5 0L 191.5 193L 0 193Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#cce5ff"></path><g id="SvgjsG1485"><text id="SvgjsText1486" font-family="微软雅黑" text-anchor="start" font-size="13px" width="172px" fill="#323232" font-weight="400" align="middle" lineHeight="150%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="23.75" transform="rotate(0)"><tspan id="SvgjsTspan1487" dy="19" x="10"><tspan id="SvgjsTspan1488" style="text-decoration:;">HTTP/1.1 200 OK</tspan></tspan><tspan id="SvgjsTspan1489" dy="19" x="10"><tspan id="SvgjsTspan1490" style="text-decoration:;">Content-Length: 1024</tspan></tspan><tspan id="SvgjsTspan1491" dy="19" x="10"><tspan id="SvgjsTspan1492" style="text-decoration:;">Content-Type: text/html</tspan></tspan><tspan id="SvgjsTspan1493" dy="19" x="10"><tspan id="SvgjsTspan1494" style="text-decoration:;"> </tspan></tspan><tspan id="SvgjsTspan1495" dy="19" x="10"><tspan id="SvgjsTspan1496" style="text-decoration:;">&lt;html&gt;</tspan></tspan><tspan id="SvgjsTspan1497" dy="19" x="10"><tspan id="SvgjsTspan1498" style="text-decoration:;">...</tspan></tspan><tspan id="SvgjsTspan1499" dy="19" x="10"><tspan id="SvgjsTspan1500" style="text-decoration:;">&lt;/html&gt;</tspan></tspan></text></g></g></svg>
  <p style="text-align: center; color: #888;">（响应报文）</p>
</div>

## 真实地址查询：DNS

通过浏览器解析 URL 并生成 HTTP 消息后，需要委托操作系统将消息发送给 Web 服务器。

但在发送之前，还有一项工作需要完成，那就是**查询服务器域名对应的 IP 地址**，因为委托操作系统发送消息时，必须提供通信对象的 IP 地址。

有一种服务器就专门保存了 Web 服务器域名与 IP 的对应关系，它就是 DNS 服务器。

### 域名的层级关系

DNS 中的域名都是用**句点**来分隔的，比如 `www.server.com`，这里的句点代表了不同层次之间的**界限**。

在域名中，**越靠右**的位置表示其层级**越高**。

::: tip 小贴士
毕竟域名是外国人发明，所以思维和中国人相反，比如说一个城市地点的时候，外国喜欢从小到大的方式顺序说起（如 XX 街道 XX 区 XX 市 XX 省），而中国则喜欢从大到小的顺序（如 XX 省 XX 市 XX 区 XX 街道）。
:::

实际上域名最后还有一个点，比如 `www.server.com.`，这个最后的一个点代表根域名。

也就是，`.` 根域是在最顶层，它的下一层就是 `.com` 顶级域，再下面是 `server.com`。

所以域名的层级关系类似一个树状结构：

* 根 DNS 服务器（`.`）
* 顶级域 DNS 服务器（`.com`）
* 权威 DNS 服务器（`server.com`）

<div style="text-align: center;">
  <svg id="SvgjsSvg1501" width="537" height="329" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1502"><pattern id="SvgjsPattern1505" x="0" y="0" width="55" height="55" patternUnits="userSpaceOnUse"><image id="SvgjsImage1506" xlink:href="https://iconsapi.com/5ee27816e4b0b788a934aa1e.svg" width="55" height="55" preserveAspectRatio="none" crossOrigin="anonymous" x="0" y="0"></image></pattern><pattern id="SvgjsPattern1515" x="0" y="0" width="55" height="55" patternUnits="userSpaceOnUse"><image id="SvgjsImage1516" xlink:href="https://iconsapi.com/5ee27816e4b0b788a934aa1e.svg" width="55" height="55" preserveAspectRatio="none" crossOrigin="anonymous" x="0" y="0"></image></pattern><pattern id="SvgjsPattern1525" x="0" y="0" width="55" height="55" patternUnits="userSpaceOnUse"><image id="SvgjsImage1526" xlink:href="https://iconsapi.com/5ee27816e4b0b788a934aa1e.svg" width="55" height="55" preserveAspectRatio="none" crossOrigin="anonymous" x="0" y="0"></image></pattern><marker id="SvgjsMarker1535" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1536" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1539" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1540" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><pattern id="SvgjsPattern1543" x="0" y="0" width="55" height="55" patternUnits="userSpaceOnUse"><image id="SvgjsImage1544" xlink:href="https://iconsapi.com/5ee27816e4b0b788a934aa1e.svg" width="55" height="55" preserveAspectRatio="none" crossOrigin="anonymous" x="0" y="0"></image></pattern><marker id="SvgjsMarker1553" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1554" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><pattern id="SvgjsPattern1557" x="0" y="0" width="55" height="55" patternUnits="userSpaceOnUse"><image id="SvgjsImage1558" xlink:href="https://iconsapi.com/5ee27816e4b0b788a934aa1e.svg" width="55" height="55" preserveAspectRatio="none" crossOrigin="anonymous" x="0" y="0"></image></pattern><marker id="SvgjsMarker1567" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1568" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1577" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1578" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1587" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1588" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker></defs><g id="SvgjsG1503" transform="translate(243,25)"><path id="SvgjsPath1504" d="M 0 0L 55 0L 55 55L 0 55Z" stroke="none" fill="url(#SvgjsPattern1505)" opacity="1"></path></g><g id="SvgjsG1507" transform="translate(246,81)"><path id="SvgjsPath1508" d="M 0 0L 49 0L 49 39L 0 39Z" stroke="none" fill="none"></path><g id="SvgjsG1509"><text id="SvgjsText1510" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="49px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="5.5" transform="rotate(0)"><tspan id="SvgjsTspan1511" dy="20" x="24.5"><tspan id="SvgjsTspan1512" style="text-decoration:;">根域</tspan></tspan></text></g></g><g id="SvgjsG1513" transform="translate(129,115)"><path id="SvgjsPath1514" d="M 0 0L 55 0L 55 55L 0 55Z" stroke="none" fill="url(#SvgjsPattern1515)" opacity="1"></path></g><g id="SvgjsG1517" transform="translate(132,171)"><path id="SvgjsPath1518" d="M 0 0L 49 0L 49 39L 0 39Z" stroke="none" fill="none"></path><g id="SvgjsG1519"><text id="SvgjsText1520" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="49px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="5.5" transform="rotate(0)"><tspan id="SvgjsTspan1521" dy="20" x="24.5"><tspan id="SvgjsTspan1522" style="text-decoration:;">com</tspan></tspan></text></g></g><g id="SvgjsG1523" transform="translate(353,115)"><path id="SvgjsPath1524" d="M 0 0L 55 0L 55 55L 0 55Z" stroke="none" fill="url(#SvgjsPattern1525)" opacity="1"></path></g><g id="SvgjsG1527" transform="translate(356,171)"><path id="SvgjsPath1528" d="M 0 0L 49 0L 49 39L 0 39Z" stroke="none" fill="none"></path><g id="SvgjsG1529"><text id="SvgjsText1530" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="49px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="5.5" transform="rotate(0)"><tspan id="SvgjsTspan1531" dy="20" x="24.5"><tspan id="SvgjsTspan1532" style="text-decoration:;">cn</tspan></tspan></text></g></g><g id="SvgjsG1533"><path id="SvgjsPath1534" d="M242 52.5L156.5 52.5L156.5 111.4" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1535)"></path></g><g id="SvgjsG1537"><path id="SvgjsPath1538" d="M299 52.5L380.5 52.5L380.5 111.4" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1539)"></path></g><g id="SvgjsG1541" transform="translate(44,210)"><path id="SvgjsPath1542" d="M 0 0L 55 0L 55 55L 0 55Z" stroke="none" fill="url(#SvgjsPattern1543)" opacity="1"></path></g><g id="SvgjsG1545" transform="translate(25,266)"><path id="SvgjsPath1546" d="M 0 0L 96 0L 96 38L 0 38Z" stroke="none" fill="none"></path><g id="SvgjsG1547"><text id="SvgjsText1548" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="96px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="5" transform="rotate(0)"><tspan id="SvgjsTspan1549" dy="20" x="48"><tspan id="SvgjsTspan1550" style="text-decoration:;">server.com</tspan></tspan></text></g></g><g id="SvgjsG1551"><path id="SvgjsPath1552" d="M128 142.5L71.5 142.5L71.5 206.4" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1553)"></path></g><g id="SvgjsG1555" transform="translate(435,210)"><path id="SvgjsPath1556" d="M 0 0L 55 0L 55 55L 0 55Z" stroke="none" fill="url(#SvgjsPattern1557)" opacity="1"></path></g><g id="SvgjsG1559" transform="translate(416,266)"><path id="SvgjsPath1560" d="M 0 0L 96 0L 96 38L 0 38Z" stroke="none" fill="none"></path><g id="SvgjsG1561"><text id="SvgjsText1562" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="96px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="5" transform="rotate(0)"><tspan id="SvgjsTspan1563" dy="20" x="48"><tspan id="SvgjsTspan1564" style="text-decoration:;">google.cn</tspan></tspan></text></g></g><g id="SvgjsG1565"><path id="SvgjsPath1566" d="M409 142.5L462.5 142.5L462.5 206.4" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1567)"></path></g><g id="SvgjsG1569" transform="translate(204,196)"><path id="SvgjsPath1570" d="M 0 0L 49 0L 49 39L 0 39Z" stroke="none" fill="none"></path><g id="SvgjsG1571"><text id="SvgjsText1572" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="49px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="5.5" transform="rotate(0)"><tspan id="SvgjsTspan1573" dy="20" x="24.5"><tspan id="SvgjsTspan1574" style="text-decoration:;">....</tspan></tspan></text></g></g><g id="SvgjsG1575"><path id="SvgjsPath1576" d="M185 142.5L228.5 142.5L228.5 192.4" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1577)"></path></g><g id="SvgjsG1579" transform="translate(276,196)"><path id="SvgjsPath1580" d="M 0 0L 49 0L 49 39L 0 39Z" stroke="none" fill="none"></path><g id="SvgjsG1581"><text id="SvgjsText1582" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="49px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="5.5" transform="rotate(0)"><tspan id="SvgjsTspan1583" dy="20" x="24.5"><tspan id="SvgjsTspan1584" style="text-decoration:;">....</tspan></tspan></text></g></g><g id="SvgjsG1585"><path id="SvgjsPath1586" d="M352 142.5L300.5 142.5L300.5 192.4" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1587)"></path></g></svg>
  <p style="text-align: center; color: #888;">（域名层级关系）</p>
</div>

根域的 DNS 服务器信息保存在互联网中所有的 DNS 服务器中。

这样一来，任何 DNS 服务器就都可以找到并访问根域 DNS 服务器了。

因此，客户端只要能够找到任意一台 DNS 服务器，就可以通过它找到根域 DNS 服务器，然后再一路顺藤摸瓜找到位于下层的某台目标 DNS 服务器。

### 域名解析的工作流程

1. 客户端首先会发出一个 DNS 请求，问 `www.server.com` 的 IP 是啥，并发给本地 DNS 服务器（也就是客户端的 TCP/IP 设置中填写的 DNS 服务器地址）。
2. 本地域名服务器收到客户端的请求后，如果缓存里的表格能找到 `www.server.com`，则它直接返回 IP 地址。如果没有，本地 DNS 会去问它的根域名服务器。根域名服务器是最高层次的，它不直接用于域名解析，但能指明一条道路。
3. 根 DNS 收到来自本地 DNS 的请求后，发现后置是 `.com`，于是将 `.com` 顶级域名服务器地址返回给它。
4. 本地 DNS 收到顶级域名服务器的地址后，发起请求询问 `www.server.com` 的 IP 地址。
5. 顶级域名服务器将负责 `www.server.com` 区域的权威 DNS 服务器的地址告诉本地 DNS。
6. 本地 DNS 于是转向问权威 DNS 服务器：`www.server.com` 对应的 IP 是什么。`server.com` 的权威 DNS 服务器，它是域名解析结果的原出处。为啥叫权威呢？就是我的域名我做主。
7. 权威 DNS 服务器查询后将对应的 IP 地址 `x.x.x.x` 告诉本地 DNS。
8. 本地 DNS 再将 IP 地址返回客户端，客户端和目标建立连接。

至此，我们完成了 DNS 的解析过程。整个过程就和我们日常生活中找人问路的过程类似，**只指路不带路**。

### 域名的缓存

并不是每次解析域名都要经过那么多步骤的。

浏览器会先看自身有没有对这个域名的缓存，如果有，就直接返回，如果没有，就去问操作系统，操作系统也会去看自己的缓存，如果有，就直接返回，如果没有，再去 hosts 文件看，也没有，才会去问「本地 DNS 服务器」。

## 传输工作负责人：协议栈

通过 DNS 获取到 IP 后，就可以把 HTTP 的传输工作交给操作系统中的**协议栈**。

协议栈的内部分为几个部分，分别承担不同的工作。上下关系是有一定的规则的，上面的部分会向下面的部分委托工作，下面的部分收到委托的工作并执行。

<div style="text-align: center;">
  <svg id="SvgjsSvg1007" width="603" height="568" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1007"><pattern id="SvgjsPattern1118" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse"><image id="SvgjsImage1119" xlink:href="https://iconsapi.com/5ee268b1e4b0b788a9338b53.svg" width="100" height="100" preserveAspectRatio="none" crossOrigin="anonymous" x="0" y="0"></image></pattern></defs><g id="SvgjsG1008" transform="translate(125,25)"><path id="SvgjsPath1009" d="M 0 0L 348 0L 348 96L 0 96Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1010"><text id="SvgjsText1011" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="328px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="37.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1012" transform="translate(153,72)"><path id="SvgjsPath1013" d="M 0 0L 292 0L 292 36L 0 36Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#cce5ff"></path><g id="SvgjsG1014"><text id="SvgjsText1015" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="272px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.375" transform="rotate(0)"><tspan id="SvgjsTspan1016" dy="16" x="146"><tspan id="SvgjsTspan1017" style="text-decoration:;">Socket 库</tspan></tspan></text></g></g><g id="SvgjsG1018" transform="translate(178,29)"><path id="SvgjsPath1019" d="M 0 0L 231 0L 231 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1020"><text id="SvgjsText1021" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="231px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.875" transform="rotate(0)"><tspan id="SvgjsTspan1022" dy="16" x="115.5"><tspan id="SvgjsTspan1023" style="text-decoration:;">网络应用程序</tspan></tspan><tspan id="SvgjsTspan1024" dy="16" x="115.5"><tspan id="SvgjsTspan1025" style="text-decoration:;">（浏览器、Web 服务器）</tspan></tspan></text></g></g><g id="SvgjsG1026" transform="translate(125,149)"><path id="SvgjsPath1027" d="M 0 0L 348 0L 348 193L 0 193Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1028"><text id="SvgjsText1029" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="328px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="85.875" transform="rotate(0)"></text></g></g><g id="SvgjsG1030" transform="translate(153,246)"><path id="SvgjsPath1031" d="M 0 0L 292 0L 292 81L 0 81Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#cce5ff"></path><g id="SvgjsG1032"><text id="SvgjsText1033" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="272px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="21.375" transform="rotate(0)"><tspan id="SvgjsTspan1034" dy="16" x="146"><tspan id="SvgjsTspan1035" style="text-decoration:;">IP</tspan></tspan><tspan id="SvgjsTspan1036" dy="16" x="146"><tspan id="SvgjsTspan1037" style="text-decoration:;">（传送网络包、确定路由）</tspan></tspan></text></g></g><g id="SvgjsG1038" transform="translate(178,147)"><path id="SvgjsPath1039" d="M 0 0L 231 0L 231 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1040"><text id="SvgjsText1041" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="231px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1042" dy="16" x="115.5"><tspan id="SvgjsTspan1043" style="text-decoration:;">协议栈</tspan></tspan></text></g></g><g id="SvgjsG1044" transform="translate(153,184)"><path id="SvgjsPath1045" d="M 0 0L 118 0L 118 49L 0 49Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#cce5ff"></path><g id="SvgjsG1046"><text id="SvgjsText1047" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="98px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="5.375" transform="rotate(0)"><tspan id="SvgjsTspan1048" dy="16" x="59"><tspan id="SvgjsTspan1049" style="text-decoration:;">TCP</tspan></tspan><tspan id="SvgjsTspan1050" dy="16" x="59"><tspan id="SvgjsTspan1051" style="text-decoration:;">（需要连接）</tspan></tspan></text></g></g><g id="SvgjsG1052" transform="translate(327,184)"><path id="SvgjsPath1053" d="M 0 0L 118 0L 118 49L 0 49Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#cce5ff"></path><g id="SvgjsG1054"><text id="SvgjsText1055" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="98px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="5.375" transform="rotate(0)"><tspan id="SvgjsTspan1056" dy="16" x="59"><tspan id="SvgjsTspan1057" style="text-decoration:;">UDP</tspan></tspan><tspan id="SvgjsTspan1058" dy="16" x="59"><tspan id="SvgjsTspan1059" style="text-decoration:;font-size: inherit;">（不需要连接）</tspan></tspan></text></g></g><g id="SvgjsG1060" transform="translate(164,257)"><path id="SvgjsPath1061" d="M 0 0L 54 0L 54 24L 0 24Z" stroke-dasharray="10,6" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#fff9c4"></path><g id="SvgjsG1062"><text id="SvgjsText1063" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="34px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.375" transform="rotate(0)"><tspan id="SvgjsTspan1064" dy="16" x="27"><tspan id="SvgjsTspan1065" style="text-decoration:;">ICMP</tspan></tspan></text></g></g><g id="SvgjsG1066" transform="translate(378,289.5)"><path id="SvgjsPath1067" d="M 0 0L 54 0L 54 24L 0 24Z" stroke-dasharray="10,6" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#fff9c4"></path><g id="SvgjsG1068"><text id="SvgjsText1069" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="34px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.375" transform="rotate(0)"><tspan id="SvgjsTspan1070" dy="16" x="27"><tspan id="SvgjsTspan1071" style="text-decoration:;">ARP</tspan></tspan></text></g></g><g id="SvgjsG1072" transform="translate(125,370)"><path id="SvgjsPath1073" d="M 0 0L 348 0L 348 45L 0 45Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#faf7ed"></path><g id="SvgjsG1074"><text id="SvgjsText1075" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="328px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="3.375" transform="rotate(0)"><tspan id="SvgjsTspan1076" dy="16" x="174"><tspan id="SvgjsTspan1077" style="text-decoration:;">网卡驱动程序</tspan></tspan><tspan id="SvgjsTspan1078" dy="16" x="174"><tspan id="SvgjsTspan1079" style="text-decoration:;">（控制网卡）</tspan></tspan></text></g></g><g id="SvgjsG1080" transform="translate(125,443)"><path id="SvgjsPath1081" d="M 0 0L 348 0L 348 45L 0 45Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#efefef"></path><g id="SvgjsG1082"><text id="SvgjsText1083" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="328px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="11.875" transform="rotate(0)"><tspan id="SvgjsTspan1084" dy="16" x="174"><tspan id="SvgjsTspan1085" style="text-decoration:;">物理硬件网卡</tspan></tspan></text></g></g><g id="SvgjsG1086"><path id="SvgjsPath1087" d="M26 135L297 135L297 135L568 135" stroke-dasharray="8,5" stroke="#323232" stroke-width="1" fill="none"></path></g><g id="SvgjsG1088"><path id="SvgjsPath1089" d="M26 355L297 355L297 355L568 355" stroke-dasharray="8,5" stroke="#323232" stroke-width="1" fill="none"></path></g><g id="SvgjsG1090"><path id="SvgjsPath1091" d="M25 430L296 430L296 430L567 430" stroke-dasharray="8,5" stroke="#323232" stroke-width="1" fill="none"></path></g><g id="SvgjsG1092" transform="translate(26,25)"><path id="SvgjsPath1093" d="M 0 0L 76 0L 76 31L 0 31Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#fff176"></path><g id="SvgjsG1094"><text id="SvgjsText1095" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="56px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.875" transform="rotate(0)"><tspan id="SvgjsTspan1096" dy="16" x="38"><tspan id="SvgjsTspan1097" style="text-decoration:;">应用程序</tspan></tspan></text></g></g><g id="SvgjsG1098" transform="translate(26,149)"><path id="SvgjsPath1099" d="M 0 0L 76 0L 76 31L 0 31Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#fff176"></path><g id="SvgjsG1100"><text id="SvgjsText1101" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="56px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.875" transform="rotate(0)"><tspan id="SvgjsTspan1102" dy="16" x="38"><tspan id="SvgjsTspan1103" style="text-decoration:;">操作系统</tspan></tspan></text></g></g><g id="SvgjsG1104" transform="translate(26,370)"><path id="SvgjsPath1105" d="M 0 0L 76 0L 76 31L 0 31Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#fff176"></path><g id="SvgjsG1106"><text id="SvgjsText1107" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="56px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.875" transform="rotate(0)"><tspan id="SvgjsTspan1108" dy="16" x="38"><tspan id="SvgjsTspan1109" style="text-decoration:;">驱动程序</tspan></tspan></text></g></g><g id="SvgjsG1110" transform="translate(26,443)"><path id="SvgjsPath1111" d="M 0 0L 76 0L 76 31L 0 31Z" stroke="rgba(50,50,50,1)" stroke-width="1" fill-opacity="1" fill="#fff176"></path><g id="SvgjsG1112"><text id="SvgjsText1113" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="56px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.875" transform="rotate(0)"><tspan id="SvgjsTspan1114" dy="16" x="38"><tspan id="SvgjsTspan1115" style="text-decoration:;">硬件</tspan></tspan></text></g></g><g id="SvgjsG1116" transform="translate(478,443)"><path id="SvgjsPath1117" d="M 0 0L 100 0L 100 100L 0 100Z" stroke="none" fill="url(#SvgjsPattern1118)" opacity="1"></path></g></svg>
  <p style="text-align: center; color: #888;">（协议栈工作模式）</p>
</div>

应用程序（浏览器）通过调用 Socket 库，来委托协议栈工作。协议栈的上半部分有两块，分别是负责收发数据的 TCP 和 UDP 协议，这两个传输协议会接受应用层的委托执行收发数据的操作。

协议栈的下面一半是用 IP 协议控制网络包收发操作，在互联网上传数据时，数据会被切分成一块块的网络包，而将网络包发送给对方的操作就是由 IP 负责的。

此外 IP 中还包括 `ICMP` 协议和 `ARP` 协议：

* `ICMP` 用于告知网络包传送过程中产生的错误以及各种控制信息。
* `ARP` 用于根据 IP 地址查询相应的以太网 MAC 地址。

IP 下面的网卡驱动程序负责控制网卡硬件，而最下面的网卡则负责完成实际的收发操作，也就是对网线中的信号执行发送和接收操作。

## 可靠传输：TCP

HTTP 是基于 TCP 协议传输的，所以在这先回顾下 TCP 协议。

### TCP 报文头部

TCP 报文头部的格式：

<div style="text-align: center;">
  <svg id="SvgjsSvg1008" width="602" height="367.828125" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1007"></defs><g id="SvgjsG1008" transform="translate(25,25)"><path id="SvgjsPath1009" d="M0 0L273.48885 0L273.48885 42.60671677473421 L0 42.60671677473421Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1010" d="M273.48885 0L551.5 0L551.5 42.60671677473421 L273.48885 42.60671677473421Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1011"><text id="SvgjsText1012" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="274px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="10.678358387367105" transform="rotate(0)"><tspan id="SvgjsTspan1013" dy="16" x="137"><tspan id="SvgjsTspan1014" style="text-decoration:;">源端口号（16 位）</tspan></tspan></text></g><g id="SvgjsG1015"><text id="SvgjsText1016" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="279px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="10.678358387367105" transform="rotate(0)"><tspan id="SvgjsTspan1017" dy="16" x="412.98885"><tspan id="SvgjsTspan1018" style="text-decoration:;">目的端口号（16 位）</tspan></tspan></text></g></g><g id="SvgjsG1019" transform="translate(25,274.82925316042525)"><path id="SvgjsPath1020" d="M0 0L551.5 0L551.5 68.17074683957473 L0 68.17074683957473Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1021"><text id="SvgjsText1022" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="552px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="23.460373419787366" transform="rotate(0)"><tspan id="SvgjsTspan1023" dy="16" x="276"><tspan id="SvgjsTspan1024" style="text-decoration:;">数据</tspan></tspan></text></g></g><g id="SvgjsG1025" transform="translate(25,66.58415492201368)"><path id="SvgjsPath1026" d="M0 0L551.5 0L551.5 42.691930533347126 L0 42.691930533347126Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1027" d="M0 42.691930533347126L551.5 42.691930533347126L551.5 85.38386106669425 L0 85.38386106669425Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1028"><text id="SvgjsText1029" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="552px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="10.720965266673563" transform="rotate(0)"><tspan id="SvgjsTspan1030" dy="16" x="276"><tspan id="SvgjsTspan1031" style="text-decoration:;">序号（32 位）</tspan></tspan></text></g><g id="SvgjsG1032"><text id="SvgjsText1033" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="552px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="53.41289580002069" transform="rotate(0)"><tspan id="SvgjsTspan1034" dy="16" x="276"><tspan id="SvgjsTspan1035" style="text-decoration:;">确认序号（32 位）</tspan></tspan></text></g></g><g id="SvgjsG1036" transform="translate(25,152.04496241894935)"><path id="SvgjsPath1037" d="M0 0L83.60740000000001 0L83.60740000000001 42.60671677473421 L0 42.60671677473421Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1038" d="M83.60740000000001 0L161.42405000000002 0L161.42405000000002 42.60671677473421 L83.60740000000001 42.60671677473421Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1039" d="M161.36890000000002 0L180.17505000000003 0L180.17505000000003 42.60671677473421 L161.36890000000002 42.60671677473421Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1040" d="M180.17505 0L197.93335 0L197.93335 42.60671677473421 L180.17505 42.60671677473421Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1041" d="M197.9885 0L217.67704999999998 0L217.67704999999998 42.60671677473421 L197.9885 42.60671677473421Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1042" d="M217.67705 0L237.08985 0L237.08985 42.60671677473421 L217.67705 42.60671677473421Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1043" d="M237.08985 0L256.61295 0L256.61295 42.60671677473421 L237.08985 42.60671677473421Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1044" d="M256.61295 0L274.86760000000004 0L274.86760000000004 42.60671677473421 L256.61295 42.60671677473421Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1045" d="M274.92275 0L551.5 0L551.5 42.60671677473421 L274.92275 42.60671677473421Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1046"><text id="SvgjsText1047" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="84px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.178358387367105" transform="rotate(0)"><tspan id="SvgjsTspan1048" dy="16" x="42"><tspan id="SvgjsTspan1049" style="text-decoration:;">首部长度</tspan></tspan><tspan id="SvgjsTspan1050" dy="16" x="42"><tspan id="SvgjsTspan1051" style="text-decoration:;">（4 位）</tspan></tspan></text></g><g id="SvgjsG1052"><text id="SvgjsText1053" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="78px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="10.678358387367105" transform="rotate(0)"><tspan id="SvgjsTspan1054" dy="16" x="122.60740000000001"><tspan id="SvgjsTspan1055" style="text-decoration:;">保留（6 位）</tspan></tspan></text></g><g id="SvgjsG1056"><text id="SvgjsText1057" font-family="微软雅黑" text-anchor="middle" font-size="12px" width="19px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="12px" weight="400" font-style="" opacity="1" y="-3.696641612632895" transform="rotate(0)"><tspan id="SvgjsTspan1058" dy="15" x="170.86890000000002"><tspan id="SvgjsTspan1059" style="text-decoration:;">U</tspan></tspan><tspan id="SvgjsTspan1060" dy="15" x="170.86890000000002"><tspan id="SvgjsTspan1061" style="text-decoration:;font-size: inherit;">R</tspan></tspan><tspan id="SvgjsTspan1062" dy="15" x="170.86890000000002"><tspan id="SvgjsTspan1063" style="text-decoration:;">G</tspan></tspan></text></g><g id="SvgjsG1064"><text id="SvgjsText1065" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-5.821641612632895" transform="rotate(0)"><tspan id="SvgjsTspan1066" dy="16" x="189.17505"><tspan id="SvgjsTspan1067" style="text-decoration:;">A</tspan></tspan><tspan id="SvgjsTspan1068" dy="16" x="189.17505"><tspan id="SvgjsTspan1069" style="text-decoration:;font-size: inherit;">C</tspan></tspan><tspan id="SvgjsTspan1070" dy="16" x="189.17505"><tspan id="SvgjsTspan1071" style="text-decoration:;">K</tspan></tspan></text></g><g id="SvgjsG1072"><text id="SvgjsText1073" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="20px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-5.821641612632895" transform="rotate(0)"><tspan id="SvgjsTspan1074" dy="16" x="207.9885"><tspan id="SvgjsTspan1075" style="text-decoration:;">P</tspan></tspan><tspan id="SvgjsTspan1076" dy="16" x="207.9885"><tspan id="SvgjsTspan1077" style="text-decoration:;">S</tspan></tspan><tspan id="SvgjsTspan1078" dy="16" x="207.9885"><tspan id="SvgjsTspan1079" style="text-decoration:;">H</tspan></tspan></text></g><g id="SvgjsG1080"><text id="SvgjsText1081" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="20px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-5.821641612632895" transform="rotate(0)"><tspan id="SvgjsTspan1082" dy="16" x="227.67705"><tspan id="SvgjsTspan1083" style="text-decoration:;">R</tspan></tspan><tspan id="SvgjsTspan1084" dy="16" x="227.67705"><tspan id="SvgjsTspan1085" style="text-decoration:;">S</tspan></tspan><tspan id="SvgjsTspan1086" dy="16" x="227.67705"><tspan id="SvgjsTspan1087" style="text-decoration:;">T</tspan></tspan></text></g><g id="SvgjsG1088"><text id="SvgjsText1089" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="20px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-5.821641612632895" transform="rotate(0)"><tspan id="SvgjsTspan1090" dy="16" x="247.08985"><tspan id="SvgjsTspan1091" style="text-decoration:;">S</tspan></tspan><tspan id="SvgjsTspan1092" dy="16" x="247.08985"><tspan id="SvgjsTspan1093" style="text-decoration:;">Y</tspan></tspan><tspan id="SvgjsTspan1094" dy="16" x="247.08985"><tspan id="SvgjsTspan1095" style="text-decoration:;">N</tspan></tspan></text></g><g id="SvgjsG1096"><text id="SvgjsText1097" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="19px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-5.821641612632895" transform="rotate(0)"><tspan id="SvgjsTspan1098" dy="16" x="266.11295"><tspan id="SvgjsTspan1099" style="text-decoration:;">F</tspan></tspan><tspan id="SvgjsTspan1100" dy="16" x="266.11295"><tspan id="SvgjsTspan1101" style="text-decoration:;">I</tspan></tspan><tspan id="SvgjsTspan1102" dy="16" x="266.11295"><tspan id="SvgjsTspan1103" style="text-decoration:;">N</tspan></tspan></text></g><g id="SvgjsG1104"><text id="SvgjsText1105" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="277px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="10.678358387367105" transform="rotate(0)"><tspan id="SvgjsTspan1106" dy="16" x="413.42275"><tspan id="SvgjsTspan1107" style="text-decoration:;">窗口大小（16 位）</tspan></tspan></text></g></g><g id="SvgjsG1108" transform="translate(25,194.22561202593621)"><path id="SvgjsPath1109" d="M0 0L275.75 0L275.75 42.60671677473421 L0 42.60671677473421Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1110" d="M275.75 0L551.5 0L551.5 42.60671677473421 L275.75 42.60671677473421Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1111"><text id="SvgjsText1112" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="276px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="10.678358387367105" transform="rotate(0)"><tspan id="SvgjsTspan1113" dy="16" x="138"><tspan id="SvgjsTspan1114" style="text-decoration:;">校验和（16 位）</tspan></tspan></text></g><g id="SvgjsG1115"><text id="SvgjsText1116" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="276px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="10.678358387367105" transform="rotate(0)"><tspan id="SvgjsTspan1117" dy="16" x="413.75"><tspan id="SvgjsTspan1118" style="text-decoration:;">紧急指针（16 位）</tspan></tspan></text></g></g><g id="SvgjsG1119" transform="translate(25,235.98846016822995)"><path id="SvgjsPath1120" d="M0 0L551.5 0L551.5 42.60671677473421 L0 42.60671677473421Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1121"><text id="SvgjsText1122" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="552px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="10.678358387367105" transform="rotate(0)"><tspan id="SvgjsTspan1123" dy="16" x="276"><tspan id="SvgjsTspan1124" style="text-decoration:;">选项</tspan></tspan></text></g></g></svg>
  <p style="text-align: center; color: #888;">（TCP 报文头部的格式）</p>
</div>

首先，**源端口号**和**目标端口号**是不可少的，如果没有这两个端口号，数据就不知道应该发给哪个应用。

接下来有**包的序号**，这个是为了解决包乱序的问题。

还有应该有的是**确认号**，目的是确认发出去对方是否有收到。如果没有收到就应该重新发送，直到送达，这个是为了解决不丢包的问题。

接下来还有一些**状态位**。例如 `SYN` 是发起一个连接，`ACK` 是回复，`RST` 是重新连接，`FIN` 是结束连接等。TCP 是面向连接的，因而双方要维护连接的状态，这些带状态位的包的发送，会引起双方的状态变更。

还有一个重要的就是**窗口大小**。TCP 要做**流量控制**，通信双方各声明一个窗口（缓存大小），标识自己当前能够的处理能力，别发送的太快，撑死我，也别发的太慢，饿死我。

除了做流量控制以外，TCP还会做**拥塞控制**，对于真正的通路堵车不堵车，它无能为力，唯一能做的就是控制自己，也即控制发送的速度。不能改变世界，就改变自己嘛。

### 三次握手

TCP 传输数据之前，要先三次握手建立连接，这个在 [TCP 协议](/basic-skills/network/tcp/#tcp-的三次握手) 这篇文章里写了。

这个所谓的「连接」，只是双方计算机里维护一个状态机，在连接建立的过程中，双方的状态会发生变化。而三次握手目的是**保证双方都有发送和接收的能力**。

### 查看连接状态

TCP 的连接状态查看，在 Linux 可以通过 `netstat -napt` 命令查看。

```bash
[root@study ~]# netstat -napt
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1201/sshd           
```

* `Proto` 列表明是 TCP 协议
* `Local Address` 列是源地址 + 端口
* `Foreign Address` 列是目标地址 + 端口
* `State` 列是连接状态
* `PID/Program name` 列是 Web 服务的进程 PID 和进程名称

### TCP 分割数据

如果 HTTP 请求消息比较长，超过了 `MSS` 的长度，这时 TCP 就需要把 HTTP 的数据拆解成一块块的数据发送，而不是一次性发送所有数据。

<div style="text-align: center;">
  <svg id="SvgjsSvg1196" width="585" height="311" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1197"></defs><g id="SvgjsG1198" transform="translate(25,142)"><path id="SvgjsPath1199" d="M 0 0L 92 0L 92 46L 0 46Z" stroke-dasharray="10,6" stroke="rgba(160,170,184,1)" stroke-width="2" fill-opacity="1" fill="#dce9fc"></path><g id="SvgjsG1200"><text id="SvgjsText1201" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="72px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="3.875" transform="rotate(0)"><tspan id="SvgjsTspan1202" dy="16" x="46"><tspan id="SvgjsTspan1203" style="text-decoration:;">报头/起始帧</tspan></tspan><tspan id="SvgjsTspan1204" dy="16" x="46"><tspan id="SvgjsTspan1205" style="text-decoration:;">分解符</tspan></tspan></text></g></g><g id="SvgjsG1206" transform="translate(127,142)"><path id="SvgjsPath1207" d="M 0 0L 81 0L 81 46L 0 46Z" stroke-dasharray="10,6" stroke="rgba(160,170,184,1)" stroke-width="2" fill-opacity="1" fill="#dce9fc"></path><g id="SvgjsG1208"><text id="SvgjsText1209" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="61px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="12.375" transform="rotate(0)"><tspan id="SvgjsTspan1210" dy="16" x="40.5"><tspan id="SvgjsTspan1211" style="text-decoration:;">MAC 头部</tspan></tspan></text></g></g><g id="SvgjsG1212" transform="translate(218,142)"><path id="SvgjsPath1213" d="M 0 0L 81 0L 81 46L 0 46Z" stroke-dasharray="10,6" stroke="rgba(160,170,184,1)" stroke-width="2" fill-opacity="1" fill="#dce9fc"></path><g id="SvgjsG1214"><text id="SvgjsText1215" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="61px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="12.375" transform="rotate(0)"><tspan id="SvgjsTspan1216" dy="16" x="40.5"><tspan id="SvgjsTspan1217" style="text-decoration:;">IP 头部</tspan></tspan></text></g></g><g id="SvgjsG1218" transform="translate(309,142)"><path id="SvgjsPath1219" d="M 0 0L 81 0L 81 46L 0 46Z" stroke-dasharray="10,6" stroke="rgba(160,170,184,1)" stroke-width="2" fill-opacity="1" fill="#dce9fc"></path><g id="SvgjsG1220"><text id="SvgjsText1221" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="61px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="12.375" transform="rotate(0)"><tspan id="SvgjsTspan1222" dy="16" x="40.5"><tspan id="SvgjsTspan1223" style="text-decoration:;">TCP 头部</tspan></tspan></text></g></g><g id="SvgjsG1224" transform="translate(400,142)"><path id="SvgjsPath1225" d="M 0 0L 92 0L 92 46L 0 46Z" stroke-dasharray="10,6" stroke="rgba(160,170,184,1)" stroke-width="2" fill-opacity="1" fill="#dce9fc"></path><g id="SvgjsG1226"><text id="SvgjsText1227" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="72px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="12.375" transform="rotate(0)"><tspan id="SvgjsTspan1228" dy="16" x="46"><tspan id="SvgjsTspan1229" style="text-decoration:;">数据</tspan></tspan></text></g></g><g id="SvgjsG1230" transform="translate(502,142)"><path id="SvgjsPath1231" d="M 0 0L 58 0L 58 46L 0 46Z" stroke-dasharray="10,6" stroke="rgba(160,170,184,1)" stroke-width="2" fill-opacity="1" fill="#dce9fc"></path><g id="SvgjsG1232"><text id="SvgjsText1233" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="38px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="12.375" transform="rotate(0)"><tspan id="SvgjsTspan1234" dy="16" x="29"><tspan id="SvgjsTspan1235" style="text-decoration:;">FCS</tspan></tspan></text></g></g><g id="SvgjsG1236" transform="translate(25,213)"><path id="SvgjsPath1237" d="M 0 20.5L 20.5 0L 20.5 13.530000000000001L 90 13.530000000000001L 90 27.470000000000002L 20.5 27.470000000000002L 20.5 41L 0 20.5Z" stroke="rgba(255,183,77,1)" stroke-width="1" fill-opacity="1" fill="#fff9c4"></path><g id="SvgjsG1238"><text id="SvgjsText1239" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="90px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.875000000000002" transform="rotate(0)"></text></g></g><g id="SvgjsG1240" transform="translate(106.5,214)"><path id="SvgjsPath1241" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1242"><text id="SvgjsText1243" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1244" dy="16" x="60"><tspan id="SvgjsTspan1245" style="text-decoration:;">网络包传输方向</tspan></tspan></text></g></g><g id="SvgjsG1246" transform="matrix(-1.8369701987210297e-16,-1,1,-1.8369701987210297e-16,220,135.00000000000003)"><path id="SvgjsPath1247" d="M 0 271Q 9 271 9 262L 9 144.5Q 9 135.5 22 135.5Q 9 135.5 9 126.5L 9 9Q 9 0 0 0" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1248" d="M 0 0L 110 0L 110 271L 0 271Z" stroke="none" fill="none"></path><g id="SvgjsG1249"><text id="SvgjsText1250" font-family="微软雅黑" text-anchor="start" font-size="13px" width="83px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="124.875" transform="rotate(0)"></text></g></g><g id="SvgjsG1251" transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,491.99999999999994,192.00000000000006)"><path id="SvgjsPath1252" d="M 0 90.99999999999997Q 9 90.99999999999997 9 81.99999999999997L 9 54.499999999999986Q 9 45.499999999999986 22 45.499999999999986Q 9 45.499999999999986 9 36.499999999999986L 9 9Q 9 0 0 0" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1253" d="M 0 0L 93.99999999999989 0L 93.99999999999989 90.99999999999997L 0 90.99999999999997Z" stroke="none" fill="none"></path><g id="SvgjsG1254"><text id="SvgjsText1255" font-family="微软雅黑" text-anchor="start" font-size="13px" width="67px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="34.874999999999986" transform="rotate(0)"></text></g></g><g id="SvgjsG1256" transform="translate(246.25,70)"><path id="SvgjsPath1257" d="M 0 0L 218.5 0L 218.5 42L 0 42Z" stroke="none" fill="none"></path><g id="SvgjsG1258"><text id="SvgjsText1259" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="219px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.875" transform="rotate(0)"><tspan id="SvgjsTspan1260" dy="16" x="109.5"><tspan id="SvgjsTspan1261" style="text-decoration:;">这部分的最大长度就是 MTU</tspan></tspan><tspan id="SvgjsTspan1262" dy="16" x="109.5"><tspan id="SvgjsTspan1263" style="text-decoration:;">（以太网为 1500 字节）</tspan></tspan></text></g></g><g id="SvgjsG1264" transform="translate(386,218)"><path id="SvgjsPath1265" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1266"><text id="SvgjsText1267" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.875" transform="rotate(0)"><tspan id="SvgjsTspan1268" dy="16" x="60"><tspan id="SvgjsTspan1269" style="text-decoration:;">这部分的最大长度</tspan></tspan><tspan id="SvgjsTspan1270" dy="16" x="60"><tspan id="SvgjsTspan1271" style="text-decoration:;">就是 MSS</tspan></tspan></text></g></g></svg>
  <p style="text-align: center; color: #888;">（网络包示意图）</p>
</div>

* `MTU`：一个网络包的最大长度，以太网中一般为 `1500` 字节。
* `MSS`：除去 IP 和 TCP 头部之后，一个网络包所能容纳的 TCP 数据的最大长度。

数据会被以 `MSS` 的长度为单位进行拆分，拆分出来的每一块数据都会被放进单独的网络包中。也就是在每个被拆分的数据加上 TCP 头信息，然后交给 IP 模块来发送数据。

<div style="text-align: center;">
  <svg id="SvgjsSvg1272" width="750" height="515" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1273"><marker id="SvgjsMarker1332" markerWidth="12" markerHeight="8" refX="9" refY="4" viewBox="0 0 12 8" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1333" d="M0,0 L12,4 L0,8 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1336" markerWidth="12" markerHeight="8" refX="9" refY="4" viewBox="0 0 12 8" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1337" d="M0,0 L12,4 L0,8 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1340" markerWidth="12" markerHeight="8" refX="9" refY="4" viewBox="0 0 12 8" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1341" d="M0,0 L12,4 L0,8 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker></defs><g id="SvgjsG1274" transform="translate(262.25,45)"><path id="SvgjsPath1275" d="M 0 0L 105 0L 105 20L 0 20Z" stroke="rgba(160,170,184,1)" stroke-width="1" fill-opacity="1" fill="#dce9fc"></path><g id="SvgjsG1276"><text id="SvgjsText1277" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="85px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"><tspan id="SvgjsTspan1278" dy="16" x="52.5"><tspan id="SvgjsTspan1279" style="text-decoration:;">应用程序数据</tspan></tspan></text></g></g><g id="SvgjsG1280" transform="translate(280.75,202)"><path id="SvgjsPath1281" d="M 0 0L 99.25 0L 99.25 34.5L 0 34.5Z" stroke-dasharray="10,6" stroke="rgba(160,170,184,1)" stroke-width="2" fill-opacity="1" fill="#dce9fc"></path><g id="SvgjsG1282"><text id="SvgjsText1283" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="80px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.625" transform="rotate(0)"><tspan id="SvgjsTspan1284" dy="16" x="50"><tspan id="SvgjsTspan1285" style="text-decoration:;">数据块 1</tspan></tspan></text></g></g><g id="SvgjsG1286" transform="translate(58,37)"><path id="SvgjsPath1287" d="M 0 18L 18 0L 18 11.88L 154 11.88L 154 24.12L 18 24.12L 18 36L 0 18Z" stroke="rgba(201,132,107,1)" stroke-width="1" fill-opacity="1" fill="#f9cecd"></path><g id="SvgjsG1288"><text id="SvgjsText1289" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="154px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1290" transform="translate(197,202)"><path id="SvgjsPath1291" d="M 0 0L 74.5 0L 74.5 34.5L 0 34.5Z" stroke-dasharray="10,6" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#fff9c4"></path><g id="SvgjsG1292"><text id="SvgjsText1293" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="55px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.625" transform="rotate(0)"><tspan id="SvgjsTspan1294" dy="16" x="37.5"><tspan id="SvgjsTspan1295" style="text-decoration:;">TCP 头部</tspan></tspan></text></g></g><g id="SvgjsG1296" transform="translate(262.25,78)"><path id="SvgjsPath1297" d="M 0 0L 313.75 0L 313.75 56L 0 56Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1298"><text id="SvgjsText1299" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="294px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="17.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1300" transform="translate(271.5,88)"><path id="SvgjsPath1301" d="M 0 0L 99.5 0L 99.5 36L 0 36Z" stroke-dasharray="10,6" stroke="rgba(160,170,184,1)" stroke-width="2" fill-opacity="1" fill="#dce9fc"></path><g id="SvgjsG1302"><text id="SvgjsText1303" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="80px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.375" transform="rotate(0)"><tspan id="SvgjsTspan1304" dy="16" x="50"><tspan id="SvgjsTspan1305" style="text-decoration:;">HTTP 头部</tspan></tspan></text></g></g><g id="SvgjsG1306" transform="translate(385.5,88)"><path id="SvgjsPath1307" d="M 0 0L 181.5 0L 181.5 36L 0 36Z" stroke-dasharray="10,6" stroke="rgba(160,170,184,1)" stroke-width="2" fill-opacity="1" fill="#dce9fc"></path><g id="SvgjsG1308"><text id="SvgjsText1309" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="162px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.375" transform="rotate(0)"><tspan id="SvgjsTspan1310" dy="16" x="91"><tspan id="SvgjsTspan1311" style="text-decoration:;">消息体</tspan></tspan></text></g></g><g id="SvgjsG1312" transform="translate(513.75,202)"><path id="SvgjsPath1313" d="M 0 0L 99.25 0L 99.25 34.5L 0 34.5Z" stroke-dasharray="10,6" stroke="rgba(160,170,184,1)" stroke-width="2" fill-opacity="1" fill="#dce9fc"></path><g id="SvgjsG1314"><text id="SvgjsText1315" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="80px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.625" transform="rotate(0)"><tspan id="SvgjsTspan1316" dy="16" x="50"><tspan id="SvgjsTspan1317" style="text-decoration:;">数据块 2</tspan></tspan></text></g></g><g id="SvgjsG1318" transform="translate(430,202)"><path id="SvgjsPath1319" d="M 0 0L 74.5 0L 74.5 34.5L 0 34.5Z" stroke-dasharray="10,6" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#fff9c4"></path><g id="SvgjsG1320"><text id="SvgjsText1321" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="55px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.625" transform="rotate(0)"><tspan id="SvgjsTspan1322" dy="16" x="37.5"><tspan id="SvgjsTspan1323" style="text-decoration:;">TCP 头部</tspan></tspan></text></g></g><g id="SvgjsG1324" transform="translate(605,199.25)"><path id="SvgjsPath1325" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1326"><text id="SvgjsText1327" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1328" dy="16" x="60"><tspan id="SvgjsTspan1329" style="text-decoration:;">......</tspan></tspan></text></g></g><g id="SvgjsG1330"><path id="SvgjsPath1331" d="M376.4345011078292 134.8247490545333L331.67564745199286 200.1030771745734" stroke-dasharray="3,3" stroke="#323232" stroke-width="1" fill="none" marker-end="url(#SvgjsMarker1332)"></path></g><g id="SvgjsG1334"><path id="SvgjsPath1335" d="M443.87068068789654 134.4918486959665L561.3724344178379 200.86874799927705" stroke-dasharray="3,3" stroke="#323232" stroke-width="1" fill="none" marker-end="url(#SvgjsMarker1336)"></path></g><g id="SvgjsG1338"><path id="SvgjsPath1339" d="M540.8835728999695 133.46829363698382L662.9677823300702 198.1729246349372" stroke-dasharray="3,3" stroke="#323232" stroke-width="1" fill="none" marker-end="url(#SvgjsMarker1340)"></path></g><g id="SvgjsG1342" transform="translate(91,25)"><path id="SvgjsPath1343" d="M 0 0L 98 0L 98 20L 0 20Z" stroke="rgba(201,132,107,1)" stroke-width="1" fill-opacity="1" fill="#f9cecd"></path><g id="SvgjsG1344"><text id="SvgjsText1345" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="78px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"><tspan id="SvgjsTspan1346" dy="16" x="49"><tspan id="SvgjsTspan1347" style="text-decoration:;">网络传输方向</tspan></tspan></text></g></g><g id="SvgjsG1348" transform="translate(115,154)"><path id="SvgjsPath1349" d="M 0 0L 119 0L 119 39L 0 39Z" stroke="rgba(255,183,77,1)" stroke-width="1" fill-opacity="1" fill="#fff9c4"></path><g id="SvgjsG1350"><text id="SvgjsText1351" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="99px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.375" transform="rotate(0)"><tspan id="SvgjsTspan1352" dy="16" x="59.5"><tspan id="SvgjsTspan1353" style="text-decoration:;">TCP 进行拆分，</tspan></tspan><tspan id="SvgjsTspan1354" dy="16" x="59.5"><tspan id="SvgjsTspan1355" style="text-decoration:;">添加头部</tspan></tspan></text></g></g><g id="SvgjsG1356" transform="translate(280.75,304.5)"><path id="SvgjsPath1357" d="M 0 0L 99.25 0L 99.25 34.5L 0 34.5Z" stroke-dasharray="10,6" stroke="rgba(160,170,184,1)" stroke-width="2" fill-opacity="1" fill="#dce9fc"></path><g id="SvgjsG1358"><text id="SvgjsText1359" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="80px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.625" transform="rotate(0)"><tspan id="SvgjsTspan1360" dy="16" x="50"><tspan id="SvgjsTspan1361" style="text-decoration:;">数据块 1</tspan></tspan></text></g></g><g id="SvgjsG1362" transform="translate(197,304.5)"><path id="SvgjsPath1363" d="M 0 0L 74.5 0L 74.5 34.5L 0 34.5Z" stroke-dasharray="10,6" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#fff9c4"></path><g id="SvgjsG1364"><text id="SvgjsText1365" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="55px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.625" transform="rotate(0)"><tspan id="SvgjsTspan1366" dy="16" x="37.5"><tspan id="SvgjsTspan1367" style="text-decoration:;">TCP 头部</tspan></tspan></text></g></g><g id="SvgjsG1368" transform="translate(114.375,304.5)"><path id="SvgjsPath1369" d="M 0 0L 74.5 0L 74.5 34.5L 0 34.5Z" stroke="rgba(255,152,0,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1370"><text id="SvgjsText1371" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="55px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.625" transform="rotate(0)"><tspan id="SvgjsTspan1372" dy="16" x="37.5"><tspan id="SvgjsTspan1373" style="text-decoration:;">IP 头部</tspan></tspan></text></g></g><g id="SvgjsG1374" transform="translate(106.25,274)"><path id="SvgjsPath1375" d="M 0 0L 90.75 0L 90.75 20L 0 20Z" stroke="rgba(255,152,0,1)" stroke-width="1" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1376"><text id="SvgjsText1377" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="71px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"><tspan id="SvgjsTspan1378" dy="16" x="45.5"><tspan id="SvgjsTspan1379" style="text-decoration:;">IP 添加头部</tspan></tspan></text></g></g><g id="SvgjsG1380" transform="translate(25,304.5)"><path id="SvgjsPath1381" d="M 0 0L 81.25 0L 81.25 34.5L 0 34.5Z" stroke="rgba(97,97,97,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1382"><text id="SvgjsText1383" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="62px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.625" transform="rotate(0)"><tspan id="SvgjsTspan1384" dy="16" x="41"><tspan id="SvgjsTspan1385" style="text-decoration:;">MAC 头部</tspan></tspan></text></g></g><g id="SvgjsG1386" transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,379,344)"><path id="SvgjsPath1387" d="M 0 97Q 9 97 9 88L 9 57.5Q 9 48.5 22 48.5Q 9 48.5 9 39.5L 9 9Q 9 0 0 0" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1388" d="M 0 0L 96 0L 96 97L 0 97Z" stroke="none" fill="none"></path><g id="SvgjsG1389"><text id="SvgjsText1390" font-family="微软雅黑" text-anchor="start" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="37.875" transform="rotate(0)"></text></g></g><g id="SvgjsG1391" transform="translate(270.375,357)"><path id="SvgjsPath1392" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1393"><text id="SvgjsText1394" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1395" dy="16" x="60"><tspan id="SvgjsTspan1396" style="text-decoration:;">MSS 长度</tspan></tspan></text></g></g><g id="SvgjsG1397" transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,381,386)"><path id="SvgjsPath1398" d="M 0 267Q 9 267 9 258L 9 142.5Q 9 133.5 22 133.5Q 9 133.5 9 124.5L 9 9Q 9 0 0 0" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1399" d="M 0 0L 104 0L 104 267L 0 267Z" stroke="none" fill="none"></path><g id="SvgjsG1400"><text id="SvgjsText1401" font-family="微软雅黑" text-anchor="start" font-size="13px" width="77px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="122.875" transform="rotate(0)"></text></g></g><g id="SvgjsG1402" transform="translate(188.875,400)"><path id="SvgjsPath1403" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1404"><text id="SvgjsText1405" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1406" dy="16" x="60"><tspan id="SvgjsTspan1407" style="text-decoration:;">MTU 长度</tspan></tspan></text></g></g></svg>
  <p style="text-align: center; color: #888;">（网络包拆分示意图）</p>
</div>

### TCP 报文生成

TCP 协议里面会有两个端口，一个是浏览器监听的端口（通常是随机生成的），一个是 Web 服务器监听的端口（HTTP 默认端口号是 `80`， HTTPS 默认端口号是 `443`）。

在双方建立了连接后，TCP 报文中的数据部分就是存放 HTTP 头部 + 数据，组装好 TCP 报文之后，就需交给下面的网络层处理。

至此，网络包的报文如下图。

<div style="text-align: center;">
  <svg id="SvgjsSvg1267" width="735" height="476.015625" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1268"></defs><g id="SvgjsG1269" transform="translate(151,25.00345152587886)"><path id="SvgjsPath1270" d="M 0 0L 558 0L 558 425.59029847412114L 0 425.59029847412114Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1271"><text id="SvgjsText1272" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="538px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="202.17014923706057" transform="rotate(0)"></text></g></g><g id="SvgjsG1273" transform="translate(151,25.00345152587886)"><path id="SvgjsPath1274" d="M0 0L276.7122 0L276.7122 29.134104634456676 L0 29.134104634456676Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1275" d="M276.7122 0L558 0L558 29.134104634456676 L276.7122 29.134104634456676Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1276"><text id="SvgjsText1277" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="277px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="3.942052317228338" transform="rotate(0)"><tspan id="SvgjsTspan1278" dy="16" x="138.5"><tspan id="SvgjsTspan1279" style="text-decoration:;">源端口号（16 位）</tspan></tspan></text></g><g id="SvgjsG1280"><text id="SvgjsText1281" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="282px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="3.942052317228338" transform="rotate(0)"><tspan id="SvgjsTspan1282" dy="16" x="417.7122"><tspan id="SvgjsTspan1283" style="text-decoration:;">目的端口号（16 位）</tspan></tspan></text></g></g><g id="SvgjsG1284" transform="translate(151,54.34402396513801)"><path id="SvgjsPath1285" d="M0 0L558 0L558 28.449672893661 L0 28.449672893661Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1286" d="M0 28.449672893661L558 28.449672893661L558 56.899345787322 L0 56.899345787322Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1287"><text id="SvgjsText1288" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="558px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="3.5998364468304995" transform="rotate(0)"><tspan id="SvgjsTspan1289" dy="16" x="279"><tspan id="SvgjsTspan1290" style="text-decoration:;">序号（32 位）</tspan></tspan></text></g><g id="SvgjsG1291"><text id="SvgjsText1292" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="558px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="32.0495093404915" transform="rotate(0)"><tspan id="SvgjsTspan1293" dy="16" x="279"><tspan id="SvgjsTspan1294" style="text-decoration:;">确认序号（32 位）</tspan></tspan></text></g></g><g id="SvgjsG1295" transform="translate(151,109.76649526300852)"><path id="SvgjsPath1296" d="M0 0L84.59280000000001 0L84.59280000000001 44.79852618002869 L0 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1297" d="M84.59280000000001 0L163.3266 0L163.3266 44.79852618002869 L84.59280000000001 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1298" d="M163.2708 0L182.29860000000002 0L182.29860000000002 44.79852618002869 L163.2708 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1299" d="M182.2986 0L200.2662 0L200.2662 44.79852618002869 L182.2986 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1300" d="M200.322 0L220.2426 0L220.2426 44.79852618002869 L200.322 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1301" d="M220.2426 0L239.88420000000002 0L239.88420000000002 44.79852618002869 L220.2426 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1302" d="M239.8842 0L259.6374 0L259.6374 44.79852618002869 L239.8842 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1303" d="M259.6374 0L278.10720000000003 0L278.10720000000003 44.79852618002869 L259.6374 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1304" d="M278.163 0L558 0L558 44.79852618002869 L278.163 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1305"><text id="SvgjsText1306" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="85px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="3.274263090014344" transform="rotate(0)"><tspan id="SvgjsTspan1307" dy="16" x="42.5"><tspan id="SvgjsTspan1308" style="text-decoration:;">首部长度</tspan></tspan><tspan id="SvgjsTspan1309" dy="16" x="42.5"><tspan id="SvgjsTspan1310" style="text-decoration:;">（4 位）</tspan></tspan></text></g><g id="SvgjsG1311"><text id="SvgjsText1312" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="79px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="11.774263090014344" transform="rotate(0)"><tspan id="SvgjsTspan1313" dy="16" x="124.09280000000001"><tspan id="SvgjsTspan1314" style="text-decoration:;">保留（6 位）</tspan></tspan></text></g><g id="SvgjsG1315"><text id="SvgjsText1316" font-family="微软雅黑" text-anchor="middle" font-size="12px" width="20px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="12px" weight="400" font-style="" opacity="1" y="-2.600736909985656" transform="rotate(0)"><tspan id="SvgjsTspan1317" dy="15" x="173.2708"><tspan id="SvgjsTspan1318" style="text-decoration:;">U</tspan></tspan><tspan id="SvgjsTspan1319" dy="15" x="173.2708"><tspan id="SvgjsTspan1320" style="text-decoration:;font-size: inherit;">R</tspan></tspan><tspan id="SvgjsTspan1321" dy="15" x="173.2708"><tspan id="SvgjsTspan1322" style="text-decoration:;">G</tspan></tspan></text></g><g id="SvgjsG1323"><text id="SvgjsText1324" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-4.725736909985656" transform="rotate(0)"><tspan id="SvgjsTspan1325" dy="16" x="191.2986"><tspan id="SvgjsTspan1326" style="text-decoration:;">A</tspan></tspan><tspan id="SvgjsTspan1327" dy="16" x="191.2986"><tspan id="SvgjsTspan1328" style="text-decoration:;font-size: inherit;">C</tspan></tspan><tspan id="SvgjsTspan1329" dy="16" x="191.2986"><tspan id="SvgjsTspan1330" style="text-decoration:;">K</tspan></tspan></text></g><g id="SvgjsG1331"><text id="SvgjsText1332" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="20px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-4.725736909985656" transform="rotate(0)"><tspan id="SvgjsTspan1333" dy="16" x="210.322"><tspan id="SvgjsTspan1334" style="text-decoration:;">P</tspan></tspan><tspan id="SvgjsTspan1335" dy="16" x="210.322"><tspan id="SvgjsTspan1336" style="text-decoration:;">S</tspan></tspan><tspan id="SvgjsTspan1337" dy="16" x="210.322"><tspan id="SvgjsTspan1338" style="text-decoration:;">H</tspan></tspan></text></g><g id="SvgjsG1339"><text id="SvgjsText1340" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="20px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-4.725736909985656" transform="rotate(0)"><tspan id="SvgjsTspan1341" dy="16" x="230.2426"><tspan id="SvgjsTspan1342" style="text-decoration:;">R</tspan></tspan><tspan id="SvgjsTspan1343" dy="16" x="230.2426"><tspan id="SvgjsTspan1344" style="text-decoration:;">S</tspan></tspan><tspan id="SvgjsTspan1345" dy="16" x="230.2426"><tspan id="SvgjsTspan1346" style="text-decoration:;">T</tspan></tspan></text></g><g id="SvgjsG1347"><text id="SvgjsText1348" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="20px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-4.725736909985656" transform="rotate(0)"><tspan id="SvgjsTspan1349" dy="16" x="249.8842"><tspan id="SvgjsTspan1350" style="text-decoration:;">S</tspan></tspan><tspan id="SvgjsTspan1351" dy="16" x="249.8842"><tspan id="SvgjsTspan1352" style="text-decoration:;">Y</tspan></tspan><tspan id="SvgjsTspan1353" dy="16" x="249.8842"><tspan id="SvgjsTspan1354" style="text-decoration:;">N</tspan></tspan></text></g><g id="SvgjsG1355"><text id="SvgjsText1356" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="19px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-4.725736909985656" transform="rotate(0)"><tspan id="SvgjsTspan1357" dy="16" x="269.1374"><tspan id="SvgjsTspan1358" style="text-decoration:;">F</tspan></tspan><tspan id="SvgjsTspan1359" dy="16" x="269.1374"><tspan id="SvgjsTspan1360" style="text-decoration:;">I</tspan></tspan><tspan id="SvgjsTspan1361" dy="16" x="269.1374"><tspan id="SvgjsTspan1362" style="text-decoration:;">N</tspan></tspan></text></g><g id="SvgjsG1363"><text id="SvgjsText1364" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="280px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="11.774263090014344" transform="rotate(0)"><tspan id="SvgjsTspan1365" dy="16" x="418.163"><tspan id="SvgjsTspan1366" style="text-decoration:;">窗口大小（16 位）</tspan></tspan></text></g></g><g id="SvgjsG1367" transform="translate(151,154.5650214430372)"><path id="SvgjsPath1368" d="M0 0L279 0L279 25.599157817159252 L0 25.599157817159252Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1369" d="M279 0L558 0L558 25.599157817159252 L279 25.599157817159252Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1370"><text id="SvgjsText1371" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="279px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.174578908579626" transform="rotate(0)"><tspan id="SvgjsTspan1372" dy="16" x="139.5"><tspan id="SvgjsTspan1373" style="text-decoration:;">校验和（16 位）</tspan></tspan></text></g><g id="SvgjsG1374"><text id="SvgjsText1375" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="279px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.174578908579626" transform="rotate(0)"><tspan id="SvgjsTspan1376" dy="16" x="418.5"><tspan id="SvgjsTspan1377" style="text-decoration:;">紧急指针（16 位）</tspan></tspan></text></g></g><g id="SvgjsG1378" transform="translate(151,180.1737297152282)"><path id="SvgjsPath1379" d="M0 0L558 0L558 36.42002028477181 L0 36.42002028477181Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1380"><text id="SvgjsText1381" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="558px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.585010142385904" transform="rotate(0)"><tspan id="SvgjsTspan1382" dy="16" x="279"><tspan id="SvgjsTspan1383" style="text-decoration:;">选项</tspan></tspan></text></g></g><g id="SvgjsG1384" transform="translate(41,25.00345152587886)"><path id="SvgjsPath1385" d="M 106 0Q 97 0 97 9L 97 86.79514923706057Q 97 95.79514923706057 84 95.79514923706057Q 97 95.79514923706057 97 104.79514923706057L 97 182.59029847412114Q 97 191.59029847412114 106 191.59029847412114" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1386" d="M 0 0L 106 0L 106 191.59029847412114L 0 191.59029847412114Z" stroke="none" fill="none"></path><g id="SvgjsG1387"><text id="SvgjsText1388" font-family="微软雅黑" text-anchor="end" font-size="13px" width="79px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="85.17014923706057" transform="rotate(0)"></text></g></g><g id="SvgjsG1389" transform="translate(25,103.59375)"><path id="SvgjsPath1390" d="M 0 0L 89 0L 89 31L 0 31Z" stroke="rgba(132,155,190,1)" stroke-width="2" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1391"><text id="SvgjsText1392" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.875" transform="rotate(0)"><tspan id="SvgjsTspan1393" dy="16" x="44.5"><tspan id="SvgjsTspan1394" style="text-decoration:;">TCP 头部</tspan></tspan></text></g></g><g id="SvgjsG1395" transform="translate(151,216.59375)"><path id="SvgjsPath1396" d="M 0 0L 107.07889125799574 0L 107.07889125799574 35L 0 35Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1397"><text id="SvgjsText1398" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="88px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1399" dy="16" x="54"><tspan id="SvgjsTspan1400" style="text-decoration:;">方法</tspan></tspan></text></g></g><g id="SvgjsG1401" transform="translate(253.1044776119403,216.59375)"><path id="SvgjsPath1402" d="M 0 0L 55.539445628997896 0L 55.539445628997896 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1403"><text id="SvgjsText1404" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="36px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1405" dy="16" x="28"><tspan id="SvgjsTspan1406" style="text-decoration:;">sp</tspan></tspan></text></g></g><g id="SvgjsG1407" transform="translate(310,216.59375)"><path id="SvgjsPath1408" d="M 0 0L 112.10021321961631 0L 112.10021321961631 35L 0 35Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1409"><text id="SvgjsText1410" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="93px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1411" dy="16" x="56.5"><tspan id="SvgjsTspan1412" style="text-decoration:;">URL</tspan></tspan></text></g></g><g id="SvgjsG1413" transform="translate(421.0767590618336,216.59375)"><path id="SvgjsPath1414" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1415"><text id="SvgjsText1416" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1417" dy="16" x="31"><tspan id="SvgjsTspan1418" style="text-decoration:;">sp</tspan></tspan></text></g></g><g id="SvgjsG1419" transform="translate(481.75479744136464,216.59375)"><path id="SvgjsPath1420" d="M 0 0L 107.07889125799574 0L 107.07889125799574 35L 0 35Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1421"><text id="SvgjsText1422" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="88px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1423" dy="16" x="54"><tspan id="SvgjsTspan1424" style="text-decoration:;">版本</tspan></tspan></text></g></g><g id="SvgjsG1425" transform="translate(586.454157782516,216.59375)"><path id="SvgjsPath1426" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1427"><text id="SvgjsText1428" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1429" dy="16" x="31"><tspan id="SvgjsTspan1430" style="text-decoration:;">cr</tspan></tspan></text></g></g><g id="SvgjsG1431" transform="translate(647.132196162047,216.59375)"><path id="SvgjsPath1432" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1433"><text id="SvgjsText1434" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1435" dy="16" x="31"><tspan id="SvgjsTspan1436" style="text-decoration:;">lf</tspan></tspan></text></g></g><g id="SvgjsG1437" transform="translate(151,252.09375)"><path id="SvgjsPath1438" d="M 0 0L 159 0L 159 34L 0 34Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1439"><text id="SvgjsText1440" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="139px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.375" transform="rotate(0)"><tspan id="SvgjsTspan1441" dy="16" x="79.5"><tspan id="SvgjsTspan1442" style="text-decoration:;">首部字段名：</tspan></tspan></text></g></g><g id="SvgjsG1443" transform="translate(308.6439232409382,251.59375)"><path id="SvgjsPath1444" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1445"><text id="SvgjsText1446" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1447" dy="16" x="31"><tspan id="SvgjsTspan1448" style="text-decoration:;">sp</tspan></tspan></text></g></g><g id="SvgjsG1449" transform="translate(372.29850746268653,252.09375)"><path id="SvgjsPath1450" d="M 0 0L 159 0L 159 34L 0 34Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1451"><text id="SvgjsText1452" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="139px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.375" transform="rotate(0)"><tspan id="SvgjsTspan1453" dy="16" x="79.5"><tspan id="SvgjsTspan1454" style="text-decoration:;">字段值</tspan></tspan></text></g></g><g id="SvgjsG1455" transform="translate(529.454157782516,251.59375)"><path id="SvgjsPath1456" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1457"><text id="SvgjsText1458" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1459" dy="16" x="31"><tspan id="SvgjsTspan1460" style="text-decoration:;">cr</tspan></tspan></text></g></g><g id="SvgjsG1461" transform="translate(590.132196162047,251.59375)"><path id="SvgjsPath1462" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1463"><text id="SvgjsText1464" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1465" dy="16" x="31"><tspan id="SvgjsTspan1466" style="text-decoration:;">lf</tspan></tspan></text></g></g><g id="SvgjsG1467" transform="translate(149.6439232409382,321.09375)"><path id="SvgjsPath1468" d="M 0 0L 159 0L 159 34L 0 34Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1469"><text id="SvgjsText1470" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="139px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.375" transform="rotate(0)"><tspan id="SvgjsTspan1471" dy="16" x="79.5"><tspan id="SvgjsTspan1472" style="text-decoration:;">首部字段名：</tspan></tspan></text></g></g><g id="SvgjsG1473" transform="translate(308.6439232409382,320.59375)"><path id="SvgjsPath1474" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1475"><text id="SvgjsText1476" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1477" dy="16" x="31"><tspan id="SvgjsTspan1478" style="text-decoration:;">sp</tspan></tspan></text></g></g><g id="SvgjsG1479" transform="translate(372.29850746268653,321.09375)"><path id="SvgjsPath1480" d="M 0 0L 159 0L 159 34L 0 34Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1481"><text id="SvgjsText1482" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="139px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.375" transform="rotate(0)"><tspan id="SvgjsTspan1483" dy="16" x="79.5"><tspan id="SvgjsTspan1484" style="text-decoration:;">字段值</tspan></tspan></text></g></g><g id="SvgjsG1485" transform="translate(529.454157782516,320.59375)"><path id="SvgjsPath1486" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1487"><text id="SvgjsText1488" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1489" dy="16" x="31"><tspan id="SvgjsTspan1490" style="text-decoration:;">cr</tspan></tspan></text></g></g><g id="SvgjsG1491" transform="translate(590.132196162047,320.59375)"><path id="SvgjsPath1492" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1493"><text id="SvgjsText1494" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1495" dy="16" x="31"><tspan id="SvgjsTspan1496" style="text-decoration:;">lf</tspan></tspan></text></g></g><g id="SvgjsG1497"><path id="SvgjsPath1498" d="M650.426423563649 286.774597955711L650.426423563649 301.1841739778555L650.426423563649 301.1841739778555L650.426423563649 316.59375" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none"></path></g><g id="SvgjsG1499" transform="translate(151,392.0233207398035)"><path id="SvgjsPath1500" d="M 0 0L 559.3560767590618 0L 559.3560767590618 58.57042926019648L 0 58.57042926019648Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1501"><text id="SvgjsText1502" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="540px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="18.66021463009824" transform="rotate(0)"><tspan id="SvgjsTspan1503" dy="16" x="280"><tspan id="SvgjsTspan1504" style="text-decoration:;">数据</tspan></tspan></text></g></g><g id="SvgjsG1505" transform="translate(41,216.59375)"><path id="SvgjsPath1506" d="M 106 0Q 97 0 97 9L 97 108Q 97 117 84 117Q 97 117 97 126L 97 225Q 97 234 106 234" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1507" d="M 0 0L 106 0L 106 234L 0 234Z" stroke="none" fill="none"></path><g id="SvgjsG1508"><text id="SvgjsText1509" font-family="微软雅黑" text-anchor="end" font-size="13px" width="79px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="106.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1510" transform="translate(25,316.09375)"><path id="SvgjsPath1511" d="M 0 0L 89 0L 89 30L 0 30Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1512"><text id="SvgjsText1513" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.375" transform="rotate(0)"><tspan id="SvgjsTspan1514" dy="16" x="44.5"><tspan id="SvgjsTspan1515" style="text-decoration:;">HTTP 报文</tspan></tspan></text></g></g><g id="SvgjsG1516" transform="translate(151,357.0233207398035)"><path id="SvgjsPath1517" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1518"><text id="SvgjsText1519" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1520" dy="16" x="31"><tspan id="SvgjsTspan1521" style="text-decoration:;">cr</tspan></tspan></text></g></g><g id="SvgjsG1522" transform="translate(211.67803837953102,357.0233207398035)"><path id="SvgjsPath1523" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1524"><text id="SvgjsText1525" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1526" dy="16" x="31"><tspan id="SvgjsTspan1527" style="text-decoration:;">lf</tspan></tspan></text></g></g></svg>
  <p style="text-align: center; color: #888;">（组装后的网络包示意图）</p>
</div>

## 网络包发送：IP

TCP 模块在执行连接、收发、断开等各阶段操作时，都需要委托 IP 模块将数据封装成**网络包**发送给通信对象。

### IP 报文头部

IP 报文头部的格式：

<div style="text-align: center;">
  <svg id="SvgjsSvg1009" width="458" height="487" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1007"></defs><g id="SvgjsG1008" transform="translate(25,25)"><path id="SvgjsPath1009" d="M 0 0L 116 0L 116 37L 0 37Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1010"><text id="SvgjsText1011" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="96px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.875" transform="rotate(0)"><tspan id="SvgjsTspan1012" dy="16" x="58"><tspan id="SvgjsTspan1013" style="text-decoration:;">版本（4位）</tspan></tspan></text></g></g><g id="SvgjsG1014" transform="translate(140,25)"><path id="SvgjsPath1015" d="M 0 0L 119 0L 119 37L 0 37Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1016"><text id="SvgjsText1017" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="99px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.875" transform="rotate(0)"><tspan id="SvgjsTspan1018" dy="16" x="59.5"><tspan id="SvgjsTspan1019" style="text-decoration:;">首部长度（4位）</tspan></tspan></text></g></g><g id="SvgjsG1020" transform="translate(259,25)"><path id="SvgjsPath1021" d="M 0 0L 174 0L 174 37L 0 37Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1022"><text id="SvgjsText1023" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="154px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.875" transform="rotate(0)"><tspan id="SvgjsTspan1024" dy="16" x="87"><tspan id="SvgjsTspan1025" style="text-decoration:;">服务类型 TOS（8位）</tspan></tspan></text></g></g><g id="SvgjsG1026" transform="translate(25,62)"><path id="SvgjsPath1027" d="M 0 0L 408 0L 408 39L 0 39Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1028"><text id="SvgjsText1029" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="388px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="8.875" transform="rotate(0)"><tspan id="SvgjsTspan1030" dy="16" x="204"><tspan id="SvgjsTspan1031" style="text-decoration:;">总长度（16位）</tspan></tspan></text></g></g><g id="SvgjsG1032" transform="translate(25,100)"><path id="SvgjsPath1033" d="M 0 0L 408 0L 408 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1034"><text id="SvgjsText1035" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="388px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1036" dy="16" x="204"><tspan id="SvgjsTspan1037" style="text-decoration:;">标识（16位）</tspan></tspan></text></g></g><g id="SvgjsG1038" transform="translate(25,139)"><path id="SvgjsPath1039" d="M 0 0L 100 0L 100 36L 0 36Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1040"><text id="SvgjsText1041" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="80px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.375" transform="rotate(0)"><tspan id="SvgjsTspan1042" dy="16" x="50"><tspan id="SvgjsTspan1043" style="text-decoration:;">标志（3位）</tspan></tspan></text></g></g><g id="SvgjsG1044" transform="translate(124,139)"><path id="SvgjsPath1045" d="M 0 0L 309 0L 309 36L 0 36Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1046"><text id="SvgjsText1047" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="289px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.375" transform="rotate(0)"><tspan id="SvgjsTspan1048" dy="16" x="154.5"><tspan id="SvgjsTspan1049" style="text-decoration:;">片偏移（13位）</tspan></tspan></text></g></g><g id="SvgjsG1050" transform="translate(25,175)"><path id="SvgjsPath1051" d="M 0 0L 203 0L 203 37L 0 37Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1052"><text id="SvgjsText1053" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="183px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.875" transform="rotate(0)"><tspan id="SvgjsTspan1054" dy="16" x="101.5"><tspan id="SvgjsTspan1055" style="text-decoration:;">TTL（8位）</tspan></tspan></text></g></g><g id="SvgjsG1056" transform="translate(228,175)"><path id="SvgjsPath1057" d="M 0 0L 205 0L 205 37L 0 37Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1058"><text id="SvgjsText1059" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="185px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.875" transform="rotate(0)"><tspan id="SvgjsTspan1060" dy="16" x="102.5"><tspan id="SvgjsTspan1061" style="text-decoration:;">协议（8位）</tspan></tspan></text></g></g><g id="SvgjsG1062" transform="translate(25,209)"><path id="SvgjsPath1063" d="M 0 0L 408 0L 408 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1064"><text id="SvgjsText1065" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="388px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1066" dy="16" x="204"><tspan id="SvgjsTspan1067" style="text-decoration:;">首部校验和（16位）</tspan></tspan></text></g></g><g id="SvgjsG1068" transform="translate(25,247)"><path id="SvgjsPath1069" d="M 0 0L 408 0L 408 54L 0 54Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1070"><text id="SvgjsText1071" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="388px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="16.375" transform="rotate(0)"><tspan id="SvgjsTspan1072" dy="16" x="204"><tspan id="SvgjsTspan1073" style="text-decoration:;">源 IP 地址（32位）</tspan></tspan></text></g></g><g id="SvgjsG1074" transform="translate(25,301)"><path id="SvgjsPath1075" d="M 0 0L 408 0L 408 54L 0 54Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1076"><text id="SvgjsText1077" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="388px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="16.375" transform="rotate(0)"><tspan id="SvgjsTspan1078" dy="16" x="204"><tspan id="SvgjsTspan1079" style="text-decoration:;">目标 IP 地址（32位）</tspan></tspan></text></g></g><g id="SvgjsG1080" transform="translate(25,352)"><path id="SvgjsPath1081" d="M 0 0L 408 0L 408 40L 0 40Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1082"><text id="SvgjsText1083" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="388px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1084" dy="16" x="204"><tspan id="SvgjsTspan1085" style="text-decoration:;">选项</tspan></tspan></text></g></g><g id="SvgjsG1086" transform="translate(25,392)"><path id="SvgjsPath1087" d="M 0 0L 408 0L 408 70L 0 70Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#fff9c4"></path><g id="SvgjsG1088"><text id="SvgjsText1089" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="388px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="24.375" transform="rotate(0)"><tspan id="SvgjsTspan1090" dy="16" x="204"><tspan id="SvgjsTspan1091" style="text-decoration:;">数据</tspan></tspan></text></g></g></svg>
  <p style="text-align: center; color: #888;">（IP 报文头部的格式）</p>
</div>

在 IP 协议里面需要有**源地址 IP** 和 **目标地址 IP**：

* 源地址IP：即是客户端输出的 IP 地址；
* 目标地址 IP：即通过 DNS 域名解析得到的 Web 服务器 IP。

因为 HTTP 是经过 TCP 传输的，所以在 IP 包头的**协议号**，要填写为 `06`（十六进制），表示协议为 TCP。

### 路由表

假设客户端有多个网卡，就会有多个 IP 地址，那 IP 头部的源地址应该选择哪个 IP 呢？

当存在多个网卡时，在填写源地址 IP 时，就需要判断到底应该填写哪个地址。这个判断相当于在多块网卡中判断应该使用哪个一块网卡来发送包。

这个时候就需要根据**路由表**规则，来判断哪一个网卡作为源地址 IP。

在 Linux 操作系统，我们可以使用 `route -n` 命令查看当前系统的路由表。

```bash
[root@study ~]# route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
192.168.3.0     0.0.0.0         255.255.255.0   U     0      0        0 eth0
192.168.10.0    0.0.0.0         255.255.255.0   U     0      0        0 eth1
0.0.0.0         192.168.3.1     0.0.0.0         UG    0      0        0 eth0
```

举个例子，根据上面的路由表，我们假设 Web 服务器的目标地址是 `192.168.10.200`。

* 首先先和第一条目的子网掩码（Genmask）进行**与运算**，得到结果为 `192.168.10.0`，但是第一个条目的 Destination 是 `192.168.3.0`，两者不一致所以匹配失败。
* 再与第二条目的子网掩码进行**与运算**，得到的结果为 `192.168.10.0`，与第二条目的 Destination `192.168.10.0` 匹配成功，所以将使用 `eth1` 网卡的 IP 地址作为 IP 包头的源地址。

那么假设 Web 服务器的目标地址是 `10.100.20.100`，那么依然依照上面的路由表规则判断，判断后的结果是和第三条目匹配。

第三条目比较特殊，它目标地址和子网掩码都是 `0.0.0.0`，这表示**默认网关**，如果其他所有条目都无法匹配，就会自动匹配这一行。并且后续就把包发给路由器，Gateway 即是路由器的 IP 地址。

### IP 报文生成

至此，网络包的报文如下图。

<div style="text-align: center;">
  <svg id="SvgjsSvg1010" width="735.125" height="769.34375" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1007"><marker id="SvgjsMarker1352" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1353" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker></defs><g id="SvgjsG1008" transform="translate(151.0065964818764,318.33340724794965)"><path id="SvgjsPath1009" d="M 0 0L 558 0L 558 425.59029847412114L 0 425.59029847412114Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1010"><text id="SvgjsText1011" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="538px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="202.17014923706057" transform="rotate(0)"></text></g></g><g id="SvgjsG1012" transform="translate(151.0065964818764,318.33340724794965)"><path id="SvgjsPath1013" d="M0 0L276.7122 0L276.7122 29.134104634456676 L0 29.134104634456676Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1014" d="M276.7122 0L558 0L558 29.134104634456676 L276.7122 29.134104634456676Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1015"><text id="SvgjsText1016" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="277px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="3.942052317228338" transform="rotate(0)"><tspan id="SvgjsTspan1017" dy="16" x="138.5"><tspan id="SvgjsTspan1018" style="text-decoration:;">源端口号（16 位）</tspan></tspan></text></g><g id="SvgjsG1019"><text id="SvgjsText1020" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="282px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="3.942052317228338" transform="rotate(0)"><tspan id="SvgjsTspan1021" dy="16" x="417.7122"><tspan id="SvgjsTspan1022" style="text-decoration:;">目的端口号（16 位）</tspan></tspan></text></g></g><g id="SvgjsG1023" transform="translate(151.0065964818764,347.6739796872088)"><path id="SvgjsPath1024" d="M0 0L558 0L558 28.449672893661 L0 28.449672893661Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1025" d="M0 28.449672893661L558 28.449672893661L558 56.899345787322 L0 56.899345787322Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1026"><text id="SvgjsText1027" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="558px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="3.5998364468304995" transform="rotate(0)"><tspan id="SvgjsTspan1028" dy="16" x="279"><tspan id="SvgjsTspan1029" style="text-decoration:;">序号（32 位）</tspan></tspan></text></g><g id="SvgjsG1030"><text id="SvgjsText1031" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="558px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="32.0495093404915" transform="rotate(0)"><tspan id="SvgjsTspan1032" dy="16" x="279"><tspan id="SvgjsTspan1033" style="text-decoration:;">确认序号（32 位）</tspan></tspan></text></g></g><g id="SvgjsG1034" transform="translate(151.0065964818764,403.09645098507934)"><path id="SvgjsPath1035" d="M0 0L84.59280000000001 0L84.59280000000001 44.79852618002869 L0 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1036" d="M84.59280000000001 0L163.3266 0L163.3266 44.79852618002869 L84.59280000000001 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1037" d="M163.2708 0L182.29860000000002 0L182.29860000000002 44.79852618002869 L163.2708 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1038" d="M182.2986 0L200.2662 0L200.2662 44.79852618002869 L182.2986 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1039" d="M200.322 0L220.2426 0L220.2426 44.79852618002869 L200.322 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1040" d="M220.2426 0L239.88420000000002 0L239.88420000000002 44.79852618002869 L220.2426 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1041" d="M239.8842 0L259.6374 0L259.6374 44.79852618002869 L239.8842 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1042" d="M259.6374 0L278.10720000000003 0L278.10720000000003 44.79852618002869 L259.6374 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1043" d="M278.163 0L558 0L558 44.79852618002869 L278.163 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1044"><text id="SvgjsText1045" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="85px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="3.274263090014344" transform="rotate(0)"><tspan id="SvgjsTspan1046" dy="16" x="42.5"><tspan id="SvgjsTspan1047" style="text-decoration:;">首部长度</tspan></tspan><tspan id="SvgjsTspan1048" dy="16" x="42.5"><tspan id="SvgjsTspan1049" style="text-decoration:;">（4 位）</tspan></tspan></text></g><g id="SvgjsG1050"><text id="SvgjsText1051" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="79px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="11.774263090014344" transform="rotate(0)"><tspan id="SvgjsTspan1052" dy="16" x="124.09280000000001"><tspan id="SvgjsTspan1053" style="text-decoration:;">保留（6 位）</tspan></tspan></text></g><g id="SvgjsG1054"><text id="SvgjsText1055" font-family="微软雅黑" text-anchor="middle" font-size="12px" width="20px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="12px" weight="400" font-style="" opacity="1" y="-2.600736909985656" transform="rotate(0)"><tspan id="SvgjsTspan1056" dy="15" x="173.2708"><tspan id="SvgjsTspan1057" style="text-decoration:;">U</tspan></tspan><tspan id="SvgjsTspan1058" dy="15" x="173.2708"><tspan id="SvgjsTspan1059" style="text-decoration:;font-size: inherit;">R</tspan></tspan><tspan id="SvgjsTspan1060" dy="15" x="173.2708"><tspan id="SvgjsTspan1061" style="text-decoration:;">G</tspan></tspan></text></g><g id="SvgjsG1062"><text id="SvgjsText1063" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-4.725736909985656" transform="rotate(0)"><tspan id="SvgjsTspan1064" dy="16" x="191.2986"><tspan id="SvgjsTspan1065" style="text-decoration:;">A</tspan></tspan><tspan id="SvgjsTspan1066" dy="16" x="191.2986"><tspan id="SvgjsTspan1067" style="text-decoration:;font-size: inherit;">C</tspan></tspan><tspan id="SvgjsTspan1068" dy="16" x="191.2986"><tspan id="SvgjsTspan1069" style="text-decoration:;">K</tspan></tspan></text></g><g id="SvgjsG1070"><text id="SvgjsText1071" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="20px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-4.725736909985656" transform="rotate(0)"><tspan id="SvgjsTspan1072" dy="16" x="210.322"><tspan id="SvgjsTspan1073" style="text-decoration:;">P</tspan></tspan><tspan id="SvgjsTspan1074" dy="16" x="210.322"><tspan id="SvgjsTspan1075" style="text-decoration:;">S</tspan></tspan><tspan id="SvgjsTspan1076" dy="16" x="210.322"><tspan id="SvgjsTspan1077" style="text-decoration:;">H</tspan></tspan></text></g><g id="SvgjsG1078"><text id="SvgjsText1079" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="20px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-4.725736909985656" transform="rotate(0)"><tspan id="SvgjsTspan1080" dy="16" x="230.2426"><tspan id="SvgjsTspan1081" style="text-decoration:;">R</tspan></tspan><tspan id="SvgjsTspan1082" dy="16" x="230.2426"><tspan id="SvgjsTspan1083" style="text-decoration:;">S</tspan></tspan><tspan id="SvgjsTspan1084" dy="16" x="230.2426"><tspan id="SvgjsTspan1085" style="text-decoration:;">T</tspan></tspan></text></g><g id="SvgjsG1086"><text id="SvgjsText1087" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="20px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-4.725736909985656" transform="rotate(0)"><tspan id="SvgjsTspan1088" dy="16" x="249.8842"><tspan id="SvgjsTspan1089" style="text-decoration:;">S</tspan></tspan><tspan id="SvgjsTspan1090" dy="16" x="249.8842"><tspan id="SvgjsTspan1091" style="text-decoration:;">Y</tspan></tspan><tspan id="SvgjsTspan1092" dy="16" x="249.8842"><tspan id="SvgjsTspan1093" style="text-decoration:;">N</tspan></tspan></text></g><g id="SvgjsG1094"><text id="SvgjsText1095" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="19px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-4.725736909985656" transform="rotate(0)"><tspan id="SvgjsTspan1096" dy="16" x="269.1374"><tspan id="SvgjsTspan1097" style="text-decoration:;">F</tspan></tspan><tspan id="SvgjsTspan1098" dy="16" x="269.1374"><tspan id="SvgjsTspan1099" style="text-decoration:;">I</tspan></tspan><tspan id="SvgjsTspan1100" dy="16" x="269.1374"><tspan id="SvgjsTspan1101" style="text-decoration:;">N</tspan></tspan></text></g><g id="SvgjsG1102"><text id="SvgjsText1103" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="280px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="11.774263090014344" transform="rotate(0)"><tspan id="SvgjsTspan1104" dy="16" x="418.163"><tspan id="SvgjsTspan1105" style="text-decoration:;">窗口大小（16 位）</tspan></tspan></text></g></g><g id="SvgjsG1106" transform="translate(151.0065964818764,447.894977165108)"><path id="SvgjsPath1107" d="M0 0L279 0L279 25.599157817159252 L0 25.599157817159252Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1108" d="M279 0L558 0L558 25.599157817159252 L279 25.599157817159252Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1109"><text id="SvgjsText1110" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="279px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.174578908579626" transform="rotate(0)"><tspan id="SvgjsTspan1111" dy="16" x="139.5"><tspan id="SvgjsTspan1112" style="text-decoration:;">校验和（16 位）</tspan></tspan></text></g><g id="SvgjsG1113"><text id="SvgjsText1114" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="279px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.174578908579626" transform="rotate(0)"><tspan id="SvgjsTspan1115" dy="16" x="418.5"><tspan id="SvgjsTspan1116" style="text-decoration:;">紧急指针（16 位）</tspan></tspan></text></g></g><g id="SvgjsG1117" transform="translate(151.0065964818764,473.50368543729905)"><path id="SvgjsPath1118" d="M0 0L558 0L558 36.42002028477181 L0 36.42002028477181Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1119"><text id="SvgjsText1120" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="558px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.585010142385904" transform="rotate(0)"><tspan id="SvgjsTspan1121" dy="16" x="279"><tspan id="SvgjsTspan1122" style="text-decoration:;">选项</tspan></tspan></text></g></g><g id="SvgjsG1123" transform="translate(41.006596481876386,318.33340724794965)"><path id="SvgjsPath1124" d="M 106 0Q 97 0 97 9L 97 86.79514923706057Q 97 95.79514923706057 84 95.79514923706057Q 97 95.79514923706057 97 104.79514923706057L 97 182.59029847412114Q 97 191.59029847412114 106 191.59029847412114" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1125" d="M 0 0L 106 0L 106 191.59029847412114L 0 191.59029847412114Z" stroke="none" fill="none"></path><g id="SvgjsG1126"><text id="SvgjsText1127" font-family="微软雅黑" text-anchor="end" font-size="13px" width="79px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="85.17014923706057" transform="rotate(0)"></text></g></g><g id="SvgjsG1128" transform="translate(25.006596481876386,396.9237057220708)"><path id="SvgjsPath1129" d="M 0 0L 89 0L 89 31L 0 31Z" stroke="rgba(132,155,190,1)" stroke-width="2" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1130"><text id="SvgjsText1131" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.875" transform="rotate(0)"><tspan id="SvgjsTspan1132" dy="16" x="44.5"><tspan id="SvgjsTspan1133" style="text-decoration:;">TCP 头部</tspan></tspan></text></g></g><g id="SvgjsG1134" transform="translate(151.0065964818764,509.92370572207074)"><path id="SvgjsPath1135" d="M 0 0L 107.07889125799574 0L 107.07889125799574 35L 0 35Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1136"><text id="SvgjsText1137" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="88px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1138" dy="16" x="54"><tspan id="SvgjsTspan1139" style="text-decoration:;">方法</tspan></tspan></text></g></g><g id="SvgjsG1140" transform="translate(310.0065964818764,509.92370572207074)"><path id="SvgjsPath1141" d="M 0 0L 112.10021321961631 0L 112.10021321961631 35L 0 35Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1142"><text id="SvgjsText1143" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="93px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1144" dy="16" x="56.5"><tspan id="SvgjsTspan1145" style="text-decoration:;">URL</tspan></tspan></text></g></g><g id="SvgjsG1146" transform="translate(481.76139392324103,509.92370572207074)"><path id="SvgjsPath1147" d="M 0 0L 107.07889125799574 0L 107.07889125799574 35L 0 35Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1148"><text id="SvgjsText1149" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="88px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1150" dy="16" x="54"><tspan id="SvgjsTspan1151" style="text-decoration:;">版本</tspan></tspan></text></g></g><g id="SvgjsG1152" transform="translate(586.4607542643923,509.92370572207074)"><path id="SvgjsPath1153" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1154"><text id="SvgjsText1155" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1156" dy="16" x="31"><tspan id="SvgjsTspan1157" style="text-decoration:;">cr</tspan></tspan></text></g></g><g id="SvgjsG1158" transform="translate(647.1387926439234,509.92370572207074)"><path id="SvgjsPath1159" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1160"><text id="SvgjsText1161" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1162" dy="16" x="31"><tspan id="SvgjsTspan1163" style="text-decoration:;">lf</tspan></tspan></text></g></g><g id="SvgjsG1164" transform="translate(151.0065964818764,545.4237057220707)"><path id="SvgjsPath1165" d="M 0 0L 159 0L 159 34L 0 34Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1166"><text id="SvgjsText1167" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="139px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.375" transform="rotate(0)"><tspan id="SvgjsTspan1168" dy="16" x="79.5"><tspan id="SvgjsTspan1169" style="text-decoration:;">首部字段名：</tspan></tspan></text></g></g><g id="SvgjsG1170" transform="translate(308.6505197228146,544.9237057220707)"><path id="SvgjsPath1171" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1172"><text id="SvgjsText1173" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1174" dy="16" x="31"><tspan id="SvgjsTspan1175" style="text-decoration:;">sp</tspan></tspan></text></g></g><g id="SvgjsG1176" transform="translate(372.3051039445629,545.4237057220707)"><path id="SvgjsPath1177" d="M 0 0L 159 0L 159 34L 0 34Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1178"><text id="SvgjsText1179" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="139px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.375" transform="rotate(0)"><tspan id="SvgjsTspan1180" dy="16" x="79.5"><tspan id="SvgjsTspan1181" style="text-decoration:;">字段值</tspan></tspan></text></g></g><g id="SvgjsG1182" transform="translate(529.4607542643923,544.9237057220707)"><path id="SvgjsPath1183" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1184"><text id="SvgjsText1185" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1186" dy="16" x="31"><tspan id="SvgjsTspan1187" style="text-decoration:;">cr</tspan></tspan></text></g></g><g id="SvgjsG1188" transform="translate(590.1387926439234,544.9237057220707)"><path id="SvgjsPath1189" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1190"><text id="SvgjsText1191" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1192" dy="16" x="31"><tspan id="SvgjsTspan1193" style="text-decoration:;">lf</tspan></tspan></text></g></g><g id="SvgjsG1194" transform="translate(149.65051972281458,614.4237057220707)"><path id="SvgjsPath1195" d="M 0 0L 159 0L 159 34L 0 34Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1196"><text id="SvgjsText1197" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="139px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.375" transform="rotate(0)"><tspan id="SvgjsTspan1198" dy="16" x="79.5"><tspan id="SvgjsTspan1199" style="text-decoration:;">首部字段名：</tspan></tspan></text></g></g><g id="SvgjsG1200" transform="translate(308.6505197228146,613.9237057220707)"><path id="SvgjsPath1201" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1202"><text id="SvgjsText1203" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1204" dy="16" x="31"><tspan id="SvgjsTspan1205" style="text-decoration:;">sp</tspan></tspan></text></g></g><g id="SvgjsG1206" transform="translate(372.3051039445629,614.4237057220707)"><path id="SvgjsPath1207" d="M 0 0L 159 0L 159 34L 0 34Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1208"><text id="SvgjsText1209" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="139px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.375" transform="rotate(0)"><tspan id="SvgjsTspan1210" dy="16" x="79.5"><tspan id="SvgjsTspan1211" style="text-decoration:;">字段值</tspan></tspan></text></g></g><g id="SvgjsG1212" transform="translate(529.4607542643923,613.9237057220707)"><path id="SvgjsPath1213" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1214"><text id="SvgjsText1215" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1216" dy="16" x="31"><tspan id="SvgjsTspan1217" style="text-decoration:;">cr</tspan></tspan></text></g></g><g id="SvgjsG1218" transform="translate(590.1387926439234,613.9237057220707)"><path id="SvgjsPath1219" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1220"><text id="SvgjsText1221" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1222" dy="16" x="31"><tspan id="SvgjsTspan1223" style="text-decoration:;">lf</tspan></tspan></text></g></g><g id="SvgjsG1224"><path id="SvgjsPath1225" d="M650.4330200455254 580.1045536777817L650.4330200455254 594.5141296999263L650.4330200455254 594.5141296999263L650.4330200455254 609.9237057220707" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none"></path></g><g id="SvgjsG1226" transform="translate(151.0065964818764,685.3532764618742)"><path id="SvgjsPath1227" d="M 0 0L 559.3560767590618 0L 559.3560767590618 58.57042926019648L 0 58.57042926019648Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1228"><text id="SvgjsText1229" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="540px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="18.66021463009824" transform="rotate(0)"><tspan id="SvgjsTspan1230" dy="16" x="280"><tspan id="SvgjsTspan1231" style="text-decoration:;">数据</tspan></tspan></text></g></g><g id="SvgjsG1232" transform="translate(41.006596481876386,509.92370572207074)"><path id="SvgjsPath1233" d="M 106 0Q 97 0 97 9L 97 108Q 97 117 84 117Q 97 117 97 126L 97 225Q 97 234 106 234" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1234" d="M 0 0L 106 0L 106 234L 0 234Z" stroke="none" fill="none"></path><g id="SvgjsG1235"><text id="SvgjsText1236" font-family="微软雅黑" text-anchor="end" font-size="13px" width="79px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="106.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1237" transform="translate(25.006596481876386,609.4237057220707)"><path id="SvgjsPath1238" d="M 0 0L 89 0L 89 30L 0 30Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1239"><text id="SvgjsText1240" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.375" transform="rotate(0)"><tspan id="SvgjsTspan1241" dy="16" x="44.5"><tspan id="SvgjsTspan1242" style="text-decoration:;">HTTP 报文</tspan></tspan></text></g></g><g id="SvgjsG1243" transform="translate(151.0065964818764,650.3532764618742)"><path id="SvgjsPath1244" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1245"><text id="SvgjsText1246" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1247" dy="16" x="31"><tspan id="SvgjsTspan1248" style="text-decoration:;">cr</tspan></tspan></text></g></g><g id="SvgjsG1249" transform="translate(211.6846348614074,650.3532764618742)"><path id="SvgjsPath1250" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1251"><text id="SvgjsText1252" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1253" dy="16" x="31"><tspan id="SvgjsTspan1254" style="text-decoration:;">lf</tspan></tspan></text></g></g><g id="SvgjsG1255" transform="translate(150.32855810234548,25.000000000000057)"><path id="SvgjsPath1256" d="M 0 0L 159.03261005894893 0L 159.03261005894893 29.573122801564406L 0 29.573122801564406Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1257"><text id="SvgjsText1258" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="140px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.161561400782203" transform="rotate(0)"><tspan id="SvgjsTspan1259" dy="16" x="80"><tspan id="SvgjsTspan1260" style="text-decoration:;">版本（4位）</tspan></tspan></text></g></g><g id="SvgjsG1261" transform="translate(307.99019738492416,25.000000000000057)"><path id="SvgjsPath1262" d="M 0 0L 163.1455223880597 0L 163.1455223880597 29.573122801564406L 0 29.573122801564406Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1263"><text id="SvgjsText1264" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="144px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.161561400782203" transform="rotate(0)"><tspan id="SvgjsTspan1265" dy="16" x="82"><tspan id="SvgjsTspan1266" style="text-decoration:;">首部长度（4位）</tspan></tspan></text></g></g><g id="SvgjsG1267" transform="translate(471.13571977298386,25.000000000000057)"><path id="SvgjsPath1268" d="M 0 0L 238.5489150884234 0L 238.5489150884234 29.573122801564406L 0 29.573122801564406Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1269"><text id="SvgjsText1270" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="219px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.161561400782203" transform="rotate(0)"><tspan id="SvgjsTspan1271" dy="16" x="119.5"><tspan id="SvgjsTspan1272" style="text-decoration:;">服务类型 TOS（8位）</tspan></tspan></text></g></g><g id="SvgjsG1273" transform="translate(150.32855810234548,54.573122801564466)"><path id="SvgjsPath1274" d="M 0 0L 559.3560767590618 0L 559.3560767590618 31.171669980027346L 0 31.171669980027346Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1275"><text id="SvgjsText1276" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="540px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.960834990013673" transform="rotate(0)"><tspan id="SvgjsTspan1277" dy="16" x="280"><tspan id="SvgjsTspan1278" style="text-decoration:;">总长度（16位）</tspan></tspan></text></g></g><g id="SvgjsG1279" transform="translate(150.32855810234548,84.94551919236034)"><path id="SvgjsPath1280" d="M 0 0L 559.3560767590618 0L 559.3560767590618 31.970943569258818L 0 31.970943569258818Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1281"><text id="SvgjsText1282" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="540px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="5.360471784629409" transform="rotate(0)"><tspan id="SvgjsTspan1283" dy="16" x="280"><tspan id="SvgjsTspan1284" style="text-decoration:;">标识（16位）</tspan></tspan></text></g></g><g id="SvgjsG1285" transform="translate(150.32855810234548,116.11718917238767)"><path id="SvgjsPath1286" d="M 0 0L 137.09707763702494 0L 137.09707763702494 28.773849212332937L 0 28.773849212332937Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1287"><text id="SvgjsText1288" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="118px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="3.7619246061664686" transform="rotate(0)"><tspan id="SvgjsTspan1289" dy="16" x="69"><tspan id="SvgjsTspan1290" style="text-decoration:;">标志（3位）</tspan></tspan></text></g></g><g id="SvgjsG1291" transform="translate(286.0546649630001,116.11718917238767)"><path id="SvgjsPath1292" d="M 0 0L 423.62996989840707 0L 423.62996989840707 28.773849212332937L 0 28.773849212332937Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1293"><text id="SvgjsText1294" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="404px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="3.7619246061664686" transform="rotate(0)"><tspan id="SvgjsTspan1295" dy="16" x="212"><tspan id="SvgjsTspan1296" style="text-decoration:;">片偏移（13位）</tspan></tspan></text></g></g><g id="SvgjsG1297" transform="translate(150.32855810234548,144.89103838472062)"><path id="SvgjsPath1298" d="M 0 0L 278.30706760316065 0L 278.30706760316065 29.573122801564406L 0 29.573122801564406Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1299"><text id="SvgjsText1300" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="259px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.161561400782203" transform="rotate(0)"><tspan id="SvgjsTspan1301" dy="16" x="139.5"><tspan id="SvgjsTspan1302" style="text-decoration:;">TTL（8位）</tspan></tspan></text></g></g><g id="SvgjsG1303" transform="translate(428.63562570550596,144.89103838472062)"><path id="SvgjsPath1304" d="M 0 0L 281.04900915590116 0L 281.04900915590116 29.573122801564406L 0 29.573122801564406Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1305"><text id="SvgjsText1306" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="262px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.161561400782203" transform="rotate(0)"><tspan id="SvgjsTspan1307" dy="16" x="141"><tspan id="SvgjsTspan1308" style="text-decoration:;">协议（8位）</tspan></tspan></text></g></g><g id="SvgjsG1309" transform="translate(150.32855810234548,172.06634041859064)"><path id="SvgjsPath1310" d="M 0 0L 559.3560767590618 0L 559.3560767590618 31.970943569258818L 0 31.970943569258818Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1311"><text id="SvgjsText1312" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="540px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="5.360471784629409" transform="rotate(0)"><tspan id="SvgjsTspan1313" dy="16" x="280"><tspan id="SvgjsTspan1314" style="text-decoration:;">首部校验和（16位）</tspan></tspan></text></g></g><g id="SvgjsG1315" transform="translate(150.32855810234548,202.4387368093865)"><path id="SvgjsPath1316" d="M 0 0L 559.3560767590618 0L 559.3560767590618 43.16077381849941L 0 43.16077381849941Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1317"><text id="SvgjsText1318" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="540px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="10.955386909249704" transform="rotate(0)"><tspan id="SvgjsTspan1319" dy="16" x="280"><tspan id="SvgjsTspan1320" style="text-decoration:;">源 IP 地址（32位）</tspan></tspan></text></g></g><g id="SvgjsG1321" transform="translate(150.32855810234548,245.59951062788588)"><path id="SvgjsPath1322" d="M 0 0L 559.3560767590618 0L 559.3560767590618 43.16077381849941L 0 43.16077381849941Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1323"><text id="SvgjsText1324" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="540px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="10.955386909249704" transform="rotate(0)"><tspan id="SvgjsTspan1325" dy="16" x="280"><tspan id="SvgjsTspan1326" style="text-decoration:;">目标 IP 地址（32位）</tspan></tspan></text></g></g><g id="SvgjsG1327" transform="translate(150.32855810234548,286.36246367869086)"><path id="SvgjsPath1328" d="M 0 0L 559.3560767590618 0L 559.3560767590618 31.970943569258818L 0 31.970943569258818Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1329"><text id="SvgjsText1330" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="540px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="5.360471784629409" transform="rotate(0)"><tspan id="SvgjsTspan1331" dy="16" x="280"><tspan id="SvgjsTspan1332" style="text-decoration:;">选项</tspan></tspan></text></g></g><g id="SvgjsG1333" transform="translate(44.006596481876386,25)"><path id="SvgjsPath1334" d="M 100 0Q 91 0 91 9L 91 135Q 91 144 78 144Q 91 144 91 153L 91 279Q 91 288 100 288" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1335" d="M 0 0L 100 0L 100 288L 0 288Z" stroke="none" fill="none"></path><g id="SvgjsG1336"><text id="SvgjsText1337" font-family="微软雅黑" text-anchor="end" font-size="13px" width="73px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="133.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1338" transform="translate(25.006596481876386,153.9237057220708)"><path id="SvgjsPath1339" d="M 0 0L 89 0L 89 31L 0 31Z" stroke="rgba(201,190,204,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1340"><text id="SvgjsText1341" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.875" transform="rotate(0)"><tspan id="SvgjsTspan1342" dy="16" x="44.5"><tspan id="SvgjsTspan1343" style="text-decoration:;">IP 头部</tspan></tspan></text></g></g><g id="SvgjsG1344" transform="translate(460.95758732597517,150.66317290661544)"><path id="SvgjsPath1345" d="M 0 0L 44.583030227016025 0L 44.583030227016025 18.028853757774755L 0 18.028853757774755Z" stroke="rgba(132,155,190,1)" stroke-width="2" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1346"><text id="SvgjsText1347" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="25px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-1.6105731211126226" transform="rotate(0)"><tspan id="SvgjsTspan1348" dy="16" x="22.5"><tspan id="SvgjsTspan1349" style="text-decoration:;">TCP</tspan></tspan></text></g></g><g id="SvgjsG1350"><path id="SvgjsPath1351" d="M459.9710141929588 159.51427969117788C 311.71875 135 174.71875 109 151.89116957723985 316.73909124280544" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1352)"></path></g><g id="SvgjsG1354" transform="translate(420.8712020255864,509.92370572207074)"><path id="SvgjsPath1355" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1356"><text id="SvgjsText1357" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1358" dy="16" x="31"><tspan id="SvgjsTspan1359" style="text-decoration:;">sp</tspan></tspan></text></g></g><g id="SvgjsG1360" transform="translate(253.11107409381668,509.92370572207074)"><path id="SvgjsPath1361" d="M 0 0L 55.539445628997896 0L 55.539445628997896 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1362"><text id="SvgjsText1363" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="36px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1364" dy="16" x="28"><tspan id="SvgjsTspan1365" style="text-decoration:;">sp</tspan></tspan></text></g></g></svg>
  <p style="text-align: center; color: #888;">（组装后的网络包示意图）</p>
</div>

## 两点传输：MAC

生成了 IP 头部之后，接下来网络包还需要在 IP 头部的前面加上 **MAC 头部**。

### MAC 报文头部

MAC 头部是以太网使用的头部，它包含了接收方和发送方的 MAC 地址等信息。

<div style="text-align: center;">
  <svg id="SvgjsSvg1011" width="305" height="207" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1007"></defs><g id="SvgjsG1008" transform="translate(25,25)"><path id="SvgjsPath1009" d="M0 0L255 0L255 52.3281 L0 52.3281Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1010" d="M0 52.3281L255 52.3281L255 104.6562 L0 104.6562Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1011" d="M0 104.6562L255 104.6562L255 157 L0 157Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1012"><text id="SvgjsText1013" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="255px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="15.53905" transform="rotate(0)"><tspan id="SvgjsTspan1014" dy="16" x="127.5"><tspan id="SvgjsTspan1015" style="text-decoration:;">接收方 MAC 地址（48位）</tspan></tspan></text></g><g id="SvgjsG1016"><text id="SvgjsText1017" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="255px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="67.86715" transform="rotate(0)"><tspan id="SvgjsTspan1018" dy="16" x="127.5"><tspan id="SvgjsTspan1019" style="text-decoration:;">发送方 MAC 地址（48位）</tspan></tspan></text></g><g id="SvgjsG1020"><text id="SvgjsText1021" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="255px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="120.2031" transform="rotate(0)"><tspan id="SvgjsTspan1022" dy="16" x="127.5"><tspan id="SvgjsTspan1023" style="text-decoration:;">协议类型（16位）</tspan></tspan></text></g></g></svg>
  <p style="text-align: center; color: #888;">（MAC 报文头部的格式）</p>
</div>

在 MAC 包头里需要**发送方 MAC 地址**和**接收方目标 MAC 地址**，用于**两点之间的传输**。

一般在 TCP/IP 通信里，MAC 包头的**协议类型**只使用：

* `0800`：IP 协议
* `0806`：ARP 协议

### MAC 确认收发方

**发送方**的 MAC 地址获取比较简单，MAC 地址是在网卡生产时写入到 ROM 里的，只要将这个值读取出来写入到 MAC 头部就可以了。

**接收方**的 MAC 地址就有点复杂了，只要告诉以太网对方的 MAC 的地址，以太网就会帮我们把包发送过去，那么很显然这里应该填写对方的 MAC 地址。

所以先得搞清楚应该把包发给谁，这个只要查一下**路由表**就知道了。在路由表中找到相匹配的条目，然后把包发给 Gateway 列中的 IP 地址就可以了。

既然知道要发给谁，该如何获取对方的 MAC 地址呢？

此时就需要 `ARP` 协议帮我们找到路由器的 MAC 地址。

### ARP 协议

ARP 协议会在以太网中以**广播**的形式，对以太网所有的设备喊出：「这个 IP 地址是谁的？请把你的 MAC 地址告诉我」。

然后就会有人回答：「这个 IP 地址是我的，我的 MAC 地址是 xxxx」。

如果对方和自己处于同一个子网中，那么通过上面的操作就可以得到对方的 MAC 地址。然后，我们将这个 MAC 地址写入 MAC 头部，MAC 头部就完成了。

但如果每次都要广播获取，这不是很麻烦吗？

所以在后续，操作系统会把本次查询结果放到一块叫做 **ARP 缓存**的内存空间留着以后用，不过缓存的时间就几分钟。

也就是说，在发包时：

* 先查询 ARP 缓存，如果其中已经保存了对方的 MAC 地址，就不需要发送 ARP 查询，直接使用 ARP 缓存中的地址。
* 而当 ARP 缓存中不存在对方 MAC 地址时，则发送 ARP 广播查询。

在 Linux 系统中，可以使用 `arp -a` 命令来查看 ARP 缓存的内容。

```bash
[root@study ~]# arp -a
? (192.168.3.20) at fe:ee:1e:59:d9:ef [ether] on eth2
```

在上面的查询结果中：

* `192.168.3.20` 是 IP 地址。
* `fe:ee:1e:59:d9:ef` 是 MAC 地址。
* `eth2` 是网口名称。

### MAC 报文生成

至此，网络包的报文如下图。

<div style="text-align: center;">
  <svg id="SvgjsSvg1012" width="735.125" height="899.34375" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1007"><marker id="SvgjsMarker1352" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1353" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker></defs><g id="SvgjsG1008" transform="translate(151.0065964818764,448.3334072479497)"><path id="SvgjsPath1009" d="M 0 0L 558 0L 558 425.59029847412114L 0 425.59029847412114Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1010"><text id="SvgjsText1011" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="538px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="202.17014923706057" transform="rotate(0)"></text></g></g><g id="SvgjsG1012" transform="translate(151.0065964818764,448.3334072479497)"><path id="SvgjsPath1013" d="M0 0L276.7122 0L276.7122 29.134104634456676 L0 29.134104634456676Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1014" d="M276.7122 0L558 0L558 29.134104634456676 L276.7122 29.134104634456676Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1015"><text id="SvgjsText1016" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="277px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="3.942052317228338" transform="rotate(0)"><tspan id="SvgjsTspan1017" dy="16" x="138.5"><tspan id="SvgjsTspan1018" style="text-decoration:;">源端口号（16 位）</tspan></tspan></text></g><g id="SvgjsG1019"><text id="SvgjsText1020" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="282px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="3.942052317228338" transform="rotate(0)"><tspan id="SvgjsTspan1021" dy="16" x="417.7122"><tspan id="SvgjsTspan1022" style="text-decoration:;">目的端口号（16 位）</tspan></tspan></text></g></g><g id="SvgjsG1023" transform="translate(151.0065964818764,477.6739796872089)"><path id="SvgjsPath1024" d="M0 0L558 0L558 28.449672893661 L0 28.449672893661Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1025" d="M0 28.449672893661L558 28.449672893661L558 56.899345787322 L0 56.899345787322Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1026"><text id="SvgjsText1027" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="558px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="3.5998364468304995" transform="rotate(0)"><tspan id="SvgjsTspan1028" dy="16" x="279"><tspan id="SvgjsTspan1029" style="text-decoration:;">序号（32 位）</tspan></tspan></text></g><g id="SvgjsG1030"><text id="SvgjsText1031" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="558px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="32.0495093404915" transform="rotate(0)"><tspan id="SvgjsTspan1032" dy="16" x="279"><tspan id="SvgjsTspan1033" style="text-decoration:;">确认序号（32 位）</tspan></tspan></text></g></g><g id="SvgjsG1034" transform="translate(151.0065964818764,533.0964509850794)"><path id="SvgjsPath1035" d="M0 0L84.59280000000001 0L84.59280000000001 44.79852618002869 L0 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1036" d="M84.59280000000001 0L163.3266 0L163.3266 44.79852618002869 L84.59280000000001 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1037" d="M163.2708 0L182.29860000000002 0L182.29860000000002 44.79852618002869 L163.2708 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1038" d="M182.2986 0L200.2662 0L200.2662 44.79852618002869 L182.2986 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1039" d="M200.322 0L220.2426 0L220.2426 44.79852618002869 L200.322 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1040" d="M220.2426 0L239.88420000000002 0L239.88420000000002 44.79852618002869 L220.2426 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1041" d="M239.8842 0L259.6374 0L259.6374 44.79852618002869 L239.8842 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1042" d="M259.6374 0L278.10720000000003 0L278.10720000000003 44.79852618002869 L259.6374 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1043" d="M278.163 0L558 0L558 44.79852618002869 L278.163 44.79852618002869Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1044"><text id="SvgjsText1045" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="85px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="3.274263090014344" transform="rotate(0)"><tspan id="SvgjsTspan1046" dy="16" x="42.5"><tspan id="SvgjsTspan1047" style="text-decoration:;">首部长度</tspan></tspan><tspan id="SvgjsTspan1048" dy="16" x="42.5"><tspan id="SvgjsTspan1049" style="text-decoration:;">（4 位）</tspan></tspan></text></g><g id="SvgjsG1050"><text id="SvgjsText1051" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="79px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="11.774263090014344" transform="rotate(0)"><tspan id="SvgjsTspan1052" dy="16" x="124.09280000000001"><tspan id="SvgjsTspan1053" style="text-decoration:;">保留（6 位）</tspan></tspan></text></g><g id="SvgjsG1054"><text id="SvgjsText1055" font-family="微软雅黑" text-anchor="middle" font-size="12px" width="20px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="12px" weight="400" font-style="" opacity="1" y="-2.600736909985656" transform="rotate(0)"><tspan id="SvgjsTspan1056" dy="15" x="173.2708"><tspan id="SvgjsTspan1057" style="text-decoration:;">U</tspan></tspan><tspan id="SvgjsTspan1058" dy="15" x="173.2708"><tspan id="SvgjsTspan1059" style="text-decoration:;font-size: inherit;">R</tspan></tspan><tspan id="SvgjsTspan1060" dy="15" x="173.2708"><tspan id="SvgjsTspan1061" style="text-decoration:;">G</tspan></tspan></text></g><g id="SvgjsG1062"><text id="SvgjsText1063" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-4.725736909985656" transform="rotate(0)"><tspan id="SvgjsTspan1064" dy="16" x="191.2986"><tspan id="SvgjsTspan1065" style="text-decoration:;">A</tspan></tspan><tspan id="SvgjsTspan1066" dy="16" x="191.2986"><tspan id="SvgjsTspan1067" style="text-decoration:;font-size: inherit;">C</tspan></tspan><tspan id="SvgjsTspan1068" dy="16" x="191.2986"><tspan id="SvgjsTspan1069" style="text-decoration:;">K</tspan></tspan></text></g><g id="SvgjsG1070"><text id="SvgjsText1071" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="20px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-4.725736909985656" transform="rotate(0)"><tspan id="SvgjsTspan1072" dy="16" x="210.322"><tspan id="SvgjsTspan1073" style="text-decoration:;">P</tspan></tspan><tspan id="SvgjsTspan1074" dy="16" x="210.322"><tspan id="SvgjsTspan1075" style="text-decoration:;">S</tspan></tspan><tspan id="SvgjsTspan1076" dy="16" x="210.322"><tspan id="SvgjsTspan1077" style="text-decoration:;">H</tspan></tspan></text></g><g id="SvgjsG1078"><text id="SvgjsText1079" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="20px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-4.725736909985656" transform="rotate(0)"><tspan id="SvgjsTspan1080" dy="16" x="230.2426"><tspan id="SvgjsTspan1081" style="text-decoration:;">R</tspan></tspan><tspan id="SvgjsTspan1082" dy="16" x="230.2426"><tspan id="SvgjsTspan1083" style="text-decoration:;">S</tspan></tspan><tspan id="SvgjsTspan1084" dy="16" x="230.2426"><tspan id="SvgjsTspan1085" style="text-decoration:;">T</tspan></tspan></text></g><g id="SvgjsG1086"><text id="SvgjsText1087" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="20px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-4.725736909985656" transform="rotate(0)"><tspan id="SvgjsTspan1088" dy="16" x="249.8842"><tspan id="SvgjsTspan1089" style="text-decoration:;">S</tspan></tspan><tspan id="SvgjsTspan1090" dy="16" x="249.8842"><tspan id="SvgjsTspan1091" style="text-decoration:;">Y</tspan></tspan><tspan id="SvgjsTspan1092" dy="16" x="249.8842"><tspan id="SvgjsTspan1093" style="text-decoration:;">N</tspan></tspan></text></g><g id="SvgjsG1094"><text id="SvgjsText1095" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="19px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-4.725736909985656" transform="rotate(0)"><tspan id="SvgjsTspan1096" dy="16" x="269.1374"><tspan id="SvgjsTspan1097" style="text-decoration:;">F</tspan></tspan><tspan id="SvgjsTspan1098" dy="16" x="269.1374"><tspan id="SvgjsTspan1099" style="text-decoration:;">I</tspan></tspan><tspan id="SvgjsTspan1100" dy="16" x="269.1374"><tspan id="SvgjsTspan1101" style="text-decoration:;">N</tspan></tspan></text></g><g id="SvgjsG1102"><text id="SvgjsText1103" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="280px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="11.774263090014344" transform="rotate(0)"><tspan id="SvgjsTspan1104" dy="16" x="418.163"><tspan id="SvgjsTspan1105" style="text-decoration:;">窗口大小（16 位）</tspan></tspan></text></g></g><g id="SvgjsG1106" transform="translate(151.0065964818764,577.894977165108)"><path id="SvgjsPath1107" d="M0 0L279 0L279 25.599157817159252 L0 25.599157817159252Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><path id="SvgjsPath1108" d="M279 0L558 0L558 25.599157817159252 L279 25.599157817159252Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1109"><text id="SvgjsText1110" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="279px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.174578908579626" transform="rotate(0)"><tspan id="SvgjsTspan1111" dy="16" x="139.5"><tspan id="SvgjsTspan1112" style="text-decoration:;">校验和（16 位）</tspan></tspan></text></g><g id="SvgjsG1113"><text id="SvgjsText1114" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="279px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.174578908579626" transform="rotate(0)"><tspan id="SvgjsTspan1115" dy="16" x="418.5"><tspan id="SvgjsTspan1116" style="text-decoration:;">紧急指针（16 位）</tspan></tspan></text></g></g><g id="SvgjsG1117" transform="translate(151.0065964818764,603.503685437299)"><path id="SvgjsPath1118" d="M0 0L558 0L558 36.42002028477181 L0 36.42002028477181Z" stroke="rgba(132,155,190,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1119"><text id="SvgjsText1120" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="558px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.585010142385904" transform="rotate(0)"><tspan id="SvgjsTspan1121" dy="16" x="279"><tspan id="SvgjsTspan1122" style="text-decoration:;">选项</tspan></tspan></text></g></g><g id="SvgjsG1123" transform="translate(41.006596481876386,448.3334072479497)"><path id="SvgjsPath1124" d="M 106 0Q 97 0 97 9L 97 86.79514923706057Q 97 95.79514923706057 84 95.79514923706057Q 97 95.79514923706057 97 104.79514923706057L 97 182.59029847412114Q 97 191.59029847412114 106 191.59029847412114" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1125" d="M 0 0L 106 0L 106 191.59029847412114L 0 191.59029847412114Z" stroke="none" fill="none"></path><g id="SvgjsG1126"><text id="SvgjsText1127" font-family="微软雅黑" text-anchor="end" font-size="13px" width="79px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="85.17014923706057" transform="rotate(0)"></text></g></g><g id="SvgjsG1128" transform="translate(25.006596481876386,526.9237057220707)"><path id="SvgjsPath1129" d="M 0 0L 89 0L 89 31L 0 31Z" stroke="rgba(132,155,190,1)" stroke-width="2" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1130"><text id="SvgjsText1131" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.875" transform="rotate(0)"><tspan id="SvgjsTspan1132" dy="16" x="44.5"><tspan id="SvgjsTspan1133" style="text-decoration:;">TCP 头部</tspan></tspan></text></g></g><g id="SvgjsG1134" transform="translate(151.0065964818764,639.9237057220707)"><path id="SvgjsPath1135" d="M 0 0L 107.07889125799574 0L 107.07889125799574 35L 0 35Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1136"><text id="SvgjsText1137" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="88px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1138" dy="16" x="54"><tspan id="SvgjsTspan1139" style="text-decoration:;">方法</tspan></tspan></text></g></g><g id="SvgjsG1140" transform="translate(310.0065964818764,639.9237057220707)"><path id="SvgjsPath1141" d="M 0 0L 112.10021321961631 0L 112.10021321961631 35L 0 35Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1142"><text id="SvgjsText1143" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="93px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1144" dy="16" x="56.5"><tspan id="SvgjsTspan1145" style="text-decoration:;">URL</tspan></tspan></text></g></g><g id="SvgjsG1146" transform="translate(481.76139392324103,639.9237057220707)"><path id="SvgjsPath1147" d="M 0 0L 107.07889125799574 0L 107.07889125799574 35L 0 35Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1148"><text id="SvgjsText1149" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="88px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1150" dy="16" x="54"><tspan id="SvgjsTspan1151" style="text-decoration:;">版本</tspan></tspan></text></g></g><g id="SvgjsG1152" transform="translate(586.4607542643923,639.9237057220707)"><path id="SvgjsPath1153" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1154"><text id="SvgjsText1155" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1156" dy="16" x="31"><tspan id="SvgjsTspan1157" style="text-decoration:;">cr</tspan></tspan></text></g></g><g id="SvgjsG1158" transform="translate(647.1387926439234,639.9237057220707)"><path id="SvgjsPath1159" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1160"><text id="SvgjsText1161" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1162" dy="16" x="31"><tspan id="SvgjsTspan1163" style="text-decoration:;">lf</tspan></tspan></text></g></g><g id="SvgjsG1164" transform="translate(151.0065964818764,675.4237057220707)"><path id="SvgjsPath1165" d="M 0 0L 159 0L 159 34L 0 34Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1166"><text id="SvgjsText1167" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="139px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.375" transform="rotate(0)"><tspan id="SvgjsTspan1168" dy="16" x="79.5"><tspan id="SvgjsTspan1169" style="text-decoration:;">首部字段名：</tspan></tspan></text></g></g><g id="SvgjsG1170" transform="translate(308.6505197228146,674.9237057220707)"><path id="SvgjsPath1171" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1172"><text id="SvgjsText1173" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1174" dy="16" x="31"><tspan id="SvgjsTspan1175" style="text-decoration:;">sp</tspan></tspan></text></g></g><g id="SvgjsG1176" transform="translate(372.3051039445629,675.4237057220707)"><path id="SvgjsPath1177" d="M 0 0L 159 0L 159 34L 0 34Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1178"><text id="SvgjsText1179" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="139px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.375" transform="rotate(0)"><tspan id="SvgjsTspan1180" dy="16" x="79.5"><tspan id="SvgjsTspan1181" style="text-decoration:;">字段值</tspan></tspan></text></g></g><g id="SvgjsG1182" transform="translate(529.4607542643923,674.9237057220707)"><path id="SvgjsPath1183" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1184"><text id="SvgjsText1185" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1186" dy="16" x="31"><tspan id="SvgjsTspan1187" style="text-decoration:;">cr</tspan></tspan></text></g></g><g id="SvgjsG1188" transform="translate(590.1387926439234,674.9237057220707)"><path id="SvgjsPath1189" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1190"><text id="SvgjsText1191" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1192" dy="16" x="31"><tspan id="SvgjsTspan1193" style="text-decoration:;">lf</tspan></tspan></text></g></g><g id="SvgjsG1194" transform="translate(149.65051972281458,744.4237057220707)"><path id="SvgjsPath1195" d="M 0 0L 159 0L 159 34L 0 34Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1196"><text id="SvgjsText1197" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="139px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.375" transform="rotate(0)"><tspan id="SvgjsTspan1198" dy="16" x="79.5"><tspan id="SvgjsTspan1199" style="text-decoration:;">首部字段名：</tspan></tspan></text></g></g><g id="SvgjsG1200" transform="translate(308.6505197228146,743.9237057220707)"><path id="SvgjsPath1201" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1202"><text id="SvgjsText1203" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1204" dy="16" x="31"><tspan id="SvgjsTspan1205" style="text-decoration:;">sp</tspan></tspan></text></g></g><g id="SvgjsG1206" transform="translate(372.3051039445629,744.4237057220707)"><path id="SvgjsPath1207" d="M 0 0L 159 0L 159 34L 0 34Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1208"><text id="SvgjsText1209" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="139px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.375" transform="rotate(0)"><tspan id="SvgjsTspan1210" dy="16" x="79.5"><tspan id="SvgjsTspan1211" style="text-decoration:;">字段值</tspan></tspan></text></g></g><g id="SvgjsG1212" transform="translate(529.4607542643923,743.9237057220707)"><path id="SvgjsPath1213" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1214"><text id="SvgjsText1215" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1216" dy="16" x="31"><tspan id="SvgjsTspan1217" style="text-decoration:;">cr</tspan></tspan></text></g></g><g id="SvgjsG1218" transform="translate(590.1387926439234,743.9237057220707)"><path id="SvgjsPath1219" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1220"><text id="SvgjsText1221" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1222" dy="16" x="31"><tspan id="SvgjsTspan1223" style="text-decoration:;">lf</tspan></tspan></text></g></g><g id="SvgjsG1224"><path id="SvgjsPath1225" d="M650.4330200455254 710.1045536777817L650.4330200455254 724.5141296999263L650.4330200455254 724.5141296999263L650.4330200455254 739.9237057220707" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none"></path></g><g id="SvgjsG1226" transform="translate(151.0065964818764,815.3532764618742)"><path id="SvgjsPath1227" d="M 0 0L 559.3560767590618 0L 559.3560767590618 58.57042926019648L 0 58.57042926019648Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1228"><text id="SvgjsText1229" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="540px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="18.66021463009824" transform="rotate(0)"><tspan id="SvgjsTspan1230" dy="16" x="280"><tspan id="SvgjsTspan1231" style="text-decoration:;">数据</tspan></tspan></text></g></g><g id="SvgjsG1232" transform="translate(41.006596481876386,639.9237057220707)"><path id="SvgjsPath1233" d="M 106 0Q 97 0 97 9L 97 108Q 97 117 84 117Q 97 117 97 126L 97 225Q 97 234 106 234" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1234" d="M 0 0L 106 0L 106 234L 0 234Z" stroke="none" fill="none"></path><g id="SvgjsG1235"><text id="SvgjsText1236" font-family="微软雅黑" text-anchor="end" font-size="13px" width="79px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="106.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1237" transform="translate(25.006596481876386,739.4237057220707)"><path id="SvgjsPath1238" d="M 0 0L 89 0L 89 30L 0 30Z" stroke="rgba(255,183,77,1)" stroke-width="2" fill-opacity="1" fill="#ffe0b2"></path><g id="SvgjsG1239"><text id="SvgjsText1240" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.375" transform="rotate(0)"><tspan id="SvgjsTspan1241" dy="16" x="44.5"><tspan id="SvgjsTspan1242" style="text-decoration:;">HTTP 报文</tspan></tspan></text></g></g><g id="SvgjsG1243" transform="translate(151.0065964818764,780.3532764618742)"><path id="SvgjsPath1244" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1245"><text id="SvgjsText1246" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1247" dy="16" x="31"><tspan id="SvgjsTspan1248" style="text-decoration:;">cr</tspan></tspan></text></g></g><g id="SvgjsG1249" transform="translate(211.6846348614074,780.3532764618742)"><path id="SvgjsPath1250" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1251"><text id="SvgjsText1252" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1253" dy="16" x="31"><tspan id="SvgjsTspan1254" style="text-decoration:;">lf</tspan></tspan></text></g></g><g id="SvgjsG1255" transform="translate(150.32855810234548,155.00000000000006)"><path id="SvgjsPath1256" d="M 0 0L 159.03261005894893 0L 159.03261005894893 29.573122801564406L 0 29.573122801564406Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1257"><text id="SvgjsText1258" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="140px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.161561400782203" transform="rotate(0)"><tspan id="SvgjsTspan1259" dy="16" x="80"><tspan id="SvgjsTspan1260" style="text-decoration:;">版本（4位）</tspan></tspan></text></g></g><g id="SvgjsG1261" transform="translate(307.99019738492416,155.00000000000006)"><path id="SvgjsPath1262" d="M 0 0L 163.1455223880597 0L 163.1455223880597 29.573122801564406L 0 29.573122801564406Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1263"><text id="SvgjsText1264" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="144px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.161561400782203" transform="rotate(0)"><tspan id="SvgjsTspan1265" dy="16" x="82"><tspan id="SvgjsTspan1266" style="text-decoration:;">首部长度（4位）</tspan></tspan></text></g></g><g id="SvgjsG1267" transform="translate(471.13571977298386,155.00000000000006)"><path id="SvgjsPath1268" d="M 0 0L 238.5489150884234 0L 238.5489150884234 29.573122801564406L 0 29.573122801564406Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1269"><text id="SvgjsText1270" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="219px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.161561400782203" transform="rotate(0)"><tspan id="SvgjsTspan1271" dy="16" x="119.5"><tspan id="SvgjsTspan1272" style="text-decoration:;">服务类型 TOS（8位）</tspan></tspan></text></g></g><g id="SvgjsG1273" transform="translate(150.32855810234548,184.57312280156447)"><path id="SvgjsPath1274" d="M 0 0L 559.3560767590618 0L 559.3560767590618 31.171669980027346L 0 31.171669980027346Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1275"><text id="SvgjsText1276" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="540px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.960834990013673" transform="rotate(0)"><tspan id="SvgjsTspan1277" dy="16" x="280"><tspan id="SvgjsTspan1278" style="text-decoration:;">总长度（16位）</tspan></tspan></text></g></g><g id="SvgjsG1279" transform="translate(150.32855810234548,214.94551919236034)"><path id="SvgjsPath1280" d="M 0 0L 559.3560767590618 0L 559.3560767590618 31.970943569258818L 0 31.970943569258818Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1281"><text id="SvgjsText1282" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="540px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="5.360471784629409" transform="rotate(0)"><tspan id="SvgjsTspan1283" dy="16" x="280"><tspan id="SvgjsTspan1284" style="text-decoration:;">标识（16位）</tspan></tspan></text></g></g><g id="SvgjsG1285" transform="translate(150.32855810234548,246.11718917238767)"><path id="SvgjsPath1286" d="M 0 0L 137.09707763702494 0L 137.09707763702494 28.773849212332937L 0 28.773849212332937Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1287"><text id="SvgjsText1288" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="118px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="3.7619246061664686" transform="rotate(0)"><tspan id="SvgjsTspan1289" dy="16" x="69"><tspan id="SvgjsTspan1290" style="text-decoration:;">标志（3位）</tspan></tspan></text></g></g><g id="SvgjsG1291" transform="translate(286.0546649630001,246.11718917238767)"><path id="SvgjsPath1292" d="M 0 0L 423.62996989840707 0L 423.62996989840707 28.773849212332937L 0 28.773849212332937Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1293"><text id="SvgjsText1294" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="404px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="3.7619246061664686" transform="rotate(0)"><tspan id="SvgjsTspan1295" dy="16" x="212"><tspan id="SvgjsTspan1296" style="text-decoration:;">片偏移（13位）</tspan></tspan></text></g></g><g id="SvgjsG1297" transform="translate(150.32855810234548,274.8910383847206)"><path id="SvgjsPath1298" d="M 0 0L 278.30706760316065 0L 278.30706760316065 29.573122801564406L 0 29.573122801564406Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1299"><text id="SvgjsText1300" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="259px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.161561400782203" transform="rotate(0)"><tspan id="SvgjsTspan1301" dy="16" x="139.5"><tspan id="SvgjsTspan1302" style="text-decoration:;">TTL（8位）</tspan></tspan></text></g></g><g id="SvgjsG1303" transform="translate(428.63562570550596,274.8910383847206)"><path id="SvgjsPath1304" d="M 0 0L 281.04900915590116 0L 281.04900915590116 29.573122801564406L 0 29.573122801564406Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1305"><text id="SvgjsText1306" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="262px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.161561400782203" transform="rotate(0)"><tspan id="SvgjsTspan1307" dy="16" x="141"><tspan id="SvgjsTspan1308" style="text-decoration:;">协议（8位）</tspan></tspan></text></g></g><g id="SvgjsG1309" transform="translate(150.32855810234548,302.06634041859064)"><path id="SvgjsPath1310" d="M 0 0L 559.3560767590618 0L 559.3560767590618 31.970943569258818L 0 31.970943569258818Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1311"><text id="SvgjsText1312" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="540px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="5.360471784629409" transform="rotate(0)"><tspan id="SvgjsTspan1313" dy="16" x="280"><tspan id="SvgjsTspan1314" style="text-decoration:;">首部校验和（16位）</tspan></tspan></text></g></g><g id="SvgjsG1315" transform="translate(150.32855810234548,332.4387368093865)"><path id="SvgjsPath1316" d="M 0 0L 559.3560767590618 0L 559.3560767590618 43.16077381849941L 0 43.16077381849941Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1317"><text id="SvgjsText1318" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="540px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="10.955386909249704" transform="rotate(0)"><tspan id="SvgjsTspan1319" dy="16" x="280"><tspan id="SvgjsTspan1320" style="text-decoration:;">源 IP 地址（32位）</tspan></tspan></text></g></g><g id="SvgjsG1321" transform="translate(150.32855810234548,375.5995106278859)"><path id="SvgjsPath1322" d="M 0 0L 559.3560767590618 0L 559.3560767590618 43.16077381849941L 0 43.16077381849941Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1323"><text id="SvgjsText1324" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="540px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="10.955386909249704" transform="rotate(0)"><tspan id="SvgjsTspan1325" dy="16" x="280"><tspan id="SvgjsTspan1326" style="text-decoration:;">目标 IP 地址（32位）</tspan></tspan></text></g></g><g id="SvgjsG1327" transform="translate(150.32855810234548,416.36246367869086)"><path id="SvgjsPath1328" d="M 0 0L 559.3560767590618 0L 559.3560767590618 31.970943569258818L 0 31.970943569258818Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1329"><text id="SvgjsText1330" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="540px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="5.360471784629409" transform="rotate(0)"><tspan id="SvgjsTspan1331" dy="16" x="280"><tspan id="SvgjsTspan1332" style="text-decoration:;">选项</tspan></tspan></text></g></g><g id="SvgjsG1333" transform="translate(44.006596481876386,155.00000000000006)"><path id="SvgjsPath1334" d="M 100 0Q 91 0 91 9L 91 135Q 91 144 78 144Q 91 144 91 153L 91 279Q 91 288 100 288" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1335" d="M 0 0L 100 0L 100 288L 0 288Z" stroke="none" fill="none"></path><g id="SvgjsG1336"><text id="SvgjsText1337" font-family="微软雅黑" text-anchor="end" font-size="13px" width="73px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="133.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1338" transform="translate(25.006596481876386,283.9237057220708)"><path id="SvgjsPath1339" d="M 0 0L 89 0L 89 31L 0 31Z" stroke="rgba(201,190,204,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1340"><text id="SvgjsText1341" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.875" transform="rotate(0)"><tspan id="SvgjsTspan1342" dy="16" x="44.5"><tspan id="SvgjsTspan1343" style="text-decoration:;">IP 头部</tspan></tspan></text></g></g><g id="SvgjsG1344" transform="translate(460.95758732597517,280.66317290661544)"><path id="SvgjsPath1345" d="M 0 0L 44.583030227016025 0L 44.583030227016025 18.028853757774755L 0 18.028853757774755Z" stroke="rgba(132,155,190,1)" stroke-width="2" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1346"><text id="SvgjsText1347" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="25px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-1.6105731211126226" transform="rotate(0)"><tspan id="SvgjsTspan1348" dy="16" x="22.5"><tspan id="SvgjsTspan1349" style="text-decoration:;">TCP</tspan></tspan></text></g></g><g id="SvgjsG1350"><path id="SvgjsPath1351" d="M459.9710141929588 289.5142796911779C 311.71875 265 174.71875 239 151.89116957723985 446.73909124280556" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1352)"></path></g><g id="SvgjsG1354" transform="translate(420.8712020255864,639.9237057220707)"><path id="SvgjsPath1355" d="M 0 0L 61.86780383795308 0L 61.86780383795308 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1356"><text id="SvgjsText1357" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1358" dy="16" x="31"><tspan id="SvgjsTspan1359" style="text-decoration:;">sp</tspan></tspan></text></g></g><g id="SvgjsG1360" transform="translate(253.11107409381668,639.9237057220707)"><path id="SvgjsPath1361" d="M 0 0L 55.539445628997896 0L 55.539445628997896 35L 0 35Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#f5f5f5"></path><g id="SvgjsG1362"><text id="SvgjsText1363" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="36px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan1364" dy="16" x="28"><tspan id="SvgjsTspan1365" style="text-decoration:;">sp</tspan></tspan></text></g></g><g id="SvgjsG1366" transform="translate(150.32855810234548,25.000000000000057)"><path id="SvgjsPath1367" d="M0 0L559.3560767590618 0L559.3560767590618 43.329 L0 43.329Z" stroke="rgba(133,175,110,1)" stroke-width="1" fill-opacity="1" fill="#d6e9d5"></path><path id="SvgjsPath1368" d="M0 43.329L559.3560767590618 43.329L559.3560767590618 86.658 L0 86.658Z" stroke="rgba(133,175,110,1)" stroke-width="1" fill-opacity="1" fill="#d6e9d5"></path><path id="SvgjsPath1369" d="M0 86.658L559.3560767590618 86.658L559.3560767590618 130 L0 130Z" stroke="rgba(133,175,110,1)" stroke-width="1" fill-opacity="1" fill="#d6e9d5"></path><g id="SvgjsG1370"><text id="SvgjsText1371" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="560px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="11.0395" transform="rotate(0)"><tspan id="SvgjsTspan1372" dy="16" x="280"><tspan id="SvgjsTspan1373" style="text-decoration:;">接收方 MAC 地址（48位）</tspan></tspan></text></g><g id="SvgjsG1374"><text id="SvgjsText1375" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="560px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="54.3685" transform="rotate(0)"><tspan id="SvgjsTspan1376" dy="16" x="280"><tspan id="SvgjsTspan1377" style="text-decoration:;">发送方 MAC 地址（48位）</tspan></tspan></text></g><g id="SvgjsG1378"><text id="SvgjsText1379" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="560px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="97.70400000000001" transform="rotate(0)"><tspan id="SvgjsTspan1380" dy="16" x="280"><tspan id="SvgjsTspan1381" style="text-decoration:;">协议类型（16位）</tspan></tspan></text></g></g><g id="SvgjsG1382" transform="translate(491.7486007462687,125.40871692922241)"><path id="SvgjsPath1383" d="M 0 0L 37.712153518123614 0L 37.712153518123614 20L 0 20Z" stroke="rgba(201,190,204,1)" stroke-width="2" fill-opacity="1" fill="#e3d4e7"></path><g id="SvgjsG1384"><text id="SvgjsText1385" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="18px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"><tspan id="SvgjsTspan1386" dy="16" x="19"><tspan id="SvgjsTspan1387" style="text-decoration:;">IP</tspan></tspan></text></g></g><g id="SvgjsG1388" transform="translate(44.006596481876386,24.999999999999943)"><path id="SvgjsPath1389" d="M 100 0Q 91 0 91 9L 91 56.00000000000006Q 91 65.00000000000006 78 65.00000000000006Q 91 65.00000000000006 91 74.00000000000006L 91 121.00000000000011Q 91 130.0000000000001 100 130.0000000000001" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1390" d="M 0 0L 100 0L 100 130.0000000000001L 0 130.0000000000001Z" stroke="none" fill="none"></path><g id="SvgjsG1391"><text id="SvgjsText1392" font-family="微软雅黑" text-anchor="end" font-size="13px" width="73px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="end" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="54.37500000000006" transform="rotate(0)"></text></g></g><g id="SvgjsG1393" transform="translate(25.006596481876386,74.5)"><path id="SvgjsPath1394" d="M 0 0L 89 0L 89 31L 0 31Z" stroke="rgba(133,175,110,1)" stroke-width="2" fill-opacity="1" fill="#d6e9d5"></path><g id="SvgjsG1395"><text id="SvgjsText1396" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.875" transform="rotate(0)"><tspan id="SvgjsTspan1397" dy="16" x="44.5"><tspan id="SvgjsTspan1398" style="text-decoration:;">MAC 头部</tspan></tspan></text></g></g></svg>
  <p style="text-align: center; color: #888;">（组装后的网络包示意图）</p>
</div>

现在，带着众多头部的数据包，终于准备要出门了。

## 出口：网卡

网络包只是存放在内存中的一串二进制数字信息，没有办法直接发送给对方。因此，我们需要将**数字信息转换为电信号**，才能在网线上传输，也就是说，这才是真正的数据发送过程。

负责执行这一操作的是**网卡**，要控制网卡还需要靠**网卡驱动程序**。

网卡驱动获取网络包之后，会将其**复制**到网卡内的缓存区中，接着会在其**开头加上报头和起始帧分界符，在末尾加上用于检测错误的帧校验序列**。

<div style="text-align: center;">
  <svg id="SvgjsSvg1013" width="671" height="290" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1007"></defs><g id="SvgjsG1008" transform="translate(25,49)"><path id="SvgjsPath1009" d="M 0 16L 16 0L 16 10.56L 141 10.56L 141 21.44L 16 21.44L 16 32L 0 16Z" stroke="rgba(219,159,155,1)" stroke-width="1" fill-opacity="1" fill="#fbcfcb"></path><g id="SvgjsG1010"><text id="SvgjsText1011" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="141px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="5.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1012" transform="translate(46,25)"><path id="SvgjsPath1013" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1014"><text id="SvgjsText1015" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1016" dy="16" x="60"><tspan id="SvgjsTspan1017" style="text-decoration:;">网络包传输方向</tspan></tspan></text></g></g><g id="SvgjsG1018" transform="translate(25,115)"><path id="SvgjsPath1019" d="M 0 0L 141 0L 141 41L 0 41Z" stroke-dasharray="10,6" stroke="rgba(122,145,177,1)" stroke-width="2" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1020"><text id="SvgjsText1021" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="121px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.875" transform="rotate(0)"><tspan id="SvgjsTspan1022" dy="16" x="70.5"><tspan id="SvgjsTspan1023" style="text-decoration:;">报头和起始帧分界符</tspan></tspan></text></g></g><g id="SvgjsG1024" transform="translate(178,115)"><path id="SvgjsPath1025" d="M 0 0L 84 0L 84 41L 0 41Z" stroke="rgba(122,145,177,1)" stroke-width="2" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1026"><text id="SvgjsText1027" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="64px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.875" transform="rotate(0)"><tspan id="SvgjsTspan1028" dy="16" x="42"><tspan id="SvgjsTspan1029" style="text-decoration:;">MAC 头部</tspan></tspan></text></g></g><g id="SvgjsG1030" transform="translate(274,115)"><path id="SvgjsPath1031" d="M 0 0L 84 0L 84 41L 0 41Z" stroke="rgba(122,145,177,1)" stroke-width="2" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1032"><text id="SvgjsText1033" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="64px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.875" transform="rotate(0)"><tspan id="SvgjsTspan1034" dy="16" x="42"><tspan id="SvgjsTspan1035" style="text-decoration:;">IP 头部</tspan></tspan></text></g></g><g id="SvgjsG1036" transform="translate(370,115)"><path id="SvgjsPath1037" d="M 0 0L 84 0L 84 41L 0 41Z" stroke="rgba(122,145,177,1)" stroke-width="2" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1038"><text id="SvgjsText1039" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="64px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.875" transform="rotate(0)"><tspan id="SvgjsTspan1040" dy="16" x="42"><tspan id="SvgjsTspan1041" style="text-decoration:;">TCP 头部</tspan></tspan></text></g></g><g id="SvgjsG1042" transform="translate(466,115)"><path id="SvgjsPath1043" d="M 0 0L 84 0L 84 41L 0 41Z" stroke="rgba(122,145,177,1)" stroke-width="2" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1044"><text id="SvgjsText1045" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="64px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.875" transform="rotate(0)"><tspan id="SvgjsTspan1046" dy="16" x="42"><tspan id="SvgjsTspan1047" style="text-decoration:;">数据块</tspan></tspan></text></g></g><g id="SvgjsG1048" transform="translate(562,115)"><path id="SvgjsPath1049" d="M 0 0L 84 0L 84 41L 0 41Z" stroke-dasharray="10,6" stroke="rgba(122,145,177,1)" stroke-width="2" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1050"><text id="SvgjsText1051" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="64px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.875" transform="rotate(0)"><tspan id="SvgjsTspan1052" dy="16" x="42"><tspan id="SvgjsTspan1053" style="text-decoration:;">FCS</tspan></tspan></text></g></g><g id="SvgjsG1054" transform="translate(448,58)"><path id="SvgjsPath1055" d="M 0 0L 120 0L 120 29L 0 29Z" stroke="none" fill="none"></path><g id="SvgjsG1056"><text id="SvgjsText1057" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="3.875" transform="rotate(0)"><tspan id="SvgjsTspan1058" dy="16" x="60"><tspan id="SvgjsTspan1059" style="text-decoration:;">应用程序生成</tspan></tspan></text></g></g><g id="SvgjsG1060"><path id="SvgjsPath1061" d="M220 157L220 174L220 174L220 191" stroke-dasharray="8,5" stroke="#323232" stroke-width="1" fill="none"></path></g><g id="SvgjsG1062" transform="translate(160,190)"><path id="SvgjsPath1063" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1064"><text id="SvgjsText1065" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1066" dy="16" x="60"><tspan id="SvgjsTspan1067" style="text-decoration:;">MAC 负责的部分</tspan></tspan></text></g></g><g id="SvgjsG1068"><path id="SvgjsPath1069" d="M508 114L508 101L508 101L508 88" stroke-dasharray="8,5" stroke="#323232" stroke-width="1" fill="none"></path></g><g id="SvgjsG1070"><path id="SvgjsPath1071" d="M316 157L316 173L316 173L316 189" stroke-dasharray="8,5" stroke="#323232" stroke-width="1" fill="none"></path></g><g id="SvgjsG1072" transform="translate(256,190)"><path id="SvgjsPath1073" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1074"><text id="SvgjsText1075" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1076" dy="16" x="60"><tspan id="SvgjsTspan1077" style="text-decoration:;">IP 负责的部分</tspan></tspan></text></g></g><g id="SvgjsG1078"><path id="SvgjsPath1079" d="M412 157L412 173L412 173L412 189" stroke-dasharray="8,5" stroke="#323232" stroke-width="1" fill="none"></path></g><g id="SvgjsG1080" transform="translate(352,190)"><path id="SvgjsPath1081" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1082"><text id="SvgjsText1083" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1084" dy="16" x="60"><tspan id="SvgjsTspan1085" style="text-decoration:;">TCP 负责的部分</tspan></tspan></text></g></g><g id="SvgjsG1086"><path id="SvgjsPath1087" d="M95.5 157L95.5 241L604 241L604 157" stroke-dasharray="8,5" stroke="#323232" stroke-width="1" fill="none"></path></g><g id="SvgjsG1088" transform="translate(274,245)"><path id="SvgjsPath1089" d="M 0 0L 115 0L 115 20L 0 20Z" stroke="none" fill="none"></path><g id="SvgjsG1090"><text id="SvgjsText1091" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="115px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"><tspan id="SvgjsTspan1092" dy="16" x="57.5"><tspan id="SvgjsTspan1093" style="text-decoration:;">网卡负责的部分</tspan></tspan></text></g></g></svg>
  <p style="text-align: center; color: #888;">（网卡驱动处理后的网络包）</p>
</div>

* 起始帧分界符是一个用来表示包起始位置的标记
* 末尾的 `FCS`（帧校验序列）用来检查包传输过程是否有损坏

最后网卡会将包转为电信号，通过网线发送出去。

## 送别者：交换机

交换机的设计是将网络包**原样**转发到目的地。交换机工作在 MAC 层，也称为**二层网络设备**。

### 包接收操作

首先，电信号到达网线接口，交换机里的模块进行接收，接下来交换机里的模块将电信号转换为数字信号。

然后通过包末尾的 `FCS` 校验错误，如果没问题则放到缓冲区。这部分操作基本和计算机的网卡相同，但交换机的工作方式和网卡不同。

计算机的网卡本身具有 MAC 地址，并通过核对收到的包的接收方 MAC 地址判断是不是发给自己的，如果不是发给自己的则丢弃；相对地，交换机的端口不核对接收方 MAC 地址，而是直接接收所有的包并存放到缓冲区中。因此，和网卡不同，**交换机的端口不具有 MAC 地址**。

将包存入缓冲区后，接下来需要查询一下这个包的接收方 MAC 地址是否已经在 MAC 地址表中有记录了。

交换机的 MAC 地址表主要包含两个信息：

* 一个是设备的 MAC 地址。
* 另一个是该设备连接在交换机的哪个端口上。

<div style="text-align: center;">
  <svg id="SvgjsSvg1220" width="494" height="399" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1221"></defs><g id="SvgjsG1222" transform="translate(25,25)"><path id="SvgjsPath1223" d="M 0 0L 444 0L 444 300L 0 300Z" stroke-dasharray="10,6" stroke="rgba(209,188,104,1)" stroke-width="2" fill-opacity="1" fill="#fff3ce"></path><g id="SvgjsG1224"><text id="SvgjsText1225" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="424px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="139.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1226" transform="translate(125.5,309)"><path id="SvgjsPath1227" d="M 0 0L 243 0L 243 42L 0 42Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#bac8d3"></path><g id="SvgjsG1228"><text id="SvgjsText1229" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="223px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="10.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1230" transform="translate(76,27)"><path id="SvgjsPath1231" d="M 0 0L 370 0L 370 125L 0 125Z" stroke="none" fill="none"></path><g id="SvgjsG1232"><text id="SvgjsText1233" font-family="微软雅黑" text-anchor="start" font-size="13px" width="370px" fill="#323232" font-weight="400" align="middle" lineHeight="150%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.25" transform="rotate(0)"><tspan id="SvgjsTspan1234" dy="19" x="0"><tspan id="SvgjsTspan1235" style="text-decoration:;">交换机内部有一张 MAC 地址与网线端口的映射表。</tspan></tspan><tspan id="SvgjsTspan1236" dy="19" x="0"><tspan id="SvgjsTspan1237" style="text-decoration:;">当接收到包时，会将相应的端口号和发送 MAC 地址写入表中，</tspan></tspan><tspan id="SvgjsTspan1238" dy="19" x="0"><tspan id="SvgjsTspan1239" style="text-decoration:;">这样就可以根据地址判断出该设备连接在哪个端口上了。</tspan></tspan><tspan id="SvgjsTspan1240" dy="19" x="0"><tspan id="SvgjsTspan1241" style="text-decoration:;"> </tspan></tspan><tspan id="SvgjsTspan1242" dy="19" x="0"><tspan id="SvgjsTspan1243" style="text-decoration:;">交换机就是根据这些信息判断，应该把包转发到哪里的。</tspan></tspan></text></g></g><g id="SvgjsG1244" transform="translate(73,155)"><path id="SvgjsPath1245" d="M0 0L167.3184 0L167.3184 28.200000000000003 L0 28.200000000000003Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1246" d="M167.3184 0L254.5968 0L254.5968 28.200000000000003 L167.3184 28.200000000000003Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1247" d="M254.5968 0L348 0L348 28.200000000000003 L254.5968 28.200000000000003Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1248" d="M0 28.200000000000003L167.3184 28.200000000000003L167.3184 56.400000000000006 L0 56.400000000000006Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1249" d="M167.3184 28.200000000000003L254.5968 28.200000000000003L254.5968 56.400000000000006 L167.3184 56.400000000000006Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1250" d="M254.5968 28.200000000000003L348 28.200000000000003L348 56.400000000000006 L254.5968 56.400000000000006Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1251" d="M0 56.400000000000006L167.3184 56.400000000000006L167.3184 84.60000000000001 L0 84.60000000000001Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1252" d="M167.3184 56.400000000000006L254.5968 56.400000000000006L254.5968 84.60000000000001 L167.3184 84.60000000000001Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1253" d="M254.5968 56.400000000000006L348 56.400000000000006L348 84.60000000000001 L254.5968 84.60000000000001Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1254" d="M0 84.6L167.3184 84.6L167.3184 112.8 L0 112.8Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1255" d="M167.3184 84.6L254.5968 84.6L254.5968 112.8 L167.3184 112.8Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1256" d="M254.5968 84.6L348 84.6L348 112.8 L254.5968 112.8Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1257" d="M0 112.80000000000001L167.3184 112.80000000000001L167.3184 141 L0 141Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1258" d="M167.3184 112.80000000000001L254.5968 112.80000000000001L254.5968 141 L167.3184 141Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1259" d="M254.5968 112.80000000000001L348 112.80000000000001L348 141 L254.5968 141Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1260"><text id="SvgjsText1261" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="168px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="0.10000000000000142" transform="rotate(0)"><tspan id="SvgjsTspan1262" dy="20" x="84"><tspan id="SvgjsTspan1263" style="text-decoration:;">MAC 地址表</tspan></tspan></text></g><g id="SvgjsG1264"><text id="SvgjsText1265" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="88px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="0.10000000000000142" transform="rotate(0)"><tspan id="SvgjsTspan1266" dy="20" x="211.3184"><tspan id="SvgjsTspan1267" style="text-decoration:;">端口</tspan></tspan></text></g><g id="SvgjsG1268"><text id="SvgjsText1269" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="94px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="0.10000000000000142" transform="rotate(0)"><tspan id="SvgjsTspan1270" dy="20" x="301.59680000000003"><tspan id="SvgjsTspan1271" style="text-decoration:;">控制信息</tspan></tspan></text></g><g id="SvgjsG1272"><text id="SvgjsText1273" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="168px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="28.300000000000004" transform="rotate(0)"><tspan id="SvgjsTspan1274" dy="20" x="84"><tspan id="SvgjsTspan1275" style="text-decoration:;">00-60-97-A5-43-3C</tspan></tspan></text></g><g id="SvgjsG1276"><text id="SvgjsText1277" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="88px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="28.300000000000004" transform="rotate(0)"><tspan id="SvgjsTspan1278" dy="20" x="211.3184"><tspan id="SvgjsTspan1279" style="text-decoration:;">1</tspan></tspan></text></g><g id="SvgjsG1280"><text id="SvgjsText1281" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="94px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="28.300000000000004" transform="rotate(0)"><tspan id="SvgjsTspan1282" dy="20" x="301.59680000000003"><tspan id="SvgjsTspan1283" style="text-decoration:;">...</tspan></tspan></text></g><g id="SvgjsG1284"><text id="SvgjsText1285" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="168px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="56.50000000000001" transform="rotate(0)"><tspan id="SvgjsTspan1286" dy="20" x="84"><tspan id="SvgjsTspan1287" style="text-decoration:;">00-00-C0-16-AE-FD</tspan></tspan></text></g><g id="SvgjsG1288"><text id="SvgjsText1289" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="88px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="56.50000000000001" transform="rotate(0)"><tspan id="SvgjsTspan1290" dy="20" x="211.3184"><tspan id="SvgjsTspan1291" style="text-decoration:;">2</tspan></tspan></text></g><g id="SvgjsG1292"><text id="SvgjsText1293" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="94px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="56.50000000000001" transform="rotate(0)"><tspan id="SvgjsTspan1294" dy="20" x="301.59680000000003"><tspan id="SvgjsTspan1295" style="text-decoration:;">...</tspan></tspan></text></g><g id="SvgjsG1296"><text id="SvgjsText1297" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="168px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="84.69999999999999" transform="rotate(0)"><tspan id="SvgjsTspan1298" dy="20" x="84"><tspan id="SvgjsTspan1299" style="text-decoration:;">00-02-B3-1C-9C-F9</tspan></tspan></text></g><g id="SvgjsG1300"><text id="SvgjsText1301" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="88px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="84.69999999999999" transform="rotate(0)"><tspan id="SvgjsTspan1302" dy="20" x="211.3184"><tspan id="SvgjsTspan1303" style="text-decoration:;">3</tspan></tspan></text></g><g id="SvgjsG1304"><text id="SvgjsText1305" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="94px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="84.69999999999999" transform="rotate(0)"><tspan id="SvgjsTspan1306" dy="20" x="301.59680000000003"><tspan id="SvgjsTspan1307" style="text-decoration:;">...</tspan></tspan></text></g><g id="SvgjsG1308"><text id="SvgjsText1309" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="168px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="112.9" transform="rotate(0)"><tspan id="SvgjsTspan1310" dy="20" x="84"><tspan id="SvgjsTspan1311" style="text-decoration:;">...</tspan></tspan></text></g><g id="SvgjsG1312"><text id="SvgjsText1313" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="88px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="112.9" transform="rotate(0)"><tspan id="SvgjsTspan1314" dy="20" x="211.3184"><tspan id="SvgjsTspan1315" style="text-decoration:;">...</tspan></tspan></text></g><g id="SvgjsG1316"><text id="SvgjsText1317" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="94px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="112.9" transform="rotate(0)"><tspan id="SvgjsTspan1318" dy="20" x="301.59680000000003"><tspan id="SvgjsTspan1319" style="text-decoration:;">...</tspan></tspan></text></g></g><g id="SvgjsG1320" transform="translate(185.375,354)"><path id="SvgjsPath1321" d="M 0 0L 121 0L 121 20L 0 20Z" stroke="none" fill="none"></path><g id="SvgjsG1322"><text id="SvgjsText1323" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="121px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"><tspan id="SvgjsTspan1324" dy="16" x="60.5"><tspan id="SvgjsTspan1325" style="text-decoration:;">交换机</tspan></tspan></text></g></g><g id="SvgjsG1326" transform="translate(139.375,321)"><path id="SvgjsPath1327" d="M 0 0L 33.5 0L 33.5 20L 0 20Z" stroke="rgba(134,155,185,1)" stroke-width="2" fill-opacity="1" fill="#d9e8fc"></path><g id="SvgjsG1328"><text id="SvgjsText1329" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="14px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"></text></g></g><g id="SvgjsG1330" transform="translate(185.375,321)"><path id="SvgjsPath1331" d="M 0 0L 33.5 0L 33.5 20L 0 20Z" stroke="rgba(134,155,185,1)" stroke-width="2" fill-opacity="1" fill="#d9e8fc"></path><g id="SvgjsG1332"><text id="SvgjsText1333" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="14px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"></text></g></g><g id="SvgjsG1334" transform="translate(231.375,321)"><path id="SvgjsPath1335" d="M 0 0L 33.5 0L 33.5 20L 0 20Z" stroke="rgba(134,155,185,1)" stroke-width="2" fill-opacity="1" fill="#d9e8fc"></path><g id="SvgjsG1336"><text id="SvgjsText1337" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="14px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"></text></g></g><g id="SvgjsG1338" transform="translate(275.125,321)"><path id="SvgjsPath1339" d="M 0 0L 33.5 0L 33.5 20L 0 20Z" stroke="rgba(134,155,185,1)" stroke-width="2" fill-opacity="1" fill="#d9e8fc"></path><g id="SvgjsG1340"><text id="SvgjsText1341" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="14px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"></text></g></g><g id="SvgjsG1342" transform="translate(321.125,321)"><path id="SvgjsPath1343" d="M 0 0L 33.5 0L 33.5 20L 0 20Z" stroke="rgba(134,155,185,1)" stroke-width="2" fill-opacity="1" fill="#d9e8fc"></path><g id="SvgjsG1344"><text id="SvgjsText1345" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="14px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"></text></g></g></svg>
  <p style="text-align: center; color: #888;">（MAC 地址与网线端口映射表）</p>
</div>

举个例子，如果收到的包的接收方 MAC 地址为 `00-02-B3-1C-9C-F9`，则与图中表中的第 3 行匹配，根据端口列的信息，可知这个地址位于 `3` 号端口上，然后就可以通过交换电路将包发送到相应的端口了。

所以，**交换机根据 MAC 地址表查找 MAC 地址，然后将信号发送到相应的端口**。

> 当 MAC 地址表找不到指定的 MAC 地址会怎么样？

地址表中找不到指定的 MAC 地址。这可能是因为具有该地址的设备还没有向交换机发送过包，或者这个设备一段时间没有工作导致地址被从地址表中删除了。

这种情况下，交换机无法判断应该把包转发到哪个端口，只能将包转发到除了源端口之外的所有端口上，无论该设备连接在哪个端口上都能收到这个包。

这样做不会产生什么问题，因为以太网的设计本来就是将包发送到整个网络的，然后**只有相应的接收者才接收包，而其他设备则会忽略这个包**。

> 这样做会发送多余的包，会不会造成网络拥塞呢？

其实完全不用过于担心，因为发送了包之后目标设备会作出响应，只要返回了响应包，交换机就可以将它的地址写入 MAC 地址表，下次也就不需要把包发到所有端口了。

局域网中每秒可以传输上千个包，多出一两个包并无大碍。

此外，如果接收方 MAC 地址是一个**广播地址**，那么交换机会将包发送到除源端口之外的所有端口。

以下两个属于广播地址：

* MAC 地址中的 `FF:FF:FF:FF:FF:FF`
* IP 地址中的 `255.255.255.255`

## 最终出口：路由器

### 路由器与交换机的区别

网络包经过交换机之后，现在到达了**路由器**，并在此被转发到下一个路由器或目标设备。

这一步转发的工作原理和交换机类似，也是通过查表判断包转发的目标。

不过在具体的操作过程上，路由器和交换机是有区别的：

* 因为**路由器**是基于 IP 设计的，俗称**三层**网络设备，路由器的各个端口都具有 MAC 地址和 IP 地址；
* 而**交换机**是基于以太网设计的，俗称**二层**网络设备，交换机的端口不具有 MAC 地址。

::: tip 小贴士
现在的很多家用路由器其实都有了交换机的功能。交换机可以简单理解成一个设备，通常有 2 个网口以上。三台电脑网线接到这个设备，这三台电脑就可以互相通信了。
:::

### 路由器基本原理

路由器的端口具有 MAC 地址，因此它就能够成为以太网的发送方和接收方；同时还具有 IP 地址，从这个意义上来说，它和计算机的网卡是一样的。

当转发包时，首先路由器端口会接收发给自己的以太网包，然后**路由表**查询转发目标，再由相应的端口作为发送方将以太网包发送出去。

### 路由器的包接收操作

首先，电信号到达网线接口部分，路由器中的模块会将电信号转成数字信号，然后通过包末尾的 `FCS` 进行错误校验。

如果没问题则检查 MAC 头部中的**接收方 MAC 地址**，看看是不是发给自己的包，如果是就放到接收缓冲区中，否则就丢弃这个包。

总的来说，路由器的端口都具有 MAC 地址，只接收与自身地址匹配的包，遇到不匹配的包则直接丢弃。

### 查询路由表确定输出端口

完成包接收操作之后，路由器就会**去掉**包开头的 MAC 头部。

**MAC 头部的作用就是将包送达路由器**，其中的接收方 MAC 地址就是路由器端口的 MAC 地址。因此，当包到达路由器之后，MAC 头部的任务就完成了，于是 MAC 头部就会**被丢弃**。

接下来，路由器会根据 MAC 头部后方的 `IP` 头部中的内容进行包的转发操作。

转发操作分为几个阶段，首先是查询**路由表**判断转发目标。

<div style="text-align: center;">
  <svg id="SvgjsSvg1014" width="711" height="437.390625" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1007"><pattern id="SvgjsPattern1134" x="0" y="0" width="55" height="55" patternUnits="userSpaceOnUse"><image id="SvgjsImage1135" xlink:href="https://iconsapi.com/5ee849c2e4b01754b3cc8012.svg" width="55" height="55" preserveAspectRatio="none" crossOrigin="anonymous" x="0" y="0"></image></pattern><pattern id="SvgjsPattern1138" x="0" y="0" width="75.8125" height="75.8125" patternUnits="userSpaceOnUse"><image id="SvgjsImage1139" xlink:href="https://iconsapi.com/5ee28287e4b0b788a9352c00.svg" width="75.8125" height="75.8125" preserveAspectRatio="none" crossOrigin="anonymous" x="0" y="0"></image></pattern><pattern id="SvgjsPattern1142" x="0" y="0" width="62" height="62" patternUnits="userSpaceOnUse"><image id="SvgjsImage1143" xlink:href="https://iconsapi.com/5ee268b1e4b0b788a9338b53.svg" width="62" height="62" preserveAspectRatio="none" crossOrigin="anonymous" x="0" y="0"></image></pattern><pattern id="SvgjsPattern1146" x="0" y="0" width="62" height="62" patternUnits="userSpaceOnUse"><image id="SvgjsImage1147" xlink:href="https://iconsapi.com/5ee268b1e4b0b788a9338b53.svg" width="62" height="62" preserveAspectRatio="none" crossOrigin="anonymous" x="0" y="0"></image></pattern><marker id="SvgjsMarker1150" markerWidth="14" markerHeight="10" refX="4" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1151" d="M14,0 L0,5 L14,10 L14,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1152" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1153" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1156" markerWidth="14" markerHeight="10" refX="4" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1157" d="M14,0 L0,5 L14,10 L14,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1158" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1159" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1180" markerWidth="14" markerHeight="10" refX="4" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1181" d="M14,0 L0,5 L14,10 L14,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1182" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1183" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker></defs><g id="SvgjsG1008"><path id="SvgjsPath1009" d="M307 285L537.5527586066689 169.75944957830848" stroke-dasharray="3,3" stroke="#323232" stroke-width="1" fill="none"></path></g><g id="SvgjsG1010"><path id="SvgjsPath1011" d="M305 282L36.14517384305077 169.31389135598312" stroke-dasharray="3,3" stroke="#323232" stroke-width="1" fill="none"></path></g><g id="SvgjsG1012" transform="translate(242.75,226)"><path id="SvgjsPath1013" d="M 0 0L 88.5 0L 88.5 40L 0 40Z" stroke="rgba(134,155,185,1)" stroke-width="1" fill-opacity="1" fill="#d9e8fc"></path><g id="SvgjsG1014"><text id="SvgjsText1015" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.875" transform="rotate(0)"><tspan id="SvgjsTspan1016" dy="16" x="44.5"><tspan id="SvgjsTspan1017" style="text-decoration:;">互联网</tspan></tspan><tspan id="SvgjsTspan1018" dy="16" x="44.5"><tspan id="SvgjsTspan1019" style="text-decoration:;">接入路由器</tspan></tspan></text></g></g><g id="SvgjsG1020" transform="translate(35,60.56603773584905)"><path id="SvgjsPath1021" d="M0 0L100.80000000000001 0L100.80000000000001 36.47433962264151 L0 36.47433962264151Z" stroke="rgba(209,188,104,1)" stroke-width="1" fill-opacity="1" fill="#fff3ce"></path><path id="SvgjsPath1022" d="M100.80000000000001 0L201.60000000000002 0L201.60000000000002 36.47433962264151 L100.80000000000001 36.47433962264151Z" stroke="rgba(209,188,104,1)" stroke-width="1" fill-opacity="1" fill="#fff3ce"></path><path id="SvgjsPath1023" d="M201.60000000000002 0L302.40000000000003 0L302.40000000000003 36.47433962264151 L201.60000000000002 36.47433962264151Z" stroke="rgba(209,188,104,1)" stroke-width="1" fill-opacity="1" fill="#fff3ce"></path><path id="SvgjsPath1024" d="M302.4 0L403.25039999999996 0L403.25039999999996 36.47433962264151 L302.4 36.47433962264151Z" stroke="rgba(209,188,104,1)" stroke-width="1" fill-opacity="1" fill="#fff3ce"></path><path id="SvgjsPath1025" d="M403.2504 0L504 0L504 36.47433962264151 L403.2504 36.47433962264151Z" stroke="rgba(209,188,104,1)" stroke-width="1" fill-opacity="1" fill="#fff3ce"></path><path id="SvgjsPath1026" d="M0 36.47433962264151L100.80000000000001 36.47433962264151L100.80000000000001 72.94867924528302 L0 72.94867924528302Z" stroke="rgba(209,188,104,1)" stroke-width="1" fill-opacity="1" fill="#fff3ce"></path><path id="SvgjsPath1027" d="M100.80000000000001 36.47433962264151L201.60000000000002 36.47433962264151L201.60000000000002 72.94867924528302 L100.80000000000001 72.94867924528302Z" stroke="rgba(209,188,104,1)" stroke-width="1" fill-opacity="1" fill="#fff3ce"></path><path id="SvgjsPath1028" d="M201.60000000000002 36.47433962264151L302.40000000000003 36.47433962264151L302.40000000000003 72.94867924528302 L201.60000000000002 72.94867924528302Z" stroke="rgba(209,188,104,1)" stroke-width="1" fill-opacity="1" fill="#fff3ce"></path><path id="SvgjsPath1029" d="M302.4 36.47433962264151L403.25039999999996 36.47433962264151L403.25039999999996 72.94867924528302 L302.4 72.94867924528302Z" stroke="rgba(209,188,104,1)" stroke-width="1" fill-opacity="1" fill="#fff3ce"></path><path id="SvgjsPath1030" d="M403.2504 36.47433962264151L504 36.47433962264151L504 72.94867924528302 L403.2504 72.94867924528302Z" stroke="rgba(209,188,104,1)" stroke-width="1" fill-opacity="1" fill="#fff3ce"></path><path id="SvgjsPath1031" d="M0 72.95962264150943L100.80000000000001 72.95962264150943L100.80000000000001 109.43396226415095 L0 109.43396226415095Z" stroke="rgba(209,188,104,1)" stroke-width="1" fill-opacity="1" fill="#fff3ce"></path><path id="SvgjsPath1032" d="M100.80000000000001 72.95962264150943L201.60000000000002 72.95962264150943L201.60000000000002 109.43396226415095 L100.80000000000001 109.43396226415095Z" stroke="rgba(209,188,104,1)" stroke-width="1" fill-opacity="1" fill="#fff3ce"></path><path id="SvgjsPath1033" d="M201.60000000000002 72.95962264150943L302.40000000000003 72.95962264150943L302.40000000000003 109.43396226415095 L201.60000000000002 109.43396226415095Z" stroke="rgba(209,188,104,1)" stroke-width="1" fill-opacity="1" fill="#fff3ce"></path><path id="SvgjsPath1034" d="M302.4 72.95962264150943L403.25039999999996 72.95962264150943L403.25039999999996 109.43396226415095 L302.4 109.43396226415095Z" stroke="rgba(209,188,104,1)" stroke-width="1" fill-opacity="1" fill="#fff3ce"></path><path id="SvgjsPath1035" d="M403.2504 72.95962264150943L504 72.95962264150943L504 109.43396226415095 L403.2504 109.43396226415095Z" stroke="rgba(209,188,104,1)" stroke-width="1" fill-opacity="1" fill="#fff3ce"></path><g id="SvgjsG1036"><text id="SvgjsText1037" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.612169811320754" transform="rotate(0)"><tspan id="SvgjsTspan1038" dy="16" x="50.5"><tspan id="SvgjsTspan1039" style="text-decoration:;">10.10.1.0</tspan></tspan></text></g><g id="SvgjsG1040"><text id="SvgjsText1041" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.612169811320754" transform="rotate(0)"><tspan id="SvgjsTspan1042" dy="16" x="151.3"><tspan id="SvgjsTspan1043" style="text-decoration:;">255.255.255.0</tspan></tspan></text></g><g id="SvgjsG1044"><text id="SvgjsText1045" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.612169811320754" transform="rotate(0)"><tspan id="SvgjsTspan1046" dy="16" x="252.10000000000002"><tspan id="SvgjsTspan1047" style="text-decoration:;">— —</tspan></tspan></text></g><g id="SvgjsG1048"><text id="SvgjsText1049" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.612169811320754" transform="rotate(0)"><tspan id="SvgjsTspan1050" dy="16" x="352.9"><tspan id="SvgjsTspan1051" style="text-decoration:;">eth2</tspan></tspan></text></g><g id="SvgjsG1052"><text id="SvgjsText1053" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="7.612169811320754" transform="rotate(0)"><tspan id="SvgjsTspan1054" dy="16" x="453.7504"><tspan id="SvgjsTspan1055" style="text-decoration:;">1</tspan></tspan></text></g><g id="SvgjsG1056"><text id="SvgjsText1057" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="44.08650943396226" transform="rotate(0)"><tspan id="SvgjsTspan1058" dy="16" x="50.5"><tspan id="SvgjsTspan1059" style="text-decoration:;">192.168.1.0</tspan></tspan></text></g><g id="SvgjsG1060"><text id="SvgjsText1061" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="44.08650943396226" transform="rotate(0)"><tspan id="SvgjsTspan1062" dy="16" x="151.3"><tspan id="SvgjsTspan1063" style="text-decoration:;">255.255.255.0</tspan></tspan></text></g><g id="SvgjsG1064"><text id="SvgjsText1065" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="44.08650943396226" transform="rotate(0)"><tspan id="SvgjsTspan1066" dy="16" x="252.10000000000002"><tspan id="SvgjsTspan1067" style="text-decoration:;">— —</tspan></tspan></text></g><g id="SvgjsG1068"><text id="SvgjsText1069" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="44.08650943396226" transform="rotate(0)"><tspan id="SvgjsTspan1070" dy="16" x="352.9"><tspan id="SvgjsTspan1071" style="text-decoration:;">eth3</tspan></tspan></text></g><g id="SvgjsG1072"><text id="SvgjsText1073" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="44.08650943396226" transform="rotate(0)"><tspan id="SvgjsTspan1074" dy="16" x="453.7504"><tspan id="SvgjsTspan1075" style="text-decoration:;">1</tspan></tspan></text></g><g id="SvgjsG1076"><text id="SvgjsText1077" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="80.57179245283018" transform="rotate(0)"><tspan id="SvgjsTspan1078" dy="16" x="50.5"><tspan id="SvgjsTspan1079" style="text-decoration:;">0.0.0.0</tspan></tspan></text></g><g id="SvgjsG1080"><text id="SvgjsText1081" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="80.57179245283018" transform="rotate(0)"><tspan id="SvgjsTspan1082" dy="16" x="151.3"><tspan id="SvgjsTspan1083" style="text-decoration:;">0.0.0.0</tspan></tspan></text></g><g id="SvgjsG1084"><text id="SvgjsText1085" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="80.57179245283018" transform="rotate(0)"><tspan id="SvgjsTspan1086" dy="16" x="252.10000000000002"><tspan id="SvgjsTspan1087" style="text-decoration:;">192.0.2.1</tspan></tspan></text></g><g id="SvgjsG1088"><text id="SvgjsText1089" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="80.57179245283018" transform="rotate(0)"><tspan id="SvgjsTspan1090" dy="16" x="352.9"><tspan id="SvgjsTspan1091" style="text-decoration:;">eth1</tspan></tspan></text></g><g id="SvgjsG1092"><text id="SvgjsText1093" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="80.57179245283018" transform="rotate(0)"><tspan id="SvgjsTspan1094" dy="16" x="453.7504"><tspan id="SvgjsTspan1095" style="text-decoration:;">1</tspan></tspan></text></g></g><g id="SvgjsG1096" transform="translate(35,25)"><path id="SvgjsPath1097" d="M0 0L100.80000000000001 0L100.80000000000001 36.47251572327043 L0 36.47251572327043Z" stroke="rgba(134,155,185,1)" stroke-width="1" fill-opacity="1" fill="#d9e8fc"></path><path id="SvgjsPath1098" d="M100.80000000000001 0L201.60000000000002 0L201.60000000000002 36.47251572327043 L100.80000000000001 36.47251572327043Z" stroke="rgba(134,155,185,1)" stroke-width="1" fill-opacity="1" fill="#d9e8fc"></path><path id="SvgjsPath1099" d="M201.60000000000002 0L302.40000000000003 0L302.40000000000003 36.47251572327043 L201.60000000000002 36.47251572327043Z" stroke="rgba(134,155,185,1)" stroke-width="1" fill-opacity="1" fill="#d9e8fc"></path><path id="SvgjsPath1100" d="M302.4 0L403.25039999999996 0L403.25039999999996 36.47251572327043 L302.4 36.47251572327043Z" stroke="rgba(134,155,185,1)" stroke-width="1" fill-opacity="1" fill="#d9e8fc"></path><path id="SvgjsPath1101" d="M403.2504 0L504 0L504 36.47251572327043 L403.2504 36.47251572327043Z" stroke="rgba(134,155,185,1)" stroke-width="1" fill-opacity="1" fill="#d9e8fc"></path><g id="SvgjsG1102"><text id="SvgjsText1103" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.8887421383647833" transform="rotate(0)"><tspan id="SvgjsTspan1104" dy="16" x="50.5"><tspan id="SvgjsTspan1105" style="text-decoration:;">目标地址</tspan></tspan><tspan id="SvgjsTspan1106" dy="16" x="50.5"><tspan id="SvgjsTspan1107" style="text-decoration:;">（Destination）</tspan></tspan></text></g><g id="SvgjsG1108"><text id="SvgjsText1109" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.8887421383647833" transform="rotate(0)"><tspan id="SvgjsTspan1110" dy="16" x="151.3"><tspan id="SvgjsTspan1111" style="text-decoration:;">子网掩码</tspan></tspan><tspan id="SvgjsTspan1112" dy="16" x="151.3"><tspan id="SvgjsTspan1113" style="text-decoration:;">（Netmask）</tspan></tspan></text></g><g id="SvgjsG1114"><text id="SvgjsText1115" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.8887421383647833" transform="rotate(0)"><tspan id="SvgjsTspan1116" dy="16" x="252.10000000000002"><tspan id="SvgjsTspan1117" style="text-decoration:;">网关</tspan></tspan><tspan id="SvgjsTspan1118" dy="16" x="252.10000000000002"><tspan id="SvgjsTspan1119" style="text-decoration:;">（Gateway）</tspan></tspan></text></g><g id="SvgjsG1120"><text id="SvgjsText1121" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.8887421383647833" transform="rotate(0)"><tspan id="SvgjsTspan1122" dy="16" x="352.9"><tspan id="SvgjsTspan1123" style="text-decoration:;">接口</tspan></tspan><tspan id="SvgjsTspan1124" dy="16" x="352.9"><tspan id="SvgjsTspan1125" style="text-decoration:;">（Interface）</tspan></tspan></text></g><g id="SvgjsG1126"><text id="SvgjsText1127" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.8887421383647833" transform="rotate(0)"><tspan id="SvgjsTspan1128" dy="16" x="453.7504"><tspan id="SvgjsTspan1129" style="text-decoration:;">跃点数</tspan></tspan><tspan id="SvgjsTspan1130" dy="16" x="453.7504"><tspan id="SvgjsTspan1131" style="text-decoration:;">（Metric）</tspan></tspan></text></g></g><g id="SvgjsG1132" transform="translate(303,270.40625)"><path id="SvgjsPath1133" d="M 0 0L 55 0L 55 55L 0 55Z" stroke="none" fill="url(#SvgjsPattern1134)" opacity="1"></path></g><g id="SvgjsG1136" transform="translate(55.1875,260)"><path id="SvgjsPath1137" d="M 0 0L 75.8125 0L 75.8125 75.8125L 0 75.8125Z" stroke="none" fill="url(#SvgjsPattern1138)" opacity="1"></path></g><g id="SvgjsG1140" transform="translate(600,220)"><path id="SvgjsPath1141" d="M 0 0L 62 0L 62 62L 0 62Z" stroke="none" fill="url(#SvgjsPattern1142)" opacity="1"></path></g><g id="SvgjsG1144" transform="translate(600,337)"><path id="SvgjsPath1145" d="M 0 0L 62 0L 62 62L 0 62Z" stroke="none" fill="url(#SvgjsPattern1146)" opacity="1"></path></g><g id="SvgjsG1148"><path id="SvgjsPath1149" d="M361.53422331657316 297.22122040312803L596.4657766834268 251.68502959687197" stroke="#323232" stroke-width="2" fill="none" marker-start="url(#SvgjsMarker1150)" marker-end="url(#SvgjsMarker1152)"></path></g><g id="SvgjsG1154"><path id="SvgjsPath1155" d="M334.0558630570471 325.9682445903009L596.4441369429529 367.4380054096991" stroke="#323232" stroke-width="2" fill="none" marker-start="url(#SvgjsMarker1156)" marker-end="url(#SvgjsMarker1158)"></path></g><g id="SvgjsG1160" transform="translate(566,272.40625)"><path id="SvgjsPath1161" d="M 0 0L 120 0L 120 23.59375L 0 23.59375Z" stroke="none" fill="none"></path><g id="SvgjsG1162"><text id="SvgjsText1163" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.171875" transform="rotate(0)"><tspan id="SvgjsTspan1164" dy="16" x="60"><tspan id="SvgjsTspan1165" style="text-decoration:;">局域网的设备</tspan></tspan></text></g></g><g id="SvgjsG1166" transform="translate(566,392.40625)"><path id="SvgjsPath1167" d="M 0 0L 120 0L 120 20L 0 20Z" stroke="none" fill="none"></path><g id="SvgjsG1168"><text id="SvgjsText1169" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"><tspan id="SvgjsTspan1170" dy="16" x="60"><tspan id="SvgjsTspan1171" style="text-decoration:;">局域网的设备</tspan></tspan></text></g></g><g id="SvgjsG1172" transform="translate(25,331.40625)"><path id="SvgjsPath1173" d="M 0 0L 120 0L 120 20L 0 20Z" stroke="none" fill="none"></path><g id="SvgjsG1174"><text id="SvgjsText1175" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"><tspan id="SvgjsTspan1176" dy="16" x="60"><tspan id="SvgjsTspan1177" style="text-decoration:;">互联网</tspan></tspan></text></g></g><g id="SvgjsG1178"><path id="SvgjsPath1179" d="M299.4 297.90625L115 297.90625" stroke="#323232" stroke-width="2" fill="none" marker-start="url(#SvgjsMarker1180)" marker-end="url(#SvgjsMarker1182)"></path></g><g id="SvgjsG1184" transform="translate(352.5,235.703125)"><path id="SvgjsPath1185" d="M 0 0L 88.5 0L 88.5 40L 0 40Z" stroke="rgba(134,155,185,1)" stroke-width="1" fill-opacity="1" fill="#d9e8fc"></path><g id="SvgjsG1186"><text id="SvgjsText1187" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.875" transform="rotate(0)"><tspan id="SvgjsTspan1188" dy="16" x="44.5"><tspan id="SvgjsTspan1189" style="text-decoration:;">eth2</tspan></tspan><tspan id="SvgjsTspan1190" dy="16" x="44.5"><tspan id="SvgjsTspan1191" style="text-decoration:;">10.10.1.1</tspan></tspan></text></g></g><g id="SvgjsG1192" transform="translate(350.75,337)"><path id="SvgjsPath1193" d="M 0 0L 92 0L 92 38.59375L 0 38.59375Z" stroke="rgba(134,155,185,1)" stroke-width="1" fill-opacity="1" fill="#d9e8fc"></path><g id="SvgjsG1194"><text id="SvgjsText1195" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="72px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.171875" transform="rotate(0)"><tspan id="SvgjsTspan1196" dy="16" x="46"><tspan id="SvgjsTspan1197" style="text-decoration:;">eth3</tspan></tspan><tspan id="SvgjsTspan1198" dy="16" x="46"><tspan id="SvgjsTspan1199" style="text-decoration:;">192.168.1.1</tspan></tspan></text></g></g><g id="SvgjsG1200" transform="translate(209.5,306)"><path id="SvgjsPath1201" d="M 0 0L 88.5 0L 88.5 40L 0 40Z" stroke="rgba(134,155,185,1)" stroke-width="1" fill-opacity="1" fill="#d9e8fc"></path><g id="SvgjsG1202"><text id="SvgjsText1203" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.875" transform="rotate(0)"><tspan id="SvgjsTspan1204" dy="16" x="44.5"><tspan id="SvgjsTspan1205" style="text-decoration:;">eth1</tspan></tspan><tspan id="SvgjsTspan1206" dy="16" x="44.5"><tspan id="SvgjsTspan1207" style="text-decoration:;">192.0.2.1</tspan></tspan></text></g></g><g id="SvgjsG1208" transform="translate(498,217.40625)"><path id="SvgjsPath1209" d="M 0 0L 120 0L 120 23.59375L 0 23.59375Z" stroke="none" fill="none"></path><g id="SvgjsG1210"><text id="SvgjsText1211" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.171875" transform="rotate(0)"><tspan id="SvgjsTspan1212" dy="16" x="60"><tspan id="SvgjsTspan1213" style="text-decoration:;">10.10.1.101</tspan></tspan></text></g></g><g id="SvgjsG1214" transform="translate(494,371.40625)"><path id="SvgjsPath1215" d="M 0 0L 120 0L 120 23.59375L 0 23.59375Z" stroke="none" fill="none"></path><g id="SvgjsG1216"><text id="SvgjsText1217" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.171875" transform="rotate(0)"><tspan id="SvgjsTspan1218" dy="16" x="60"><tspan id="SvgjsTspan1219" style="text-decoration:;">192.168.1.100</tspan></tspan></text></g></g><g id="SvgjsG1220" transform="translate(89.5,266)"><path id="SvgjsPath1221" d="M 0 0L 120 0L 120 23.59375L 0 23.59375Z" stroke="none" fill="none"></path><g id="SvgjsG1222"><text id="SvgjsText1223" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.171875" transform="rotate(0)"><tspan id="SvgjsTspan1224" dy="16" x="60"><tspan id="SvgjsTspan1225" style="text-decoration:;">192.0.2.1</tspan></tspan></text></g></g></svg>
  <p style="text-align: center; color: #888;">（路由器转发操作工作流程）</p>
</div>

具体的工作流程根据上图，举个例子。

假设地址为 `10.10.1.101` 的计算机要向地址为 `192.168.1.100` 的服务器发送一个包，这个包先到达图中的路由器。

判断转发目标的第一步，就是根据包的接收方 IP 地址查询路由表中的目标地址栏，以找到相匹配的记录。

路由匹配和前面讲的一样，每个条目的子网掩码和 `192.168.1.100` IP 做 **& 与运算**后，得到的结果与对应条目的目标地址进行匹配，如果匹配就会作为候选转发目标，如果不匹配就继续与下个条目进行路由匹配。

如第二条目的子网掩码 `255.255.255.0` 与 `192.168.1.100` IP 做 **& 与运算**后，得到结果是 `192.168.1.0`，这与第二条目的目标地址 `192.168.1.0` 匹配，该第二条目记录就会被作为转发目标。

实在找不到匹配路由时，就会选择**默认路由**，路由表中子网掩码为 `0.0.0.0` 的记录表示「默认路由」。

### 路由器的发送操作

接下来就会进入包的**发送操作**。

首先，我们需要根据**路由表的网关列**判断对方的地址。

* 如果网关是一个 IP 地址，则这个IP 地址就是我们要转发到的目标地址，**还未抵达终点**，还需继续需要路由器转发。
* 如果网关为空，则 IP 头部中的接收方 IP 地址就是要转发到的目标地址，也是就终于找到 IP 包头里的目标地址了，说明**已抵达终点**。

知道对方的 IP 地址之后，接下来需要通过 `ARP` 协议根据 IP 地址查询 MAC 地址，并将查询的结果作为接收方 MAC 地址。

路由器也有 ARP 缓存，因此首先会在 ARP 缓存中查询，如果找不到则发送 ARP 查询请求。

接下来是发送方 MAC 地址字段，这里填写输出端口的 MAC 地址。还有一个以太类型字段，填写 `0800` （十六进制）表示 IP 协议。

网络包完成后，接下来会将其转换成电信号并通过端口发送出去。这一步的工作过程和计算机也是相同的。

发送出去的网络包会通过**交换机**到达下一个路由器。由于接收方 MAC 地址就是下一个路由器的地址，所以交换机会根据这一地址将包传输到下一个路由器。

接下来，下一个路由器会将包转发给再下一个路由器，经过层层转发之后，网络包就到达了最终的目的地。

::: tip 小贴士
在网络包传输的过程中，**源 IP 和目标 IP 始终是不会变的，一直变化的是 MAC 地址**，因为需要 MAC 地址在以太网内进行**两个设备**之间的包传输。
:::

## 互相拆包装：服务器与客户端

数据包抵达了服务器，于是开始拆数据包的包装，就像拆快递一样。

<div style="text-align: center;">
  <svg id="SvgjsSvg1015" width="666.296875" height="626.5" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1007"><marker id="SvgjsMarker1218" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1219" d="M0,0 L14,5 L0,10 L0,0" fill="#d1b65f" stroke="#d1b65f" stroke-width="1"></path></marker><marker id="SvgjsMarker1222" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1223" d="M0,0 L14,5 L0,10 L0,0" fill="#d1b65f" stroke="#d1b65f" stroke-width="1"></path></marker><marker id="SvgjsMarker1226" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1227" d="M0,0 L14,5 L0,10 L0,0" fill="#d1b65f" stroke="#d1b65f" stroke-width="1"></path></marker><marker id="SvgjsMarker1230" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1231" d="M0,0 L14,5 L0,10 L0,0" fill="#6d8ebb" stroke="#6d8ebb" stroke-width="1"></path></marker><marker id="SvgjsMarker1234" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1235" d="M0,0 L14,5 L0,10 L0,0" fill="#b7544f" stroke="#b7544f" stroke-width="1"></path></marker><marker id="SvgjsMarker1238" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1239" d="M0,0 L14,5 L0,10 L0,0" fill="#b7544f" stroke="#b7544f" stroke-width="1"></path></marker><marker id="SvgjsMarker1242" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1243" d="M0,0 L14,5 L0,10 L0,0" fill="#b7544f" stroke="#b7544f" stroke-width="1"></path></marker></defs><g id="SvgjsG1008" transform="translate(142.5,25)"><path id="SvgjsPath1009" d="M 0 0L 160 0L 160 43L 0 43Z" stroke="rgba(209,180,102,1)" stroke-width="2" fill-opacity="1" fill="#fff2cc"></path><g id="SvgjsG1010"><text id="SvgjsText1011" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="140px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.375" transform="rotate(0)"><tspan id="SvgjsTspan1012" dy="16" x="80"><tspan id="SvgjsTspan1013" style="text-decoration:;">发送端</tspan></tspan><tspan id="SvgjsTspan1014" dy="16" x="80"><tspan id="SvgjsTspan1015" style="text-decoration:;">通过每一层则添加头部</tspan></tspan></text></g></g><g id="SvgjsG1016" transform="translate(477.5,25)"><path id="SvgjsPath1017" d="M 0 0L 160 0L 160 43L 0 43Z" stroke="rgba(174,88,85,1)" stroke-width="2" fill-opacity="1" fill="#f9cecd"></path><g id="SvgjsG1018"><text id="SvgjsText1019" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="140px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.375" transform="rotate(0)"><tspan id="SvgjsTspan1020" dy="16" x="80"><tspan id="SvgjsTspan1021" style="text-decoration:;">接收端</tspan></tspan><tspan id="SvgjsTspan1022" dy="16" x="80"><tspan id="SvgjsTspan1023" style="text-decoration:;">通过每一层则删除头部</tspan></tspan></text></g></g><g id="SvgjsG1024" transform="translate(178,103)"><path id="SvgjsPath1025" d="M 0 0L 89 0L 89 27L 0 27Z" stroke="rgba(210,159,18,1)" stroke-width="2" fill-opacity="1" fill="#ffe6cd"></path><g id="SvgjsG1026"><text id="SvgjsText1027" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.875" transform="rotate(0)"><tspan id="SvgjsTspan1028" dy="16" x="44.5"><tspan id="SvgjsTspan1029" style="text-decoration:;">HTTP 数据</tspan></tspan></text></g></g><g id="SvgjsG1030" transform="translate(513,103)"><path id="SvgjsPath1031" d="M 0 0L 89 0L 89 27L 0 27Z" stroke="rgba(210,159,18,1)" stroke-width="2" fill-opacity="1" fill="#ffe6cd"></path><g id="SvgjsG1032"><text id="SvgjsText1033" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.875" transform="rotate(0)"><tspan id="SvgjsTspan1034" dy="16" x="44.5"><tspan id="SvgjsTspan1035" style="text-decoration:;">HTTP 数据</tspan></tspan></text></g></g><g id="SvgjsG1036" transform="translate(25,103)"><path id="SvgjsPath1037" d="M 0 0L 61.5 0L 61.5 27L 0 27Z" stroke="rgba(210,159,18,1)" stroke-width="1" fill-opacity="1" fill="#ffe6cd"></path><g id="SvgjsG1038"><text id="SvgjsText1039" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.875" transform="rotate(0)"><tspan id="SvgjsTspan1040" dy="16" x="31"><tspan id="SvgjsTspan1041" style="text-decoration:;">应用层</tspan></tspan></text></g></g><g id="SvgjsG1042" transform="translate(166.5,165)"><path id="SvgjsPath1043" d="M 0 0L 112 0L 112 63L 0 63Z" stroke="rgba(109,141,191,1)" stroke-width="2" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1044"><text id="SvgjsText1045" font-family="微软雅黑" text-anchor="start" font-size="13px" width="92px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="20.875" transform="rotate(0)"></text></g></g><g id="SvgjsG1046" transform="translate(25,183)"><path id="SvgjsPath1047" d="M 0 0L 61.5 0L 61.5 27L 0 27Z" stroke="rgba(109,141,191,1)" stroke-width="1" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1048"><text id="SvgjsText1049" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.875" transform="rotate(0)"><tspan id="SvgjsTspan1050" dy="16" x="31"><tspan id="SvgjsTspan1051" style="text-decoration:;">传输层</tspan></tspan></text></g></g><g id="SvgjsG1052" transform="translate(178,191)"><path id="SvgjsPath1053" d="M 0 0L 89 0L 89 27L 0 27Z" stroke="rgba(210,159,18,1)" stroke-width="2" fill-opacity="1" fill="#ffe6cd"></path><g id="SvgjsG1054"><text id="SvgjsText1055" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.875" transform="rotate(0)"><tspan id="SvgjsTspan1056" dy="16" x="44.5"><tspan id="SvgjsTspan1057" style="text-decoration:;">HTTP 数据</tspan></tspan></text></g></g><g id="SvgjsG1058" transform="translate(169.5,168.5)"><path id="SvgjsPath1059" d="M 0 0L 62 0L 62 20L 0 20Z" stroke="none" fill="none"></path><g id="SvgjsG1060"><text id="SvgjsText1061" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="62px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"><tspan id="SvgjsTspan1062" dy="16" x="31"><tspan id="SvgjsTspan1063" style="text-decoration:;">TCP 头部</tspan></tspan></text></g></g><g id="SvgjsG1064" transform="translate(501.5,165)"><path id="SvgjsPath1065" d="M 0 0L 112 0L 112 63L 0 63Z" stroke="rgba(109,141,191,1)" stroke-width="2" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1066"><text id="SvgjsText1067" font-family="微软雅黑" text-anchor="start" font-size="13px" width="92px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="20.875" transform="rotate(0)"></text></g></g><g id="SvgjsG1068" transform="translate(513,191)"><path id="SvgjsPath1069" d="M 0 0L 89 0L 89 27L 0 27Z" stroke="rgba(210,159,18,1)" stroke-width="2" fill-opacity="1" fill="#ffe6cd"></path><g id="SvgjsG1070"><text id="SvgjsText1071" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.875" transform="rotate(0)"><tspan id="SvgjsTspan1072" dy="16" x="44.5"><tspan id="SvgjsTspan1073" style="text-decoration:;">HTTP 数据</tspan></tspan></text></g></g><g id="SvgjsG1074" transform="translate(502.5,168.5)"><path id="SvgjsPath1075" d="M 0 0L 62 0L 62 20L 0 20Z" stroke="none" fill="none"></path><g id="SvgjsG1076"><text id="SvgjsText1077" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="62px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"><tspan id="SvgjsTspan1078" dy="16" x="31"><tspan id="SvgjsTspan1079" style="text-decoration:;">TCP 头部</tspan></tspan></text></g></g><g id="SvgjsG1080" transform="translate(157.0625,263)"><path id="SvgjsPath1081" d="M 0 0L 133.25 0L 133.25 107L 0 107Z" stroke="rgba(147,117,163,1)" stroke-width="2" fill-opacity="1" fill="#e1d5e7"></path><g id="SvgjsG1082"><text id="SvgjsText1083" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="114px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="42.875" transform="rotate(0)"></text></g></g><g id="SvgjsG1084" transform="translate(25,296)"><path id="SvgjsPath1085" d="M 0 0L 61.5 0L 61.5 27L 0 27Z" stroke="rgba(147,117,163,1)" stroke-width="1" fill-opacity="1" fill="#e1d5e7"></path><g id="SvgjsG1086"><text id="SvgjsText1087" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.875" transform="rotate(0)"><tspan id="SvgjsTspan1088" dy="16" x="31"><tspan id="SvgjsTspan1089" style="text-decoration:;">网络层</tspan></tspan></text></g></g><g id="SvgjsG1090" transform="translate(154.6875,266.5)"><path id="SvgjsPath1091" d="M 0 0L 62 0L 62 20L 0 20Z" stroke="none" fill="none"></path><g id="SvgjsG1092"><text id="SvgjsText1093" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="62px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"><tspan id="SvgjsTspan1094" dy="16" x="31"><tspan id="SvgjsTspan1095" style="text-decoration:;">IP 头部</tspan></tspan></text></g></g><g id="SvgjsG1096" transform="translate(167.6875,292.5)"><path id="SvgjsPath1097" d="M 0 0L 112 0L 112 63L 0 63Z" stroke="rgba(109,141,191,1)" stroke-width="2" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1098"><text id="SvgjsText1099" font-family="微软雅黑" text-anchor="start" font-size="13px" width="92px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="20.875" transform="rotate(0)"></text></g></g><g id="SvgjsG1100" transform="translate(179.1875,318.5)"><path id="SvgjsPath1101" d="M 0 0L 89 0L 89 27L 0 27Z" stroke="rgba(210,159,18,1)" stroke-width="2" fill-opacity="1" fill="#ffe6cd"></path><g id="SvgjsG1102"><text id="SvgjsText1103" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.875" transform="rotate(0)"><tspan id="SvgjsTspan1104" dy="16" x="44.5"><tspan id="SvgjsTspan1105" style="text-decoration:;">HTTP 数据</tspan></tspan></text></g></g><g id="SvgjsG1106" transform="translate(170.6875,296)"><path id="SvgjsPath1107" d="M 0 0L 62 0L 62 20L 0 20Z" stroke="none" fill="none"></path><g id="SvgjsG1108"><text id="SvgjsText1109" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="62px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"><tspan id="SvgjsTspan1110" dy="16" x="31"><tspan id="SvgjsTspan1111" style="text-decoration:;">TCP 头部</tspan></tspan></text></g></g><g id="SvgjsG1112" transform="translate(492.0625,263)"><path id="SvgjsPath1113" d="M 0 0L 133.25 0L 133.25 107L 0 107Z" stroke="rgba(147,117,163,1)" stroke-width="2" fill-opacity="1" fill="#e1d5e7"></path><g id="SvgjsG1114"><text id="SvgjsText1115" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="114px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="42.875" transform="rotate(0)"></text></g></g><g id="SvgjsG1116" transform="translate(489.6875,266.5)"><path id="SvgjsPath1117" d="M 0 0L 62 0L 62 20L 0 20Z" stroke="none" fill="none"></path><g id="SvgjsG1118"><text id="SvgjsText1119" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="62px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"><tspan id="SvgjsTspan1120" dy="16" x="31"><tspan id="SvgjsTspan1121" style="text-decoration:;">IP 头部</tspan></tspan></text></g></g><g id="SvgjsG1122" transform="translate(502.6875,292.5)"><path id="SvgjsPath1123" d="M 0 0L 112 0L 112 63L 0 63Z" stroke="rgba(109,141,191,1)" stroke-width="2" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1124"><text id="SvgjsText1125" font-family="微软雅黑" text-anchor="start" font-size="13px" width="92px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="20.875" transform="rotate(0)"></text></g></g><g id="SvgjsG1126" transform="translate(514.1875,318.5)"><path id="SvgjsPath1127" d="M 0 0L 89 0L 89 27L 0 27Z" stroke="rgba(210,159,18,1)" stroke-width="2" fill-opacity="1" fill="#ffe6cd"></path><g id="SvgjsG1128"><text id="SvgjsText1129" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.875" transform="rotate(0)"><tspan id="SvgjsTspan1130" dy="16" x="44.5"><tspan id="SvgjsTspan1131" style="text-decoration:;">HTTP 数据</tspan></tspan></text></g></g><g id="SvgjsG1132" transform="translate(505.6875,296)"><path id="SvgjsPath1133" d="M 0 0L 62 0L 62 20L 0 20Z" stroke="none" fill="none"></path><g id="SvgjsG1134"><text id="SvgjsText1135" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="62px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"><tspan id="SvgjsTspan1136" dy="16" x="31"><tspan id="SvgjsTspan1137" style="text-decoration:;">TCP 头部</tspan></tspan></text></g></g><g id="SvgjsG1138" transform="translate(141.3125,407.5)"><path id="SvgjsPath1139" d="M 0 0L 164.75 0L 164.75 154L 0 154Z" stroke="rgba(133,174,110,1)" stroke-width="2" fill-opacity="1" fill="#d6e9d5"></path><g id="SvgjsG1140"><text id="SvgjsText1141" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="145px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="66.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1142" transform="translate(25,477)"><path id="SvgjsPath1143" d="M 0 0L 61.5 0L 61.5 27L 0 27Z" stroke="rgba(133,174,110,1)" stroke-width="1" fill-opacity="1" fill="#d6e9d5"></path><g id="SvgjsG1144"><text id="SvgjsText1145" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="42px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.875" transform="rotate(0)"><tspan id="SvgjsTspan1146" dy="16" x="31"><tspan id="SvgjsTspan1147" style="text-decoration:;">链路层</tspan></tspan></text></g></g><g id="SvgjsG1148" transform="translate(141.3125,413)"><path id="SvgjsPath1149" d="M 0 0L 80 0L 80 21.5L 0 21.5Z" stroke="none" fill="none"></path><g id="SvgjsG1150"><text id="SvgjsText1151" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="80px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.125" transform="rotate(0)"><tspan id="SvgjsTspan1152" dy="16" x="40"><tspan id="SvgjsTspan1153" style="text-decoration:;">以太网 头部</tspan></tspan></text></g></g><g id="SvgjsG1154" transform="translate(157.0625,437)"><path id="SvgjsPath1155" d="M 0 0L 133.25 0L 133.25 107L 0 107Z" stroke="rgba(147,117,163,1)" stroke-width="2" fill-opacity="1" fill="#e1d5e7"></path><g id="SvgjsG1156"><text id="SvgjsText1157" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="114px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="42.875" transform="rotate(0)"></text></g></g><g id="SvgjsG1158" transform="translate(154.6875,440.5)"><path id="SvgjsPath1159" d="M 0 0L 62 0L 62 20L 0 20Z" stroke="none" fill="none"></path><g id="SvgjsG1160"><text id="SvgjsText1161" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="62px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"><tspan id="SvgjsTspan1162" dy="16" x="31"><tspan id="SvgjsTspan1163" style="text-decoration:;">IP 头部</tspan></tspan></text></g></g><g id="SvgjsG1164" transform="translate(167.6875,466.5)"><path id="SvgjsPath1165" d="M 0 0L 112 0L 112 63L 0 63Z" stroke="rgba(109,141,191,1)" stroke-width="2" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1166"><text id="SvgjsText1167" font-family="微软雅黑" text-anchor="start" font-size="13px" width="92px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="20.875" transform="rotate(0)"></text></g></g><g id="SvgjsG1168" transform="translate(179.1875,492.5)"><path id="SvgjsPath1169" d="M 0 0L 89 0L 89 27L 0 27Z" stroke="rgba(210,159,18,1)" stroke-width="2" fill-opacity="1" fill="#ffe6cd"></path><g id="SvgjsG1170"><text id="SvgjsText1171" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.875" transform="rotate(0)"><tspan id="SvgjsTspan1172" dy="16" x="44.5"><tspan id="SvgjsTspan1173" style="text-decoration:;">HTTP 数据</tspan></tspan></text></g></g><g id="SvgjsG1174" transform="translate(170.6875,470)"><path id="SvgjsPath1175" d="M 0 0L 62 0L 62 20L 0 20Z" stroke="none" fill="none"></path><g id="SvgjsG1176"><text id="SvgjsText1177" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="62px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"><tspan id="SvgjsTspan1178" dy="16" x="31"><tspan id="SvgjsTspan1179" style="text-decoration:;">TCP 头部</tspan></tspan></text></g></g><g id="SvgjsG1180" transform="translate(476.3125,407.5)"><path id="SvgjsPath1181" d="M 0 0L 164.75 0L 164.75 154L 0 154Z" stroke="rgba(133,174,110,1)" stroke-width="2" fill-opacity="1" fill="#d6e9d5"></path><g id="SvgjsG1182"><text id="SvgjsText1183" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="145px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="66.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1184" transform="translate(476.3125,413)"><path id="SvgjsPath1185" d="M 0 0L 80 0L 80 21.5L 0 21.5Z" stroke="none" fill="none"></path><g id="SvgjsG1186"><text id="SvgjsText1187" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="80px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.125" transform="rotate(0)"><tspan id="SvgjsTspan1188" dy="16" x="40"><tspan id="SvgjsTspan1189" style="text-decoration:;">以太网 头部</tspan></tspan></text></g></g><g id="SvgjsG1190" transform="translate(492.0625,437)"><path id="SvgjsPath1191" d="M 0 0L 133.25 0L 133.25 107L 0 107Z" stroke="rgba(147,117,163,1)" stroke-width="2" fill-opacity="1" fill="#e1d5e7"></path><g id="SvgjsG1192"><text id="SvgjsText1193" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="114px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="42.875" transform="rotate(0)"></text></g></g><g id="SvgjsG1194" transform="translate(489.6875,440.5)"><path id="SvgjsPath1195" d="M 0 0L 62 0L 62 20L 0 20Z" stroke="none" fill="none"></path><g id="SvgjsG1196"><text id="SvgjsText1197" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="62px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"><tspan id="SvgjsTspan1198" dy="16" x="31"><tspan id="SvgjsTspan1199" style="text-decoration:;">IP 头部</tspan></tspan></text></g></g><g id="SvgjsG1200" transform="translate(502.6875,466.5)"><path id="SvgjsPath1201" d="M 0 0L 112 0L 112 63L 0 63Z" stroke="rgba(109,141,191,1)" stroke-width="2" fill-opacity="1" fill="#dbe8fd"></path><g id="SvgjsG1202"><text id="SvgjsText1203" font-family="微软雅黑" text-anchor="start" font-size="13px" width="92px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="20.875" transform="rotate(0)"></text></g></g><g id="SvgjsG1204" transform="translate(514.1875,492.5)"><path id="SvgjsPath1205" d="M 0 0L 89 0L 89 27L 0 27Z" stroke="rgba(210,159,18,1)" stroke-width="2" fill-opacity="1" fill="#ffe6cd"></path><g id="SvgjsG1206"><text id="SvgjsText1207" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="69px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="2.875" transform="rotate(0)"><tspan id="SvgjsTspan1208" dy="16" x="44.5"><tspan id="SvgjsTspan1209" style="text-decoration:;">HTTP 数据</tspan></tspan></text></g></g><g id="SvgjsG1210" transform="translate(505.6875,470)"><path id="SvgjsPath1211" d="M 0 0L 62 0L 62 20L 0 20Z" stroke="none" fill="none"></path><g id="SvgjsG1212"><text id="SvgjsText1213" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="62px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-0.625" transform="rotate(0)"><tspan id="SvgjsTspan1214" dy="16" x="31"><tspan id="SvgjsTspan1215" style="text-decoration:;">TCP 头部</tspan></tspan></text></g></g><g id="SvgjsG1216"><path id="SvgjsPath1217" d="M222.5 131L222.5 149.3793852415718L222.5 149.3793852415718L222.5 165.15877048314363" stroke="#d1b65f" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1218)"></path></g><g id="SvgjsG1220"><path id="SvgjsPath1221" d="M222.5 229L222.5 245.5L222.5 245.5L222.5 259.4" stroke="#d1b65f" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1222)"></path></g><g id="SvgjsG1224"><path id="SvgjsPath1225" d="M223.6875 371L223.6875 388.75L223.6875 388.75L223.6875 403.9" stroke="#d1b65f" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1226)"></path></g><g id="SvgjsG1228"><path id="SvgjsPath1229" d="M223.6875 562.5L223.6875 601.5L558.6875 601.5L558.6875 565.1" stroke="#6d8ebb" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1230)"></path></g><g id="SvgjsG1232"><path id="SvgjsPath1233" d="M558.6875 406.5L558.6875 388.75L558.6875 388.75L558.6875 373.6" stroke="#b7544f" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1234)"></path></g><g id="SvgjsG1236"><path id="SvgjsPath1237" d="M558.6875 262L558.6875 245.5L558.6875 245.5L558.6875 231.60000000000002" stroke="#b7544f" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1238)"></path></g><g id="SvgjsG1240"><path id="SvgjsPath1241" d="M557.5 164L557.5 147.5L557.5 147.5L557.5 133.6" stroke="#b7544f" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1242)"></path></g></svg>
  <p style="text-align: center; color: #888;">（服务器与客户端 网络包传递过程）</p>
</div>

数据包抵达服务器后，服务器会先拆开数据包的 MAC 头部，查看是否和服务器自己的 MAC 地址符合，符合就将包收起来。

接着继续拆开数据包的 IP 头，发现 IP 地址符合，根据 IP 头中协议项，知道自己上层是 TCP 协议。

然后，拆开 TCP 的头，里面有序列号，需要看一看这个序列包是不是我想要的，如果是就放入缓存中然后返回一个 ACK，如果不是就丢弃。TCP头部里面还有端口号，HTTP 的服务器正在监听这个端口号。

于是，服务器自然就知道是 HTTP 进程想要这个包，随即就将包发给 HTTP 进程。

服务器的 HTTP 进程看到，原来这个请求是要访问一个页面，于是就把这个网页封装在 HTTP 响应报文里。

HTTP 响应报文也需要穿上 TCP、IP、MAC 头部，不过这次是源地址是服务器 IP 地址，目的地址是客户端 IP 地址。

穿好头部衣服后，从网卡出去，交由交换机转发到出城的路由器，路由器就把响应数据包发到了下一个路由器，就这样跳啊跳。

最后跳到了客户端的小区门卫路由器，路由器拆开 IP 头部发现是要找小区里的人，于是又把包发给了小区内的交换机，再由交换机转发到客户端。

客户端收到了服务器的响应数据包后，同样也非常的高兴，客户能拆快递了！

于是，客户端开始拆包，把收到的数据包的外包装拆的只剩 HTTP 响应报文后，交给浏览器去渲染页面，一份特别的数据包快递，就这样显示出来了！

最后，客户端要离开了，向服务器发起了 TCP 四次挥手，至此双方的连接就断开了。

（完）
